<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.152.2"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Linux常用命令"><meta itemprop=description content="总有一些人先看到未来"><meta name=description content="总有一些人先看到未来"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="linux,编程"><meta property="og:type" content="article"><meta property="og:title" content="Linux常用命令"><meta property="og:description" content="总有一些人先看到未来"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="/post/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"><meta property="og:site_name" content="你永远无法说服猴子说有一个上帝存在"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="你永远无法说服猴子说有一个上帝存在"><meta property="article:published_time" content="2021-12-20 23:39:16 +0000 UTC"><meta property="article:modified_time" content="2021-12-20 23:39:16 +0000 UTC"><link type=text/css rel=stylesheet href=/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1770457263"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><link rel=stylesheet type=text/css href="/css/custom_style.css?=1770457263"><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>Linux常用命令 - 你永远无法说服猴子说有一个上帝存在</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>你永远无法说服猴子说有一个上帝存在</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>一生一次的人生该如何度过呢？每次想到有你与我同行，路，必须走下去</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section>首页</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section>分类</a></li><li class="menu-item menu-item-commonweal"><a href=/categories/%E4%BB%B7%E5%80%BC/ class=hvr-icon-pulse rel=section>价值</a></li><li class="menu-item menu-item-about"><a href=/categories/%E5%A6%B9%E5%AD%90/ class=hvr-icon-pulse rel=section>妹子</a></li><li class="menu-item menu-item-"><a href=/ class="menus-parent hvr-icon-pulse" rel=section>玩客集
<span class=menu-item-shrink-icon><i class="fa fa-angle-right"></i></span></a><ul class=menu-children><li class=menu-child-item><a href=/categories/%E7%BC%96%E7%A8%8B/ class=hvr-icon-pulse rel=section><i class="fa hvr-icon"></i>编程</a></li></ul></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse">搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#一说明>一、说明</a><ul><li><a href=#1shell选择与切换>1、Shell选择与切换</a></li><li><a href=#2特殊命令符号>2、特殊命令符号</a></li><li><a href=#3bash中的特殊符号>3、Bash中的特殊符号</a></li></ul></li><li><a href=#二基础命令>二、基础命令</a><ul><li><a href=#1查看系统基础信息>1、查看系统基础信息</a></li><li><a href=#2添加用户>2、添加用户</a></li><li><a href=#3基础设置>3、基础设置</a></li><li><a href=#4磁盘管理>4、磁盘管理</a></li><li><a href=#5查看网络情况>5、查看网络情况</a></li><li><a href=#6上传下载文件>6、上传下载文件</a></li><li><a href=#7清除history>7、清除history</a></li><li><a href=#8窗口管理>8、窗口管理</a></li><li><a href=#9后台执行>9、后台执行</a></li></ul></li><li><a href=#三性能测试>三、性能测试</a><ul><li><a href=#1磁盘测试>1、磁盘测试</a></li><li><a href=#2网络测试>2、网络测试</a></li></ul></li><li><a href=#四系统监控>四、系统监控</a><ul><li><a href=#1dstat>1、dstat</a></li><li><a href=#2vmstat>2、vmstat</a></li><li><a href=#3top>3、top</a></li><li><a href=#4sysstat>4、sysstat</a></li><li><a href=#5iotop>5、iotop</a></li></ul></li><li><a href=#五性能调优>五、性能调优</a><ul><li><a href=#1分析进程调用>1、分析进程调用</a></li><li><a href=#2内核参数优化>2、内核参数优化</a></li></ul></li><li><a href=#六文本处理>六、文本处理</a><ul><li><a href=#1vim常用命令>1、Vim常用命令</a></li><li><a href=#2文本处理>2、文本处理</a></li><li><a href=#3awk-数据流处理>3、awk 数据流处理</a></li></ul></li><li><a href=#七数字证书>七、数字证书</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=你永远无法说服猴子说有一个上帝存在 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>你永远无法说服猴子说有一个上帝存在</p><div class=site-description itemprop=description>总有一些人先看到未来</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>3627</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>17</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>469</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=#ZgotmplZ title="QQ → tencent://Message/?Uin=304967823&amp;websiteName=www.tcioc.com&amp;Menu=yes" rel=noopener target=_blank><i class="fa fa-quora fa-fw"></i>
QQ
</a></span><span class=links-of-social-item><a href=https://github.com/loveyouluobin title="Github → https://github.com/loveyouluobin" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:304967823@qq.com title="E-Mail → mailto:304967823@qq.com" rel=noopener target=_blank><i class="fa fa-envelope fa-fw"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/loveyouluobin title="知乎 → https://www.zhihu.com/people/loveyouluobin" rel=noopener target=_blank><i class="fa fa-book fa-fw"></i>
知乎</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.zaobao.com/ title=https://www.zaobao.com/ target=_blank>联合早报</a></li><li class=links-of-blogroll-item><a href=https://xiaodu114.github.io/p/fav/imageSite/ title=https://xiaodu114.github.io/p/fav/imageSite/ target=_blank>谷歌搜索</a></li><li class=links-of-blogroll-item><a href=https://yandex.com/ title=https://yandex.com/ target=_blank>懂你的搜索</a></li></ul></div><div class="mydefined animated" itemprop=custom><span></span></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="0001-01-01 00:00:00 +0000 UTC"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=19000117></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=39766></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2026-02-06 15:39:16 +0000 UTC"></div></div></div></div><div class="sidebar-card-widget back-to-top-card"><div class="back-to-top animated" role=button aria-label><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-i18n-translate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=/post/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="你永远无法说服猴子说有一个上帝存在"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="你永远无法说服猴子说有一个上帝存在"><meta itemprop=description content="总有一些人先看到未来"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Linux常用命令"><meta itemprop=description content="一、说明

记录在Linux中经常会用到的命令，持续更新。更多命令详解可参考：



    Linux Tools Quick Tutorial
    
    
    



    Linux 命令大全
    
    
    



    Bash 脚本教程
    
    
    



    SSH 教程
    
    
    


1、Shell选择与切换

在现代的 Linux 上，sh 已经被 bash 代替，/bin/sh往往是指向/bin/bash的符号链接。早期macos系统默认使用bash解释器，在macos10.15系统中官方推荐使用zsh解释器。bash和zsh均是shell的一种，由于bash或zsh本质上都是解释器，他们所共同服务的是shell语言，因此在命令语法上基本相同，zsh能基本完美兼容bash的命令，并且使用起来更加优雅。"></span><header class=post-header><h1 class=post-title itemprop="name headline">Linux常用命令</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2021-12-20 23:39:16 +00:00" itemprop="dateCreated datePublished" datetime="2021-12-20 23:39:16 +0000 UTC">2021-12-20
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E7%BC%96%E7%A8%8B/ itemprop=url rel=index><span itemprop=name>编程</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>8298</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>17分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/post/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h2 id=一说明>一、说明
<a class=header-anchor href=#%e4%b8%80%e8%af%b4%e6%98%8e></a></h2><p>记录在Linux中经常会用到的命令，持续更新。更多命令详解可参考：</p><ul><li><a href=https://linuxtools-rst.readthedocs.io/zh_CN/latest/index.html title="Linux Tools Quick Tutorial" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Linux Tools Quick Tutorial
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://www.runoob.com/linux/linux-command-manual.html title="Linux 命令大全" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Linux 命令大全
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://wangdoc.com/bash/intro.html title="Bash 脚本教程" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Bash 脚本教程
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://wangdoc.com/ssh/index.html title="SSH 教程" rel="noopener external nofollow noreferrer" target=_blank class=exturl>SSH 教程
<i class="fa fa-external-link-alt"></i></a></li></ul><h3 id=1shell选择与切换>1、Shell选择与切换
<a class=header-anchor href=#1shell%e9%80%89%e6%8b%a9%e4%b8%8e%e5%88%87%e6%8d%a2></a></h3><p>在现代的 Linux 上，sh 已经被 bash 代替，<code>/bin/sh</code>往往是指向<code>/bin/bash</code>的符号链接。早期macos系统默认使用bash解释器，在macos10.15系统中官方推荐使用zsh解释器。bash和zsh均是shell的一种，由于bash或zsh本质上都是解释器，他们所共同服务的是shell语言，因此在命令语法上基本相同，zsh能基本完美兼容bash的命令，并且使用起来更加优雅。</p><a id=more></a><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=nv>$SHELL</span>               <span class=c1># 查看当前默认shell</span>
</span></span><span class=line><span class=cl>$ cat /etc/shells          <span class=c1># 查看系统安装了哪些shell</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ chsh -s /bin/bash        <span class=c1># 切换bash,读取的配置文件：~/.bash_profile</span>
</span></span><span class=line><span class=cl>$ chsh -s /bin/zsh        <span class=c1># 切换,读取的配置文件：~/.zshrc</span></span></span></code></pre></td></tr></table></div></div><p>当从bash切换为zsh时，如果不想重新配置一遍<code>.zshrc</code>文件，可以在<code>.zshrc</code>文件中加上<code>source ~/.bash_profile</code>，从而直接从<code>.bash_profile</code>文件读取配置。</p><p>如果选择zsh，会获得如下好用的功能：</p><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>cd</span> .....                         <span class=c1># 输入n+1个点，可以往上跳转n层</span>
</span></span><span class=line><span class=cl>$ <span class=nb>kill</span> process_name        <span class=c1># 自动补全进程ID</span>
</span></span><span class=line><span class=cl>$ d                                        <span class=c1># 列出最近访问过的目录，然后选择目录前面的数字进行快速跳转</span>
</span></span><span class=line><span class=cl>$ r                                        <span class=c1># 重复执行上一条命令</span>
</span></span><span class=line><span class=cl>$ commond + tab                <span class=c1># 常用命令参数补全提醒</span></span></span></code></pre></td></tr></table></div></div><p>扩展阅读：
<a href=https://xiaozhou.net/learn-the-command-line-iterm-and-zsh-2017-06-23.html title=程序员内功系列–iTerm与Zsh篇 rel="noopener external nofollow noreferrer" target=_blank class=exturl>程序员内功系列–iTerm与Zsh篇
<i class="fa fa-external-link-alt"></i></a></p><h3 id=2特殊命令符号>2、特殊命令符号
<a class=header-anchor href=#2%e7%89%b9%e6%ae%8a%e5%91%bd%e4%bb%a4%e7%ac%a6%e5%8f%b7></a></h3><table><thead><tr><th style=text-align:left>符号</th><th style=text-align:left>格式</th><th style=text-align:left>作用</th></tr></thead><tbody><tr><td style=text-align:left>;</td><td style=text-align:left>命令1;命令2</td><td style=text-align:left>多个命令顺序执行，命令之间无任何逻辑关系</td></tr><tr><td style=text-align:left>&&</td><td style=text-align:left>命令1&&命令2</td><td style=text-align:left>逻辑与：当命令1正确执行后，命令2才会正确执行，否则命令2不会执行</td></tr><tr><td style=text-align:left>||</td><td style=text-align:left>命令1||命令2</td><td style=text-align:left>逻辑或：当命令1不正确执行后，命令2才会正确执行，否则命令2不会执行</td></tr><tr><td style=text-align:left>|</td><td style=text-align:left>命令1命令2</td><td style=text-align:left>管道符：命令1的正确输出作为命令2的操作对象</td></tr><tr><td style=text-align:left>&</td><td style=text-align:left>命令 &</td><td style=text-align:left>后台执行：把命令放在后台执行</td></tr><tr><td style=text-align:left>></td><td style=text-align:left>命令1 > file</td><td style=text-align:left>输出重定向：将命令1的结果输出到文件中，该文件原有内容会被删除</td></tr><tr><td style=text-align:left>&#187;</td><td style=text-align:left>命令1 &#187; file</td><td style=text-align:left>输出重定向：将命令1的结果附加到文件中，原文件内容不会被删除</td></tr><tr><td style=text-align:left>&lt;</td><td style=text-align:left>命令1 &lt; file</td><td style=text-align:left>输入重定向：将file作为命令1的输入</td></tr></tbody></table><p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p><ul><li>标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</li><li>标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</li><li>标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</li></ul><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 <code>/dev/null</code>,以下是常用重定向命令示例：</p><ul><li>将 stderr 重定向到 file：<code>command 2>file</code></li><li>将 stderr 追加到 file 文件末尾：<code>command 2>>file</code>。</li><li>将 stdout 和 stderr 合并后重定向到 file：<code>$ command > file 2>&amp;1</code></li><li>对 stdin 和 stdout 都重定向：<code>command &lt; file1 > file2</code></li><li>屏蔽 stdout 和 stderr：<code>command > /dev/null 2>&amp;1</code></li></ul><blockquote><p>**注意：**0 是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。这里的 <strong>2</strong> 和 <strong>></strong> 之间不可以有空格，<strong>2></strong> 是一体的时候才表示错误输出。</p></blockquote><h3 id=3bash中的特殊符号>3、Bash中的特殊符号
<a class=header-anchor href=#3bash%e4%b8%ad%e7%9a%84%e7%89%b9%e6%ae%8a%e7%ac%a6%e5%8f%b7></a></h3><table><thead><tr><th style=text-align:left>通配符</th><th style=text-align:left>作用</th></tr></thead><tbody><tr><td style=text-align:left>?</td><td style=text-align:left>匹配一个任意字符</td></tr><tr><td style=text-align:left>*</td><td style=text-align:left>匹配0个或多个任意字符，也就是可以匹配任何内容</td></tr><tr><td style=text-align:left>[]</td><td style=text-align:left>匹配括号中任意一个字符</td></tr><tr><td style=text-align:left>[-]</td><td style=text-align:left>匹配括号中任意一个字符，“-”代表范围</td></tr><tr><td style=text-align:left>[^]</td><td style=text-align:left>逻辑非，表示匹配不是括号内的一个字符</td></tr><tr><td style=text-align:left>‘’</td><td style=text-align:left>单引号，在单引号中所有的特殊符号，如“$”和“`”（反引号）都无特殊含义</td></tr><tr><td style=text-align:left>“”</td><td style=text-align:left>双引号，在双引号中特殊符号都无特殊含义， 但“$”、“`”（反引号）和“\”是例外，拥有“调用变量值”,“引用命令”和“转义符”的特殊含义</td></tr><tr><td style=text-align:left>“</td><td style=text-align:left>反引号：反引号括起来的内容是系统命令，在Bash中先会执行它和()</td></tr><tr><td style=text-align:left>$()</td><td style=text-align:left>和反引号作用相同，用来引用系统命令</td></tr><tr><td style=text-align:left>#</td><td style=text-align:left>在shell脚本中,#开头的行代表注释</td></tr><tr><td style=text-align:left>$</td><td style=text-align:left>用于调用变量的值，如需要调用变量name的值时，需要用的 <code>$name</code> 方式得到</td></tr><tr><td style=text-align:left>\</td><td style=text-align:left>转义符，跟在\之后的特殊字符将失去特殊含义，变为普通字符</td></tr></tbody></table><h2 id=二基础命令>二、基础命令
<a class=header-anchor href=#%e4%ba%8c%e5%9f%ba%e7%a1%80%e5%91%bd%e4%bb%a4></a></h2><h3 id=1查看系统基础信息>1、查看系统基础信息
<a class=header-anchor href=#1%e6%9f%a5%e7%9c%8b%e7%b3%bb%e7%bb%9f%e5%9f%ba%e7%a1%80%e4%bf%a1%e6%81%af></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.0.22        <span class=c1># 免密登录</span>
</span></span><span class=line><span class=cl>$ cat /etc/redhat-release                                   <span class=c1># 查看CentOS版本</span>
</span></span><span class=line><span class=cl>$ lshw                                                      <span class=c1># 查看硬件详细信息</span>
</span></span><span class=line><span class=cl>$ cat /proc/cpuinfo<span class=p>|</span> grep <span class=s2>&#34;cpu cores&#34;</span><span class=p>|</span> uniq  　             <span class=c1># 查看cpu核心数</span>
</span></span><span class=line><span class=cl>$ cat /proc/cpuinfo<span class=p>|</span> grep <span class=s2>&#34;physical id&#34;</span><span class=p>|</span>uniq<span class=p>|</span> wc -l         <span class=c1># 查看物理cpu个数</span>
</span></span><span class=line><span class=cl>$ cat /proc/cpuinfo <span class=p>|</span> grep <span class=s2>&#34;processor[[:space:]]:&#34;</span><span class=p>|</span> wc -l   <span class=c1># 查看逻辑cpu的个数</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ free -h 　                <span class=c1>#查看内存大小</span></span></span></code></pre></td></tr></table></div></div><h3 id=2添加用户>2、添加用户
<a class=header-anchor href=#2%e6%b7%bb%e5%8a%a0%e7%94%a8%e6%88%b7></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 添加用户 lxl80</span>
</span></span><span class=line><span class=cl>$ useradd lxl80 <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;Lixl.cn&#34;</span> <span class=p>|</span> passwd --stdin lxl80 
</span></span><span class=line><span class=cl>$ vi  /etc/sudoers
</span></span><span class=line><span class=cl><span class=c1>## Allow root to run any commands anywhere</span>
</span></span><span class=line><span class=cl>root    <span class=nv>ALL</span><span class=o>=(</span>ALL<span class=o>)</span>       ALL
</span></span><span class=line><span class=cl><span class=c1># 添加以下内容</span>
</span></span><span class=line><span class=cl>weixin  <span class=nv>ALL</span><span class=o>=(</span>ALL<span class=o>)</span> NOPASSWD: ALL
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ vim /etc/ssh/sshd_config    <span class=c1># 禁止root用户远程登录</span>
</span></span><span class=line><span class=cl>PermitRootLogin   no          <span class=c1># 生效要重启sshd进程。</span>
</span></span><span class=line><span class=cl>$ systemctl restart sshd</span></span></code></pre></td></tr></table></div></div><h3 id=3基础设置>3、基础设置
<a class=header-anchor href=#3%e5%9f%ba%e7%a1%80%e8%ae%be%e7%bd%ae></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ yum install -y wget               <span class=c1># 安装wget</span>
</span></span><span class=line><span class=cl><span class=c1># 修改yum源</span>
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> /etc/yum.repos.d 
</span></span><span class=line><span class=cl>$ mv CentOS-Base.repo CentOS-Base.repo.bak
</span></span><span class=line><span class=cl>$ wget -O ./CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
</span></span><span class=line><span class=cl>$ yum clean all
</span></span><span class=line><span class=cl>$ yum makecache
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ yum update                        <span class=c1># 升级系统及相关软件</span>
</span></span><span class=line><span class=cl><span class=c1># 安装必备软件</span>
</span></span><span class=line><span class=cl>$ yum install net-tools -y          <span class=c1># 安装常用网络工具</span>
</span></span><span class=line><span class=cl>$ yum install bash-completion -y    <span class=c1># 命令自动补全    </span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> -e <span class=s1>&#39;set completion-ignore-case on&#39;</span> &gt;&gt; ~/.inputrc <span class=o>&amp;&amp;</span> <span class=nb>bind</span> -f  ~/.inputrc     <span class=c1># 命令补全忽略大小写</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ yum install ntp                   <span class=c1># 与NTP服务器进行的同步</span>
</span></span><span class=line><span class=cl>$ systemctl start ntpd
</span></span><span class=line><span class=cl>$ systemctl <span class=nb>enable</span> ntpd
</span></span><span class=line><span class=cl>$ ntpdate -u  cn.ntp.org.cn         <span class=c1># 同步时间</span>
</span></span><span class=line><span class=cl>$ date                              <span class=c1># 检查时间</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ yum -y install crontab            <span class=c1># 安装crontab</span>
</span></span><span class=line><span class=cl>$ crontab -e                        <span class=c1># 创建crontab任务</span>
</span></span><span class=line><span class=cl><span class=c1># 每天2点同步一次，先通过 which ntpdate 查找命令所在路径</span>
</span></span><span class=line><span class=cl>$ * <span class=m>2</span> * * * /sbin/ntpdate cn.ntp.org.cn &gt; /dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span>   
</span></span><span class=line><span class=cl>$ service crond reload              <span class=c1># 重启crontab</span></span></span></code></pre></td></tr></table></div></div><h3 id=4磁盘管理>4、磁盘管理
<a class=header-anchor href=#4%e7%a3%81%e7%9b%98%e7%ae%a1%e7%90%86></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 以易读的方式查看磁盘占用情况</span>
</span></span><span class=line><span class=cl>$ df -Th
</span></span><span class=line><span class=cl>$ lsblk 　　               <span class=c1># 查看分区和磁盘,列出所有可用块设备的信息</span>
</span></span><span class=line><span class=cl>$ fdisk -l                <span class=c1># 分区工具查看分区信息，查看所有被系统识别的磁盘</span>
</span></span><span class=line><span class=cl>$ fdisk /dev/sdb  　　     <span class=c1># 分区操作,n,p, , ,w</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 格式化sdb1分区，挂载到/home/weixin，并开机启动自动挂载</span>
</span></span><span class=line><span class=cl>$ mkfs -t ext4 /dev/sdb1 <span class=o>&amp;&amp;</span> mkdir /weixin <span class=o>&amp;&amp;</span> mount /dev/sdb1 /weixin <span class=o>&amp;&amp;</span> <span class=nb>echo</span> /dev/sdb1 /weixin ext4 defaults <span class=m>0</span> <span class=m>0</span> &gt;&gt; /etc/fstab
</span></span><span class=line><span class=cl>$ chmod <span class=m>700</span> /weixin <span class=o>&amp;&amp;</span> chown weixin:weixin /weixin        <span class=c1># 更改目录权限及归属</span>
</span></span><span class=line><span class=cl>$ resize2fs /dev/sdb      <span class=c1># 扩展ext*磁盘分区文件系统的大小</span>
</span></span><span class=line><span class=cl>$ xfs_growfs /dev/sdb     <span class=c1># 扩展xfs磁盘分区文件系统的大小</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ du -sh *                <span class=c1># 以易读的方式查看当前目录空间占用总计</span>
</span></span><span class=line><span class=cl>$ du -h --max-depth<span class=o>=</span><span class=m>1</span>     <span class=c1># 查看哪个文件夹或文件占用磁盘最多</span>
</span></span><span class=line><span class=cl>$ du -ch *.tar.gz         <span class=c1># 查看当前文件夹下所有后缀是 tar.gz 的文件的磁盘使用量总和 -c</span></span></span></code></pre></td></tr></table></div></div><h3 id=5查看网络情况>5、查看网络情况
<a class=header-anchor href=#5%e6%9f%a5%e7%9c%8b%e7%bd%91%e7%bb%9c%e6%83%85%e5%86%b5></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ semanage port -l<span class=p>|</span>grep ssh                      <span class=c1># 查看 SELinux 开放给 ssh 使用的端口</span>
</span></span><span class=line><span class=cl>$ semanage port -a -t ssh_port_t -p tcp <span class=m>12022</span>    <span class=c1># 为 ssh 添加允许使用的端口12022</span>
</span></span><span class=line><span class=cl>$ vi /etc/ssh/sshd_config                               <span class=c1># 查看/修改 ssh 使用的端口</span>
</span></span><span class=line><span class=cl>$ vi /etc/hosts.allow                            <span class=c1># 如果ssh无法链接</span>
</span></span><span class=line><span class=cl>sshd: ALL            <span class=c1>##允许所有ip主机均能连接本机</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看当前网络连接情况</span>
</span></span><span class=line><span class=cl>$ netstat -ant<span class=p>|</span>awk <span class=s1>&#39;/^tcp/ {++S[$NF]} END {for(a in S) print (a,S[a])}&#39;</span>  
</span></span><span class=line><span class=cl>$ netstat -anlp <span class=p>|</span> grep <span class=m>1230</span>                  <span class=c1># 查看端口监听</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ systemctl status firewalld                 <span class=c1># 查看防火墙状态</span>
</span></span><span class=line><span class=cl>$ systemctl stop firewalld.service           <span class=c1># 停止防火墙</span>
</span></span><span class=line><span class=cl>$ systemctl disable firewalld.service        <span class=c1># 禁止防火墙开机启动</span>
</span></span><span class=line><span class=cl>$ firewall-cmd --zone<span class=o>=</span>public --permanent --add-port<span class=o>=</span>端口号/tcp    <span class=c1># 新增开放端口</span>
</span></span><span class=line><span class=cl>$ firewall-cmd --zone<span class=o>=</span>public --permanent --remove-port<span class=o>=</span>端口号/tcp <span class=c1># 移除开放端口</span>
</span></span><span class=line><span class=cl>$ firewall-cmd --zone<span class=o>=</span>public --list-ports    <span class=c1># 查看开放端口</span>
</span></span><span class=line><span class=cl>$ firewall-cmd --reload                                   <span class=c1># 刷新防火墙</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ nc -lv <span class=m>19301</span>                          <span class=c1># 监听本机19301端口</span>
</span></span><span class=line><span class=cl>$ nc 192.168.0.18 <span class=m>19301</span>                 <span class=c1># 连接特定端口</span>
</span></span><span class=line><span class=cl>$ telnet 192.168.0.18 <span class=m>19301</span>                     <span class=c1># 尝试连接19302端口，ctrl+],q退出</span></span></span></code></pre></td></tr></table></div></div><h3 id=6上传下载文件>6、上传下载文件
<a class=header-anchor href=#6%e4%b8%8a%e4%bc%a0%e4%b8%8b%e8%bd%bd%e6%96%87%e4%bb%b6></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 通过 sftp 上传下载文件</span>
</span></span><span class=line><span class=cl>$ sftp  -i ~/Downloads/newszxl.pem root@106.15.89.34     <span class=c1># 连接服务器</span>
</span></span><span class=line><span class=cl>$ get /data/chainmaker/log/*  .                    <span class=c1># 把log下所有日志下载到本地当前目录</span>
</span></span><span class=line><span class=cl>$ put crypto-config.zip /data/app/chainmaker/      <span class=c1># 把节点证书上传版到服务器</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 通过 scp 远程传输文件</span>
</span></span><span class=line><span class=cl>$ scp -rp /data/ root@192.168.1.3:/data/
</span></span><span class=line><span class=cl>$ scp -rp root@192.168.1.3:/data/ /data/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 通过 rsync 传输/同步文件,排除/data/dir1/目录下的所有文件，不排除dir1目录</span>
</span></span><span class=line><span class=cl>$ sudo yum install -y rsync
</span></span><span class=line><span class=cl>$ rsync -av --exclude<span class=o>={</span><span class=s1>&#39;.*&#39;</span>,<span class=s1>&#39;dir1/*&#39;</span><span class=o>}</span> /data/ root@192.168.1.3:/data/</span></span></code></pre></td></tr></table></div></div><h3 id=7清除history>7、清除history
<a class=header-anchor href=#7%e6%b8%85%e9%99%a4history></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>history</span> -c                      <span class=c1># 清除所有历史记录</span>
</span></span><span class=line><span class=cl>$ vim ~/.bash_history                       <span class=c1># 按需修改</span>
</span></span><span class=line><span class=cl>$ <span class=nb>history</span> -r                      <span class=c1># 重置文件里的内容到内存中，缓存修改</span></span></span></code></pre></td></tr></table></div></div><h3 id=8窗口管理>8、窗口管理
<a class=header-anchor href=#8%e7%aa%97%e5%8f%a3%e7%ae%a1%e7%90%86></a></h3><p><a href=https://tmux.github.io/ title=tmux rel="noopener external nofollow noreferrer" target=_blank class=exturl>tmux
<i class="fa fa-external-link-alt"></i>
</a>是一个终端复用器，可以激活多个终端或窗口，每一个终端都可以访问、运行和控制各自的程序。tmux类似于screen，可以关闭窗口将程序放在后台运行，需要的时候再重新连接。常用快捷键如下：</p><ul><li><code>Ctrl+b %</code>：划分左右两个窗格。</li><li><code>Ctrl+b "</code>：划分上下两个窗格。</li><li><code>Ctrl+b &lt;方向键></code>：光标切换到其他窗格。</li><li><code>Ctrl+b x</code>：关闭当前窗格。</li><li><code>Ctrl+b z</code>：当前窗格全屏显示，再使用一次会变回原来大小。</li><li><code>Ctrl+b Ctrl+&lt;方向键></code>：按箭头方向调整窗格大小。</li></ul><h3 id=9后台执行>9、后台执行
<a class=header-anchor href=#9%e5%90%8e%e5%8f%b0%e6%89%a7%e8%a1%8c></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5>5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ command &amp;     # 命令末尾添加＆符号在后台运行
</span></span><span class=line><span class=cl>$ command &gt; /dev/null 2&gt;&amp;1 &amp;   # 将stdout重定向到/dev/null，将stderr重定向到stdout
</span></span><span class=line><span class=cl>ctrl + z        # 将一个正在前台执行的命令放到后台，并且处于暂停状态。
</span></span><span class=line><span class=cl>$ bg            # 将一个在后台暂停的命令继续执行。用bg %jobnumber 恢复运行
</span></span><span class=line><span class=cl>$ fg            # 将后台任务切换到前台执行
</span></span><span class=line><span class=cl>$ jobs -l       # 显示当前shell会话中所有已停止和后台进程的状态</span></span></code></pre></td></tr></table></div></div><h2 id=三性能测试>三、性能测试
<a class=header-anchor href=#%e4%b8%89%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95></a></h2><h3 id=1磁盘测试>1、磁盘测试
<a class=header-anchor href=#1%e7%a3%81%e7%9b%98%e6%b5%8b%e8%af%95></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 使用dd磁盘IO简易性能测试</span>
</span></span><span class=line><span class=cl>$ dd <span class=k>if</span><span class=o>=</span>/dev/zero <span class=nv>of</span><span class=o>=</span>iotestr <span class=nv>bs</span><span class=o>=</span>1024k <span class=nv>count</span><span class=o>=</span>8k <span class=nv>conv</span><span class=o>=</span>fsync   <span class=c1># 测试写性能</span>
</span></span><span class=line><span class=cl>$ dd <span class=k>if</span><span class=o>=</span>/dev/sda <span class=nv>of</span><span class=o>=</span>/dev/null <span class=nv>bs</span><span class=o>=</span>8k <span class=nv>count</span><span class=o>=</span>1024k  <span class=c1># 测试读性能</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用fio进行磁盘专业性能测试</span>
</span></span><span class=line><span class=cl>$ yum install fio -y
</span></span><span class=line><span class=cl><span class=c1># 测试随机写IOPS：</span>
</span></span><span class=line><span class=cl>$ fio -direct<span class=o>=</span><span class=m>1</span> -iodepth<span class=o>=</span><span class=m>64</span> -rw<span class=o>=</span>randwrite -ioengine<span class=o>=</span>libaio -bs<span class=o>=</span>4k -size<span class=o>=</span>8G -numjobs<span class=o>=</span><span class=m>1</span> -runtime<span class=o>=</span><span class=m>60</span> -group_reporting -filename<span class=o>=</span>iotest -name<span class=o>=</span>Rand_Write_IOPS_Test
</span></span><span class=line><span class=cl><span class=c1># 测试随机读IOPS：</span>
</span></span><span class=line><span class=cl>$ fio -direct<span class=o>=</span><span class=m>1</span> -iodepth<span class=o>=</span><span class=m>64</span> -rw<span class=o>=</span>randread -ioengine<span class=o>=</span>libaio -bs<span class=o>=</span>4k -size<span class=o>=</span>8G -numjobs<span class=o>=</span><span class=m>1</span> -runtime<span class=o>=</span><span class=m>60</span> -group_reporting -filename<span class=o>=</span>iotest -name<span class=o>=</span>Rand_Read_IOPS_Test
</span></span><span class=line><span class=cl><span class=c1># 测试写吞吐量：</span>
</span></span><span class=line><span class=cl>$ fio -direct<span class=o>=</span><span class=m>1</span> -iodepth<span class=o>=</span><span class=m>32</span> -rw<span class=o>=</span>write -ioengine<span class=o>=</span>libaio -bs<span class=o>=</span>1024k -size<span class=o>=</span>8G -numjobs<span class=o>=</span><span class=m>1</span> -runtime<span class=o>=</span><span class=m>60</span> -group_reporting -filename<span class=o>=</span>iotest -name<span class=o>=</span>Write_BandWidth_Test
</span></span><span class=line><span class=cl><span class=c1># 测试读吞吐量：</span>
</span></span><span class=line><span class=cl>$ fio -direct<span class=o>=</span><span class=m>1</span> -iodepth<span class=o>=</span><span class=m>32</span> -rw<span class=o>=</span><span class=nb>read</span> -ioengine<span class=o>=</span>libaio -bs<span class=o>=</span>1024k -size<span class=o>=</span>8G -numjobs<span class=o>=</span><span class=m>1</span> -runtime<span class=o>=</span><span class=m>60</span> -group_reporting -filename<span class=o>=</span>iotest -name<span class=o>=</span>Read_BandWidth_Test</span></span></code></pre></td></tr></table></div></div><p>延伸阅读：
<a href="https://cloud.tencent.com/developer/article/1836176?from=15425" title=磁盘性能压测—FIO rel="noopener external nofollow noreferrer" target=_blank class=exturl>磁盘性能压测—FIO
<i class="fa fa-external-link-alt"></i></a></p><h3 id=2网络测试>2、网络测试
<a class=header-anchor href=#2%e7%bd%91%e7%bb%9c%e6%b5%8b%e8%af%95></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 网络测试（需要在需要测试的服务器上分别安装iperf）</span>
</span></span><span class=line><span class=cl>$ wget https://iperf.fr/download/source/iperf-3.1.3-source.tar.gz
</span></span><span class=line><span class=cl>$ tar zxvf iperf-3.1.3-source.tar.gz
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> iperf-3.1.3
</span></span><span class=line><span class=cl>$ ./configure
</span></span><span class=line><span class=cl>$ make 
</span></span><span class=line><span class=cl>$ make install
</span></span><span class=line><span class=cl><span class=c1># 服务器端测试命令，后台运行</span>
</span></span><span class=line><span class=cl>$ iperf3 -s -D -i <span class=m>10</span> -p <span class=m>19302</span> --logfile /data/iperf.log
</span></span><span class=line><span class=cl><span class=c1># 客户端测试命令，运行60秒,加参数R代表ServerToClient模式</span>
</span></span><span class=line><span class=cl>$ iperf3 -c 192.168.0.18 -t <span class=m>60</span> -f M -P <span class=m>1</span> -p <span class=m>19302</span> --get-server-output
</span></span><span class=line><span class=cl>$ iperf3 -c 192.168.0.18 -t <span class=m>60</span> -f M -P <span class=m>1</span> -R -p <span class=m>19302</span> --get-server-output</span></span></code></pre></td></tr></table></div></div><p>延伸阅读：
<a href=https://docs.azure.cn/zh-cn/articles/azure-operations-guide/virtual-network/aog-virtual-network-iperf-bandwidth-test title="使用 iPerf 进行网络带宽测试" rel="noopener external nofollow noreferrer" target=_blank class=exturl>使用 iPerf 进行网络带宽测试
<i class="fa fa-external-link-alt"></i>
</a>，
<a href=https://www.tuicool.com/articles/emINv2v title="使用 MTR 诊断网络问题" rel="noopener external nofollow noreferrer" target=_blank class=exturl>使用 MTR 诊断网络问题
<i class="fa fa-external-link-alt"></i></a></p><h2 id=四系统监控>四、系统监控
<a class=header-anchor href=#%e5%9b%9b%e7%b3%bb%e7%bb%9f%e7%9b%91%e6%8e%a7></a></h2><h3 id=1dstat>1、dstat
<a class=header-anchor href=#1dstat></a></h3><p>dstat 是一个可以取代vmstat，iostat，netstat和ifstat这些命令的多功能产品。使用dstat命令可以查看当前cpu，磁盘，网络，内存页和系统的一些当前状态指标。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ yum install -y dstat
</span></span><span class=line><span class=cl>$ dstat 5     # 5秒统计一次</span></span></code></pre></td></tr></table></div></div><p>1、 –total-cpu-usage—- CPU使用率</p><p>usr：用户空间的程序所占百分比；</p><p>sys：系统空间程序所占百分比；</p><p>idel：空闲百分比；</p><p>wai：等待磁盘I/O所消耗的百分比；</p><p>hiq：硬中断次数；</p><p>siq：软中断次数；</p><hr><p>2、-dsk/total-磁盘统计</p><p>read：读总数</p><p>writ：写总数</p><hr><p>3、-net/total- 网络统计</p><p>recv：网络收包总数</p><p>send：网络发包总数</p><hr><p>4、—paging– 内存分页统计</p><p>in： pagein（换入）</p><p>out：page out（换出）</p><p>注：系统的分页活动。分页指的是一种内存管理技术用于查找系统场景，一个较大的分页表明系统正在使用大量的交换空间，通常情况下当系统已经开始用交换空间的时候，就说明你的内存已经不够用了，或者说内存非常分散，理想情况下page in（换入）和page out（换出）的值是0 0。</p><hr><p>5、–system–系统信息</p><p>int：中断次数</p><p>csw：上下文切换</p><p>注：中断（int）和上下文切换（csw）。这项统计仅在有比较基线时才有意义。这一栏中较高的统计值通常表示大量的进程造成拥塞，需要对CPU进行关注。你的服务器一般情况下都会运行运行一些程序，所以这项总是显示一些数值。</p><h3 id=2vmstat>2、vmstat
<a class=header-anchor href=#2vmstat></a></h3><p>vmstat是Virtual Meomory Statistics（虚拟内存统计）的缩写，可实时动态监视操作系统的虚拟内存、进程、CPU活动。</p><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ vmstat -S m -t <span class=m>3</span>     <span class=c1># 3秒刷新一次，以M为单位</span></span></span></code></pre></td></tr></table></div></div><ul><li>r 表示运行队列,当这个值超过了CPU数目，就会出现CPU瓶颈了。</li><li>b 正在等待资源的阻塞内核线程数，大于3表示io性能不好</li><li>bi: 每秒读取的块数</li><li>bo: 每秒写入的块数</li><li>us: 用户进程执行时间(user time)</li><li>sy: 系统进程执行时间(system time)</li><li>id: 空闲时间(包括IO等待时间)</li><li>wa: IO等待所占用的CPU时间的百分比，高过30%时IO压力高。</li></ul><h3 id=3top>3、top
<a class=header-anchor href=#3top></a></h3><p>top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况。提供了实时的对系统处理器的状态监视。它将显示系统中CPU最“敏感”的任务列表。该命令可以按CPU使用、内存使用和执行时间对任务进行排序；而且该命令的很多特性都可以通过交互式命令或者在个人定制文件中进行设定。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ top -s # 在安全模式运行top</span></span></code></pre></td></tr></table></div></div><ul><li>Cpu(s) %id：空闲CPU时间百分比</li><li>Cpu(s) %wa：等待I/O的CPU时间百分比</li><li>VIRT：进程占用的虚拟内存，详情可参考:
<a href=https://www.cnblogs.com/bravery/archive/2012/06/27/2560611.html title=观察进程的内存占用情况 rel="noopener external nofollow noreferrer" target=_blank class=exturl>观察进程的内存占用情况
<i class="fa fa-external-link-alt"></i></a></li><li>RES：进程占用的物理内存</li><li>SHR：进程使用的共享内存</li><li>i 只显示正在运行的进程</li><li>e 切换内存单位，切换顺序为： k,m,g,t,p</li><li>k 杀掉某进程</li><li>o: COMMAND=chain 过滤进程，只显示启动命令带chain的进程</li></ul><h3 id=4sysstat>4、sysstat
<a class=header-anchor href=#4sysstat></a></h3><p>一个非常方便的工具，它带有众多的系统资源监控工具，用于监控系统的性能和使用情况。我们在日常使用的工具中有相当一部分是来自sysstat工具包的。同时，它还提供了一种使用cron表达式来制定性能和活动数据的收集计划。以下是包含在sysstat包中的工具：</p><ul><li><a href=http://linux.cn/article-4024-1.html title=iostat rel="noopener external nofollow noreferrer" target=_blank class=exturl><strong>iostat</strong>
<i class="fa fa-external-link-alt"></i>
</a>: 输出CPU的统计信息和所有I/O设备的输入输出（I/O）统计信息。</li><li><strong>mpstat</strong>: 关于CPU的详细信息（单独输出或者分组输出）。</li><li><strong>pidstat</strong>: 关于运行中的进程/任务、CPU、内存等的统计信息。</li><li><strong>sar</strong>: 保存并输出不同系统资源（CPU、内存、IO、网络、内核等）的详细信息。</li><li><strong>sadc</strong>: 系统活动数据收集器，用于收集sar工具的后端数据。</li><li><strong>sa1</strong>: 系统收集并存储sadc数据文件的二进制数据，与sadc工具配合使用</li><li><strong>sa2</strong>: 配合sar工具使用，产生每日的摘要报告。</li><li><strong>sadf</strong>: 用于以不同的数据格式（CVS或者XML）来格式化sar工具的输出。</li><li><strong>Sysstat</strong>: sysstat工具的man帮助页面。</li><li><strong>nfsiostat</strong>: NFS（Network File System）的I/O统计信息。</li><li><strong>cifsiostat</strong>: CIFS(Common Internet File System)的统计信息。</li></ul><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ yum install sysstat -y                         <span class=c1># 安装</span>
</span></span><span class=line><span class=cl>$ iostat <span class=m>2</span> -mxt                                  <span class=c1># 监测IO，2秒刷新一次，以M为单位</span>
</span></span><span class=line><span class=cl>$ pidstat -u <span class=m>1</span> <span class=m>10</span>                                <span class=c1># 监测进程，1秒刷新一次</span></span></span></code></pre></td></tr></table></div></div><ul><li>%user：CPU处在用户模式下的时间百分比。</li><li>%nice：CPU处在带NICE值的用户模式下的时间百分比。</li><li>%system：CPU处在系统模式下的时间百分比。</li><li>%iowait：CPU等待输入输出完成时间的百分比。</li><li>%steal：管理程序维护另一个虚拟处理器时，虚拟CPU的无意识等待时间百分比。</li><li>%idle：CPU空闲时间百分比。</li><li>r/s: 每秒完成的读 I/O 设备次数。即 rio/s</li><li>w/s: 每秒完成的写 I/O 设备次数。即 wio/s</li><li>rMB/s: 每秒读M字节数。</li><li>wMB/s: 每秒写K字节数。</li><li>rrqm/s: 每秒进行 merge 的读操作数目。即 rmerge/s</li><li>wrqm/s: 每秒进行 merge 的写操作数目。即 wmerge/s</li><li>avgrq-sz：平均每次设备I/O操作的数据大小，类似于平均每人所买的东西多少</li><li>avgqu-sz：平均I/O队列长度，类似于单位时间里平均排队人数，如果值比较大，表示有大量io在等待。</li><li>await: 平均每次设备I/O操作的等待时间 (毫秒)，类似于平均每人的等待时间，如果远大于svctm说明IO响应太慢。</li><li>r_await：平均每次读请求的等待时间(毫秒)。这包括请求在队列中和执行它们所花费的时间。</li><li>w_await：平均每次写请求的等待时间(毫秒)。这包括请求在队列中和执行它们所花费的时间。</li><li>aqu-sz：发送到设备的请求的平均队列长度。</li></ul><blockquote><p>如果 %util 接近 100%，说明产生的I/O请求太多，I/O系统已经满负荷，该磁盘可能存在瓶颈，同时可以结合vmstat 查看b参数和wa参数。</p><p>另外 await 的参数也要和 svctm 参考比较。差的过高就一定有 IO 的问题。svctm 一般要小于 await (因为同时等待的请求的等待时间被重复计算了)，svctm 的大小一般和磁盘性能有关，CPU/内存的负荷也会对其有影响，请求过多也会间接导致 svctm 的增加。await 的大小一般取决于服务时间(svctm) 以及 I/O 队列的长度和 I/O 请求的发出模式。如果 svctm 比较接近 await，说明 I/O 几乎没有等待时间；如果 await 远大于 svctm，说明 I/O 队列太长，应用得到的响应时间变慢。</p><p>队列长度(avgqu-sz)也可作为衡量系统 I/O 负荷的指标，但由于 avgqu-sz 是按照单位时间的平均值，所以不能反映瞬间的 I/O 洪水。</p><p>更详细的信息，可参考：
<a href=https://bean-li.github.io/dive-into-iostat/ title=深入理解iostat rel="noopener external nofollow noreferrer" target=_blank class=exturl>深入理解iostat
<i class="fa fa-external-link-alt"></i></a></p></blockquote><h3 id=5iotop>5、iotop
<a class=header-anchor href=#5iotop></a></h3><p><code>iotop</code> 是一个类似 <code>top</code> 的工具，用来显示实时的磁盘活动。监控 Linux 内核输出的 I/O 使用信息，并且显示一个系统中进程或线程的当前 I/O 使用情况。它显示每个进程/线程读写 I/O 带宽。它同样显示当等待换入和等待 I/O 的线程/进程花费的时间的百分比。</p><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ yum install iotop
</span></span><span class=line><span class=cl>$ iotop -o   <span class=c1># 仅显示正在占用I/O的进程或者线程，可以随时按o切换</span>
</span></span><span class=line><span class=cl>$ iotop -oP   <span class=c1># 按进程显示</span></span></span></code></pre></td></tr></table></div></div><ul><li><p><code>IO</code>：它显示每个进程的 I/O 利用率，包含磁盘和交换。</p></li><li><p><code>SWAPIN</code>： 它只显示每个进程的交换使用率。</p><p>更多信息可参考：https://cleanli.github.io/cleanhome/posts/2021-01-05/Iotop_usage.html</p></li></ul><h2 id=五性能调优>五、性能调优
<a class=header-anchor href=#%e4%ba%94%e6%80%a7%e8%83%bd%e8%b0%83%e4%bc%98></a></h2><h3 id=1分析进程调用>1、分析进程调用
<a class=header-anchor href=#1%e5%88%86%e6%9e%90%e8%bf%9b%e7%a8%8b%e8%b0%83%e7%94%a8></a></h3><p>pstack用来跟踪进程栈，如果发现一个服务一直处于work状态（如假死），可以多执行几次pstack，若发现代码栈总是停在同一个位置，很可能就是出问题的地方：</p><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ yum install gdb -y
</span></span><span class=line><span class=cl>$ pstack pid  <span class=c1># 获取进程栈</span></span></span></code></pre></td></tr></table></div></div><p>strace能够动态的跟踪进程执行时的系统调用和所接收的信号：</p><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ yum install -y strace
</span></span><span class=line><span class=cl>$ strace -ttTv o ~/straceout.txt -p <span class=m>21120</span> <span class=c1># 查看进程20020的系统调用情况</span></span></span></code></pre></td></tr></table></div></div><h3 id=2内核参数优化>2、内核参数优化
<a class=header-anchor href=#2%e5%86%85%e6%a0%b8%e5%8f%82%e6%95%b0%e4%bc%98%e5%8c%96></a></h3><p>对于服务器来说，file-max和ulimit都需要设置，否则会出现文件描述符耗尽的问题。否则会碰到”Too many open files”或者Socket/File: Can’t open so many files等错误。</p><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查看用户进程级的能够打开文件句柄的数量，Centos7默认是1024。</span>
</span></span><span class=line><span class=cl>$ <span class=nb>ulimit</span> -a 
</span></span><span class=line><span class=cl><span class=c1># 查看系统级别的能够打开的文件句柄的数量，Centos7默认是794168</span>
</span></span><span class=line><span class=cl>$ cat /proc/sys/fs/file-max
</span></span><span class=line><span class=cl><span class=c1># 永久生效的修改方法，文件末尾加入配置内容：</span>
</span></span><span class=line><span class=cl>$ vim /etc/sysctl.conf
</span></span><span class=line><span class=cl>fs.file-max <span class=o>=</span> <span class=m>2000000</span>
</span></span><span class=line><span class=cl><span class=c1># 然后执行命令，使修改配置立即生效：</span>
</span></span><span class=line><span class=cl>$ sysctl -p
</span></span><span class=line><span class=cl><span class=c1># 查看当前shell的当前用户的打开的最大限制</span>
</span></span><span class=line><span class=cl>$ <span class=nb>ulimit</span> -n
</span></span><span class=line><span class=cl><span class=c1># 修改一个用户的所有shell能打开的最大数，文件末尾加入配置内容：</span>
</span></span><span class=line><span class=cl>$ vim /etc/security/limits.conf
</span></span><span class=line><span class=cl>* soft nofile <span class=m>65535</span>
</span></span><span class=line><span class=cl>* hard nofile <span class=m>65535</span>
</span></span><span class=line><span class=cl><span class=c1># 修改以后，需要重新登录才能生效。如果需要设置当前用户session立即生效，还需要执行：</span>
</span></span><span class=line><span class=cl>$ <span class=nb>ulimit</span> -n <span class=m>65535</span> </span></span></code></pre></td></tr></table></div></div><h2 id=六文本处理>六、文本处理
<a class=header-anchor href=#%e5%85%ad%e6%96%87%e6%9c%ac%e5%a4%84%e7%90%86></a></h2><h3 id=1vim常用命令>1、Vim常用命令
<a class=header-anchor href=#1vim%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16>16</a>
</span><span class=lnt id=hl-20-17><a class=lnlinks href=#hl-20-17>17</a>
</span><span class=lnt id=hl-20-18><a class=lnlinks href=#hl-20-18>18</a>
</span><span class=lnt id=hl-20-19><a class=lnlinks href=#hl-20-19>19</a>
</span><span class=lnt id=hl-20-20><a class=lnlinks href=#hl-20-20>20</a>
</span><span class=lnt id=hl-20-21><a class=lnlinks href=#hl-20-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ vi +/pattern filename   <span class=c1># 打幵文件，并将光标置于第一个与pattern匹配的位置</span>
</span></span><span class=line><span class=cl><span class=c1># u 撤销刚才执行的命令</span>
</span></span><span class=line><span class=cl><span class=c1># I 在光标所在行的行首插入随后输入的文本，相当于光标移动到行首执行 i 命令</span>
</span></span><span class=line><span class=cl><span class=c1># o/O 在光标所在行的下面/上面插入新的一行。光标停在空行首，等待输入文本</span>
</span></span><span class=line><span class=cl><span class=c1># /abc ?abc 从光标所在位置向前/向后查找字符串 abc，如搜索空格加转义符\</span>
</span></span><span class=line><span class=cl><span class=c1># ?abc    从光标所在为主向后查找字符串 abc</span>
</span></span><span class=line><span class=cl><span class=c1># /^abc /abc$    查找以 abc 为行首/为行尾的行</span>
</span></span><span class=line><span class=cl><span class=c1># n  N    向同一/相反方向重复上次的查找指令</span>
</span></span><span class=line><span class=cl><span class=c1># gg 跳转到第一行，G 跳转到最后一行</span>
</span></span><span class=line><span class=cl><span class=c1># :s/a1/a2/g    将当前光标所在行中的所有 a1 用 a2 替换</span>
</span></span><span class=line><span class=cl><span class=c1># :n1,n2 s/a1/a2/g    将文件中 n1 到 n2 行中所有 a1 都用 a2 替换</span>
</span></span><span class=line><span class=cl><span class=c1># :%s/a1/a2/g    将文件中所有的 a1 都用 a2 替换</span>
</span></span><span class=line><span class=cl><span class=c1># x    删除光标所在位置的字符(放入剪贴板)</span>
</span></span><span class=line><span class=cl><span class=c1># ndd    删除当前行（包括此行）后 n 行文本(放入剪贴板)</span>
</span></span><span class=line><span class=cl><span class=c1># dG    删除光标所在行一直到文件末尾的所有内容(放入剪贴板)</span>
</span></span><span class=line><span class=cl><span class=c1># D    删除光标位置到行尾的内容(放入剪贴板)</span>
</span></span><span class=line><span class=cl><span class=c1># p(P)    将剪贴板中的内容粘贴到光标后(光标后)</span>
</span></span><span class=line><span class=cl><span class=c1># 列编辑模式</span>
</span></span><span class=line><span class=cl>$ ctrl + v   <span class=c1># 进入列编辑模式,然后通过光标移动选择要编辑的块</span>
</span></span><span class=line><span class=cl>$ <span class=nb>shift</span> + i/a        <span class=c1># 在光标前/后插入，ESC自动补全</span>
</span></span><span class=line><span class=cl>$ <span class=nb>shift</span> + c   <span class=c1># 修改内容，ESC自动补全</span></span></span></code></pre></td></tr></table></div></div><h3 id=2文本处理>2、文本处理
<a class=header-anchor href=#2%e6%96%87%e6%9c%ac%e5%a4%84%e7%90%86></a></h3><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span><span class=lnt id=hl-21-13><a class=lnlinks href=#hl-21-13>13</a>
</span><span class=lnt id=hl-21-14><a class=lnlinks href=#hl-21-14>14</a>
</span><span class=lnt id=hl-21-15><a class=lnlinks href=#hl-21-15>15</a>
</span><span class=lnt id=hl-21-16><a class=lnlinks href=#hl-21-16>16</a>
</span><span class=lnt id=hl-21-17><a class=lnlinks href=#hl-21-17>17</a>
</span><span class=lnt id=hl-21-18><a class=lnlinks href=#hl-21-18>18</a>
</span><span class=lnt id=hl-21-19><a class=lnlinks href=#hl-21-19>19</a>
</span><span class=lnt id=hl-21-20><a class=lnlinks href=#hl-21-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ grep <span class=s2>&#34;put block&#34;</span> logs -R -n               <span class=c1># 在多级目录中对文本递归搜索</span>
</span></span><span class=line><span class=cl>$ grep -e <span class=s2>&#34;ERROR&#34;</span> -e <span class=s2>&#34;put block&#34;</span> file <span class=c1># 匹配多个模式</span>
</span></span><span class=line><span class=cl>$ cat LOG.* <span class=p>|</span> tr a-z A-Z <span class=p>|</span> grep <span class=s2>&#34;FROM &#34;</span> <span class=p>|</span> grep <span class=s2>&#34;WHERE&#34;</span> &gt; b    <span class=c1># 将日志中的所有带where条件的sql查找查找出来</span>
</span></span><span class=line><span class=cl>$ sort unsort.txt <span class=p>|</span> uniq                             <span class=c1># 消除重复行</span>
</span></span><span class=line><span class=cl>$ sort unsort.txt <span class=p>|</span> uniq -c                        <span class=c1># 统计各行在文件中出现的次数</span>
</span></span><span class=line><span class=cl>$ sort unsort.txt <span class=p>|</span> uniq -d                        <span class=c1># 找出重复行</span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=m>12345</span> <span class=p>|</span> tr <span class=s1>&#39;0-9&#39;</span> <span class=s1>&#39;9876543210&#39;</span>     <span class=c1># 加解密转换，替换对应字符</span>
</span></span><span class=line><span class=cl>$ cat text<span class=p>|</span> tr <span class=s1>&#39;\t&#39;</span> <span class=s1>&#39; &#39;</span>                           <span class=c1># 制表符转空格</span>
</span></span><span class=line><span class=cl>$ cat file <span class=p>|</span> tr -d <span class=s1>&#39;0-9&#39;</span>                          <span class=c1># 删除所有数字</span>
</span></span><span class=line><span class=cl>$ cat file <span class=p>|</span> tr -c <span class=s1>&#39;0-9&#39;</span>                             <span class=c1># 获取文件中所有数字</span>
</span></span><span class=line><span class=cl>$ cat file <span class=p>|</span> tr -d -c <span class=s1>&#39;0-9 \n&#39;</span>                 <span class=c1># 删除非数字数据</span>
</span></span><span class=line><span class=cl>$ cut -f2,4 filename                                    <span class=c1># 截取文件的第2列和第4列</span>
</span></span><span class=line><span class=cl>$ paste file1 file2    -d <span class=s2>&#34;,&#34;</span>                        <span class=c1># 将两个文本按列拼接到一起,用,分割</span>
</span></span><span class=line><span class=cl>$ wc -l file                                                     <span class=c1># 统计行数</span>
</span></span><span class=line><span class=cl>$ wc -w file                                                     <span class=c1># 统计单词数</span>
</span></span><span class=line><span class=cl>$ wc -c file                                                     <span class=c1># 统计字符数</span>
</span></span><span class=line><span class=cl>$ sed <span class=s1>&#39;s/text/replace_text/&#39;</span> file       <span class=c1># 替换每一行的第一处匹配的text</span>
</span></span><span class=line><span class=cl>$ sed <span class=s1>&#39;s/text/replace_text/g&#39;</span> file        <span class=c1># 全局替换，输出替换后的内容</span>
</span></span><span class=line><span class=cl>$ sed -i <span class=s1>&#39;s/text/replace_text/g&#39;</span> file    <span class=c1># 全局替换，直接替换源文件</span>
</span></span><span class=line><span class=cl>$ sed <span class=s1>&#39;/^$/d&#39;</span> file                                        <span class=c1># 移除空白行</span></span></span></code></pre></td></tr></table></div></div><h3 id=3awk-数据流处理>3、awk 数据流处理
<a class=header-anchor href=#3awk-%e6%95%b0%e6%8d%ae%e6%b5%81%e5%a4%84%e7%90%86></a></h3><p><a href=https://en.wikipedia.org/wiki/AWK title=awk rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>awk</code>
<i class="fa fa-external-link-alt"></i>
</a>是文本处理程序，它依次处理文件的每一行，并读取里面的每一个字段。适用于处理日志、CSV 这种每行格式相同的文本文件。参考：
<a href=https://www.ruanyifeng.com/blog/2018/11/awk.html title=Awk入门 rel="noopener external nofollow noreferrer" target=_blank class=exturl>Awk入门
<i class="fa fa-external-link-alt"></i>
</a>及
<a href=https://likegeeks.com/awk-command/ title=30个Awk文本处理示例 rel="noopener external nofollow noreferrer" target=_blank class=exturl>30个Awk文本处理示例
<i class="fa fa-external-link-alt"></i></a></p><p>脚本结构: <code>awk 'BEGIN{statements} statements2 END{statements}'</code>，工作方式：</p><ul><li>执行begin中语句块；</li><li>从文件或stdin中读入一行，然后执行statements2，重复这个过程，直到文件全部被读取完毕；</li><li>执行end语句块；</li></ul><p>bash</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2>2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3>3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4>4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5>5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6>6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7>7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8>8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 使用不带参数的print时，会打印当前行，输入内容如下：</span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> -e <span class=s2>&#34;line1\nline2&#34;</span> <span class=p>|</span> awk <span class=s1>&#39;BEGIN{print &#34;start&#34;} {print} END{print &#34;End&#34;}&#39;</span>    
</span></span><span class=line><span class=cl>start
</span></span><span class=line><span class=cl>line1
</span></span><span class=line><span class=cl>line2
</span></span><span class=line><span class=cl>End
</span></span><span class=line><span class=cl>$ awk <span class=s1>&#39;{print $0}&#39;</span> demo.txt        <span class=c1># 把demo.txt文件中每一行原样打印出来</span>
</span></span><span class=line><span class=cl><span class=c1># 用空格分割，输出字段数&gt;30且第四列为特定字符的行中1，4及倒数第二列，第4列转成大写。&#39;,&#39;代表用空格分割</span>
</span></span><span class=line><span class=cl>$ awk -F <span class=s1>&#39; &#39;</span> <span class=s1>&#39;NF&gt;3 {if ($4 = &#34;CONSENSUS&#34;) print $1,toupper($4),$(NF-1)}&#39;</span> panic.log</span></span></code></pre></td></tr></table></div></div><h2 id=七数字证书>七、数字证书
<a class=header-anchor href=#%e4%b8%83%e6%95%b0%e5%ad%97%e8%af%81%e4%b9%a6></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// 查看证书信息
</span></span><span class=line><span class=cl>$ openssl x509 -noout -text -in user/admin1/admin1.tls.crt
</span></span><span class=line><span class=cl>$ openssl x509 -in cert.pem -noout -text</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><div class=post-tags><a href=/tags/linux/>linux
</a><a href=/tags/%E7%BC%96%E7%A8%8B/>编程</a></div><div class=post-share-tools><div class=post-share-loading><i class="fa-solid fa-ellipsis fa-spin"></i></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class=a2a_dd href=https://www.addtoany.com/share></a><a class=a2a_button_wechat></a><a class=a2a_button_qzone></a><a class=a2a_button_sina_weibo></a><a class=a2a_button_douban></a><a class=a2a_button_facebook></a><a class=a2a_button_x></a><a class=a2a_button_email></a><a class=a2a_button_printfriendly></a></div></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>有价值，请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="你永远无法说服猴子说有一个上帝存在 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="你永远无法说服猴子说有一个上帝存在 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/1979%E4%B8%AD%E8%B6%8A%E6%88%98%E4%BA%89%E6%9C%80%E7%9C%9F%E5%AE%9E%E7%9A%84%E5%89%8D%E5%9B%A0%E5%90%8E%E6%9E%9C/ rel=next title=1979中越战争最真实的前因后果><i class="fa fa-chevron-left"></i> 1979中越战争最真实的前因后果</a></div><div class="post-nav-prev post-nav-item"><a href=/post/wordpress%E7%BD%91%E7%AB%99%E6%90%AC%E5%AE%B6%E8%BF%81%E7%A7%BB%E6%95%99%E7%A8%8B/ rel=prev title=WordPress网站搬家迁移教程>WordPress网站搬家迁移教程
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=i18n-translate class=i18n-translate><i class="fa fa-language"></i><div id=lang-select class=lang-select><div id=lang-selected class=selected-option><span class="flag-icon flag-icon-zh-cn"></span>
<span class=selected-language>简体中文</span>
<i class="fa fa-chevron-down"></i></div><div id=lang-options class=lang-options><div class=lang-option lang-code=zh-cn lang-name=简体中文 lang-url=/post/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/><span class="flag-icon flag-icon-zh-cn"></span>
<span class=lang-name>简体中文</span></div></div></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2026
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>你永远无法说服猴子说有一个上帝存在</span></div><div class=custom-footer><meta name=referrer content="no-referrer"></div></div></footer><script class=next-config data-name=page type=application/json>{"clipboard":{"js":{"alias":"clipboard","file":"dist/clipboard.min.js","name":"clipboard.js","version":"2.0.11"}},"comments":false,"expired":false,"isHome":false,"isPage":true,"path":"linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4","permalink":"/post/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"Linux常用命令","toc":true,"waline":{"commentcnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}}}</script><script type=text/javascript src=/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":true,"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":false,"enable":false,"transition":{"collheader":"slideInRight","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":true},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"/js/3rd"}},"version":"4.8.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src="/js/main.min.js?=1770457263" defer></script><script type=text/javascript src="/js/clipboard.min.js?=1770457263" defer></script></body></html>