<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.147.6"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="oracle"><meta itemprop=description content="总有一些人先看到未来"><meta name=description content="总有一些人先看到未来"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="oracle"><meta property="og:type" content="article"><meta property="og:title" content="oracle"><meta property="og:description" content="总有一些人先看到未来"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="/post/oracle/"><meta property="og:site_name" content="你永远无法说服猴子说有一个上帝存在"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="你永远无法说服猴子说有一个上帝存在"><meta property="article:published_time" content="2017-07-21 15:39:16 +0000 UTC"><meta property="article:modified_time" content="2017-07-21 15:39:16 +0000 UTC"><link type=text/css rel=stylesheet href=/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1761963148"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><link rel=stylesheet type=text/css href="/css/custom_style.css?=1761963148"><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>oracle - 你永远无法说服猴子说有一个上帝存在</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>你永远无法说服猴子说有一个上帝存在</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>一生一次的人生该如何度过呢？</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section>首页</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section>分类</a></li><li class="menu-item menu-item-about"><a href=/categories/%E5%A6%B9%E5%AD%90/ class=hvr-icon-pulse rel=section>妹子</a></li><li class="menu-item menu-item-commonweal"><a href=/categories/%E7%A7%91%E6%99%AE/ class=hvr-icon-pulse rel=section>科普</a></li><li class="menu-item menu-item-flinks"><a href=/categories/%E4%BB%B7%E5%80%BC/ class=hvr-icon-pulse rel=section>价值</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section>归档</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse">搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#常用sql>常用sql</a></li><li><a href=#oracle数据库-ˈɒrəkl>Oracle数据库 [ˈɒrəkl]</a><ul><li><a href=#安装>安装</a></li></ul></li><li><a href=#连接>连接</a></li><li><a href=#sql基础常识>sql基础常识</a></li><li><a href=#表结构详解>表结构详解</a></li><li><a href=#查询语法-select-查询列名-from-表名>查询语法: select 查询列名 from 表名</a></li><li><a href=#规则>规则:</a></li><li><a href=#基本查询>基本查询</a></li><li><a href=#条件查询where-符合条件的行>条件查询/where 符合条件的行</a></li><li><a href=#单行函数>单行函数</a><ul><li><a href=#数值函数>数值函数</a></li><li><a href=#字符>字符</a></li><li><a href=#日期>日期</a></li><li><a href=#转换>转换</a></li><li><a href=#通用>通用</a></li><li><a href=#条件表达式-case>条件表达式 case</a></li></ul></li><li><a href=#多行函数聚合函数>多行函数/聚合函数</a></li><li><a href=#笛卡尔积两张表的乘积>笛卡尔积/两张表的乘积</a></li><li><a href=#子查询嵌套>子查询/嵌套:</a><ul><li><a href=#单行子查询子查询出来的结果只有一行>单行子查询:子查询出来的结果只有一行</a></li><li><a href=#多行子查询-in--not-in--any--all-exists>多行子查询 in , not in , any , all, exists,</a></li><li><a href=#exists查询语句-存在如果查询语句有结果则返回true否则返回false>exists(查询语句): 存在如果查询语句,有结果,则返回true,否则返回false</a></li><li><a href=#select-后面接子查询>select 后面接子查询:</a></li><li><a href=#练习一-找到员工表中工资最高的前三名只要前三条>练习一: 找到员工表中工资最高的前三名(只要前三条)</a></li></ul></li><li><a href=#练习二找到员工表中薪水大于本部门平均薪水的员工>练习二:找到员工表中薪水大于本部门平均薪水的员工</a></li><li><a href=#rownum-和rowid>rownum 和rowid</a></li><li><a href=#集合运算-并集交集差集>集合运算: 并集,交集,差集</a></li><li><a href=#表空间>表空间</a><ul><li><a href=#1创建表空间>1创建表空间</a></li><li><a href=#2创建用户>2创建用户</a></li><li><a href=#3用户授权>3用户授权</a></li><li><a href=#4创建表>4创建表</a></li><li><a href=#修改表>修改表</a></li><li><a href=#删除表-drop-table-person1>删除表 drop table person1;</a></li><li><a href=#表的约束>表的约束</a></li></ul></li><li><a href=#增删改表操作>增删改表操作</a></li><li><a href=#通过navicat-premium-实现oracle基本操作>通过Navicat Premium 实现Oracle基本操作</a></li><li><a href=#事务>事务</a></li><li><a href=#视图对查询结果的封装>视图:对查询结果的封装</a></li><li><a href=#序列-生成自增的编号>序列 生成自增的编号</a></li><li><a href=#索引-int_coll-索引后查询巨快>索引 int_coll 索引后查询巨快</a></li><li><a href=#plsql编程>PLSQL编程</a><ul><li><a href=#基本语法>基本语法</a></li><li><a href=#if条件判断>if条件判断</a></li><li><a href=#三种循环>三种循环</a></li></ul></li><li><a href=#游标-是对查询结果集的封装>游标 是对查询结果集的封装</a></li><li><a href=#游标练习>游标练习</a></li><li><a href=#例外-相当于是java异常>例外 相当于是java异常</a><ul><li><a href=#自定义例外>自定义例外</a></li></ul></li><li><a href=#存储过程-编译好的plsql代码片断封装在数据库中-相当于方法调用的时候传参数>存储过程 编译好的PLSQL代码片断,封装在数据库中 相当于方法调用的时候传参数</a></li><li><a href=#存储函数>存储函数</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=你永远无法说服猴子说有一个上帝存在 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>你永远无法说服猴子说有一个上帝存在</p><div class=site-description itemprop=description>总有一些人先看到未来</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>3066</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>17</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>469</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=#ZgotmplZ title="QQ → tencent://Message/?Uin=304967823&amp;websiteName=www.tcioc.com&amp;Menu=yes" rel=noopener target=_blank>QQ
</a></span><span class=links-of-social-item><a href=https://github.com/loveyouluobin title="Github → https://github.com/loveyouluobin" rel=noopener target=_blank>Github
</a></span><span class=links-of-social-item><a href=mailto:304967823@qq.com title="E-Mail → mailto:304967823@qq.com" rel=noopener target=_blank>E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/loveyouluobin title="知乎 → https://www.zhihu.com/people/loveyouluobin" rel=noopener target=_blank>知乎</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.zaobao.com/ title=https://www.zaobao.com/ target=_blank>联合早报</a></li><li class=links-of-blogroll-item><a href=https://yandex.com/ title=https://yandex.com/ target=_blank>懂你的搜索</a></li></ul></div><div class="mydefined animated" itemprop=custom></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="0001-01-01 00:00:00 +0000 UTC"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=16772282></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=35022></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2025-10-30 15:39:16 +0000 UTC"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-i18n-translate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=/post/oracle/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="你永远无法说服猴子说有一个上帝存在"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="你永远无法说服猴子说有一个上帝存在"><meta itemprop=description content="总有一些人先看到未来"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="oracle"><meta itemprop=description content="常用sql

"></span><header class=post-header><h1 class=post-title itemprop="name headline">oracle</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2017-07-21 15:39:16 +00:00" itemprop="dateCreated datePublished" datetime="2017-07-21 15:39:16 +0000 UTC">2017-07-21
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E7%BC%96%E7%A8%8B/ itemprop=url rel=index><span itemprop=name>编程</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>16524</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>33分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/post/oracle/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h2 id=常用sql>常用sql
<a class=header-anchor href=#%e5%b8%b8%e7%94%a8sql></a></h2><a id=more></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7>7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>改表名 rename table 旧表名 to 新表名 
</span></span><span class=line><span class=cl>表头 create table 表名(字段名 类型 约束,..)
</span></span><span class=line><span class=cl>增列 alter table 表名 add 列名 类型  约束；
</span></span><span class=line><span class=cl>改列 alter table 表名 change 旧列名 新列名 类型 约束
</span></span><span class=line><span class=cl>删列 alter table 表名 drop 列名
</span></span><span class=line><span class=cl>插行 insert into 表名 values(值1,值2......)
</span></span><span class=line><span class=cl>改行 update 表名 set age=22 where id=2
</span></span><span class=line><span class=cl>删行 delete from 表名 where 列名=值 </span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27>27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28>28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29>29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30>30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31>31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32>32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33>33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34>34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35>35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36>36</a>
</span><span class=lnt id=hl-1-37><a class=lnlinks href=#hl-1-37>37</a>
</span><span class=lnt id=hl-1-38><a class=lnlinks href=#hl-1-38>38</a>
</span><span class=lnt id=hl-1-39><a class=lnlinks href=#hl-1-39>39</a>
</span><span class=lnt id=hl-1-40><a class=lnlinks href=#hl-1-40>40</a>
</span><span class=lnt id=hl-1-41><a class=lnlinks href=#hl-1-41>41</a>
</span><span class=lnt id=hl-1-42><a class=lnlinks href=#hl-1-42>42</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>查库 show databases;
</span></span><span class=line><span class=cl>查字符集 show create database db; 
</span></span><span class=line><span class=cl>进库 use lb 查有多少张表:show tables;
</span></span><span class=line><span class=cl>查建表语句:show create table 表名
</span></span><span class=line><span class=cl>查看表结构 desc 表名;  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>但所有行:select*from from1;
</span></span><span class=line><span class=cl>查1行:SELECT*FROM star WHERE id=3 WHERE price&gt;3000 HAVING TYPE=1
</span></span><span class=line><span class=cl>多行:select*from form1 where id in(1,3,5,7,15,20) HAVING price&gt;3000
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>模糊 select*from from1 where name like %波_;
</span></span><span class=line><span class=cl>区间 select*from from1 where price between 2000 and 6000;  [bɪˈtwin] 
</span></span><span class=line><span class=cl>降序 select * from from1 order by price asc升/desc降;
</span></span><span class=line><span class=cl>去重并年龄升序SELECT DISTINCT price FROM star ORDER BY 年龄 ASC; 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>逻辑和 select * from from1 where price&gt;3000 and age&gt;30;
</span></span><span class=line><span class=cl>select*from user where username=&#39;张三&#39; and password=&#39;123456&#39;
</span></span><span class=line><span class=cl>逻辑或 select * from from1 where price&gt;5000 or name like &#34;周%&#34;;
</span></span><span class=line><span class=cl>逻辑非 select * from from1 where not(name like &#34;周%&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>查1列/多个列:SELECT 姓名 FROM star; 
</span></span><span class=line><span class=cl>并筛选:SELECT id,年龄 FROM star WHERE 年龄&gt;30; 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>聚合算条目数不能有where: select count(*) from from1
</span></span><span class=line><span class=cl>聚合算总和值 select sum(price) from from1
</span></span><span class=line><span class=cl>聚合最大值 select max(age) from star;
</span></span><span class=line><span class=cl>聚合最小值 select min(age) from from1;
</span></span><span class=line><span class=cl>分组聚合算平均值 SELECT TYPE, AVG(price)FROM star GROUP BY TYPE;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>分组:整个表分组并把年龄*2的结果 单独列出 SELECT*,年龄*2 FROM star
</span></span><span class=line><span class=cl>以年龄分组 并把年龄大于30单独统计 SELECT 姓名,年龄&gt;30 FROM star
</span></span><span class=line><span class=cl>以分组形式把姓名列出:SELECT TYPE,GROUP_CONCAT(姓名)FROM star GROUP BY TYPE
</span></span><span class=line><span class=cl>各个分组身份的平均值 select type,avg(price) from star group by type;
</span></span><span class=line><span class=cl>各个分组身份的最大的 select type,min(price) from star group by type;
</span></span><span class=line><span class=cl>各个分组身份的条目数 select type,count(*) from star group by type;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>各个分组身份的条目数 并大于2的显示条目
</span></span><span class=line><span class=cl>select type,count(*)from star group by type having count(*)&gt;2;
</span></span><span class=line><span class=cl>每组 条目里年龄大于30的显示条目;WHERE只能在分组前
</span></span><span class=line><span class=cl>SELECT TYPE,COUNT(*)FROM star WHERE 年龄&gt;30 GROUP BY TYPE
</span></span><span class=line><span class=cl>每组 条目里年龄大于30的 并且条目大于2的 显示条目;HAVING可以分组后再过滤
</span></span><span class=line><span class=cl>SELECT TYPE,COUNT(*)FROM star WHERE 年龄&gt;30 GROUP BY TYPE HAVING COUNT(*)&gt;2</span></span></code></pre></td></tr></table></div></div><p>多表</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span><span class=lnt id=hl-2-30><a class=lnlinks href=#hl-2-30>30</a>
</span><span class=lnt id=hl-2-31><a class=lnlinks href=#hl-2-31>31</a>
</span><span class=lnt id=hl-2-32><a class=lnlinks href=#hl-2-32>32</a>
</span><span class=lnt id=hl-2-33><a class=lnlinks href=#hl-2-33>33</a>
</span><span class=lnt id=hl-2-34><a class=lnlinks href=#hl-2-34>34</a>
</span><span class=lnt id=hl-2-35><a class=lnlinks href=#hl-2-35>35</a>
</span><span class=lnt id=hl-2-36><a class=lnlinks href=#hl-2-36>36</a>
</span><span class=lnt id=hl-2-37><a class=lnlinks href=#hl-2-37>37</a>
</span><span class=lnt id=hl-2-38><a class=lnlinks href=#hl-2-38>38</a>
</span><span class=lnt id=hl-2-39><a class=lnlinks href=#hl-2-39>39</a>
</span><span class=lnt id=hl-2-40><a class=lnlinks href=#hl-2-40>40</a>
</span><span class=lnt id=hl-2-41><a class=lnlinks href=#hl-2-41>41</a>
</span><span class=lnt id=hl-2-42><a class=lnlinks href=#hl-2-42>42</a>
</span><span class=lnt id=hl-2-43><a class=lnlinks href=#hl-2-43>43</a>
</span><span class=lnt id=hl-2-44><a class=lnlinks href=#hl-2-44>44</a>
</span><span class=lnt id=hl-2-45><a class=lnlinks href=#hl-2-45>45</a>
</span><span class=lnt id=hl-2-46><a class=lnlinks href=#hl-2-46>46</a>
</span><span class=lnt id=hl-2-47><a class=lnlinks href=#hl-2-47>47</a>
</span><span class=lnt id=hl-2-48><a class=lnlinks href=#hl-2-48>48</a>
</span><span class=lnt id=hl-2-49><a class=lnlinks href=#hl-2-49>49</a>
</span><span class=lnt id=hl-2-50><a class=lnlinks href=#hl-2-50>50</a>
</span><span class=lnt id=hl-2-51><a class=lnlinks href=#hl-2-51>51</a>
</span><span class=lnt id=hl-2-52><a class=lnlinks href=#hl-2-52>52</a>
</span><span class=lnt id=hl-2-53><a class=lnlinks href=#hl-2-53>53</a>
</span><span class=lnt id=hl-2-54><a class=lnlinks href=#hl-2-54>54</a>
</span><span class=lnt id=hl-2-55><a class=lnlinks href=#hl-2-55>55</a>
</span><span class=lnt id=hl-2-56><a class=lnlinks href=#hl-2-56>56</a>
</span><span class=lnt id=hl-2-57><a class=lnlinks href=#hl-2-57>57</a>
</span><span class=lnt id=hl-2-58><a class=lnlinks href=#hl-2-58>58</a>
</span><span class=lnt id=hl-2-59><a class=lnlinks href=#hl-2-59>59</a>
</span><span class=lnt id=hl-2-60><a class=lnlinks href=#hl-2-60>60</a>
</span><span class=lnt id=hl-2-61><a class=lnlinks href=#hl-2-61>61</a>
</span><span class=lnt id=hl-2-62><a class=lnlinks href=#hl-2-62>62</a>
</span><span class=lnt id=hl-2-63><a class=lnlinks href=#hl-2-63>63</a>
</span><span class=lnt id=hl-2-64><a class=lnlinks href=#hl-2-64>64</a>
</span><span class=lnt id=hl-2-65><a class=lnlinks href=#hl-2-65>65</a>
</span><span class=lnt id=hl-2-66><a class=lnlinks href=#hl-2-66>66</a>
</span><span class=lnt id=hl-2-67><a class=lnlinks href=#hl-2-67>67</a>
</span><span class=lnt id=hl-2-68><a class=lnlinks href=#hl-2-68>68</a>
</span><span class=lnt id=hl-2-69><a class=lnlinks href=#hl-2-69>69</a>
</span><span class=lnt id=hl-2-70><a class=lnlinks href=#hl-2-70>70</a>
</span><span class=lnt id=hl-2-71><a class=lnlinks href=#hl-2-71>71</a>
</span><span class=lnt id=hl-2-72><a class=lnlinks href=#hl-2-72>72</a>
</span><span class=lnt id=hl-2-73><a class=lnlinks href=#hl-2-73>73</a>
</span><span class=lnt id=hl-2-74><a class=lnlinks href=#hl-2-74>74</a>
</span><span class=lnt id=hl-2-75><a class=lnlinks href=#hl-2-75>75</a>
</span><span class=lnt id=hl-2-76><a class=lnlinks href=#hl-2-76>76</a>
</span><span class=lnt id=hl-2-77><a class=lnlinks href=#hl-2-77>77</a>
</span><span class=lnt id=hl-2-78><a class=lnlinks href=#hl-2-78>78</a>
</span><span class=lnt id=hl-2-79><a class=lnlinks href=#hl-2-79>79</a>
</span><span class=lnt id=hl-2-80><a class=lnlinks href=#hl-2-80>80</a>
</span><span class=lnt id=hl-2-81><a class=lnlinks href=#hl-2-81>81</a>
</span><span class=lnt id=hl-2-82><a class=lnlinks href=#hl-2-82>82</a>
</span><span class=lnt id=hl-2-83><a class=lnlinks href=#hl-2-83>83</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>MySQL多表 商品表的外键和分类表的主键
</span></span><span class=line><span class=cl>添加一个外键:alter table 表名 add foreign key(外键字段的字段名) references 主键表名 (主键字段名) [&#39;ɔ:ltə] [ˈfɒrən][ˈrefrənsiz]  [ˈkætəgɔri]
</span></span><span class=line><span class=cl>alter table star add foreign key(type)references category(cid)
</span></span><span class=line><span class=cl>删除一个外键：alter table 表名 drop foreign key 约束名
</span></span><span class=line><span class=cl>ALTER TABLE star DROP FOREIGN KEY star_ibfk_1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>- 一对多(重点)
</span></span><span class=line><span class=cl>  - 应用场景:学生和班级、商品和分类、用户和订单
</span></span><span class=line><span class=cl>    - 建表原则:在多的一方添加一个外键，指向一的一方的主键
</span></span><span class=line><span class=cl>- 多对多(重点)
</span></span><span class=line><span class=cl>  - 应用场景:商品和订单、学生和选课
</span></span><span class=line><span class=cl>  - 建表原则：创建一张第三方表，该表除了id字段之外，还至少得有两字段，分别作为外键指向两张表的主键
</span></span><span class=line><span class=cl>- 一对第一
</span></span><span class=line><span class=cl>  - 应用场景:人和身份证号
</span></span><span class=line><span class=cl>  - 建表原则:先当成一对多来处理，再给多的一方的外键字段添加一个唯一约束
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>交叉查询得到的结果是一个笛卡尔积，这个结果中包含错误数据。
</span></span><span class=line><span class=cl>select*from star,category
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>连接查询:为了筛选交叉查询中获取带的正确数据(重点)
</span></span><span class=line><span class=cl>  其实就是在交叉查询的基础上添加一个条件进行筛选正确数据
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>满足条件则显示，不满足则不显示 两种结果一样
</span></span><span class=line><span class=cl>隐式内连接查询 查询结果是a的外键star.type=b的主键(cid)/两个int相同就显示 b的主键对应的数据(cname) 简写的结果一模一样只是精简了代码
</span></span><span class=line><span class=cl>  - select * from a表,b表where 条件(a表的外键=b表的主键)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SELECT*FROM star,category WHERE star.type=category.cid
</span></span><span class=line><span class=cl>SELECT*FROM star s,category c WHERE s.type=c.cid 可以用别名简化
</span></span><span class=line><span class=cl>显式 内连接查询 显示里面的,on只能用主外键关联作为条件,如果还有其它条件,后面加where
</span></span><span class=line><span class=cl>  - select * from a表 inner join b表 on 条件
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SELECT*FROM star s JOIN category c ON s.type=c.cid
</span></span><span class=line><span class=cl>SELECT*FROM star s JOIN category c ON s.type=c.cid 简化
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>外连接查询：显示主表 的所有数据，从表 的数据若满足条件则显示，不满足则以null显示
</span></span><span class=line><span class=cl>- 左外连接:以join左边的表为主表/star
</span></span><span class=line><span class=cl>select * from a表left outer join b表 on 条件
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SELECT*FROM star s LEFT  OUTER JOIN category c ON s.type=c.cid
</span></span><span class=line><span class=cl>- 右外连接:以join右边的表为主表 /category
</span></span><span class=line><span class=cl>  - select * from a right outer join b on 条件
</span></span><span class=line><span class=cl>SELECT*FROM star s RIGHT  OUTER JOIN category c ON s.type=c.cid
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>子查询(重点)
</span></span><span class=line><span class=cl>定义：一个select语句中嵌套另外一个完整的select语句，也就是说一个select语句作为另外一个select语句的条件
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1--先查出最高身价明星 2再根据最高身价查出明星信息
</span></span><span class=line><span class=cl>SELECT MAX(price) FROM star
</span></span><span class=line><span class=cl>SELECT*FROM star WHERE price=5050
</span></span><span class=line><span class=cl>子查询就可以合并成一句查询 嵌套
</span></span><span class=line><span class=cl>SELECT*FROM star WHERE price=(SELECT MAX(price)FROM star)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--1查宝宝的身价2.以宝宝的身份去查询身价大于这个数的明星信息--
</span></span><span class=line><span class=cl>SELECT price FROM star WHERE NAME=&#34;宝宝&#34;
</span></span><span class=line><span class=cl>SELECT*FROM star WHERE price&gt;5000
</span></span><span class=line><span class=cl>SELECT*FROM star WHERE price&gt;(SELECT price FROM star WHERE NAME=&#34;宝宝&#34;)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--1查出小白的类别2 根据这个类别查同类别明星信息--
</span></span><span class=line><span class=cl>SELECT TYPE FROM star WHERE NAME=&#34;小白&#34;
</span></span><span class=line><span class=cl>SELECT*FROM star WHERE TYPE=2
</span></span><span class=line><span class=cl>SELECT*FROM star WHERE TYPE=(SELECT TYPE FROM star WHERE NAME=&#34;小白&#34;)
</span></span><span class=line><span class=cl>SELECT*FROM star WHERE TYPE=(SELECT TYPE FROM star WHERE NAME=&#34;小白&#34;)AND NAME!=&#34;罗永浩&#34;//后面还可以加上不等于的语句
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SELECT*FROM star WHERE TYPE=(SELECT cid FROM category WHERE cname=&#34;宝剑队&#34;); //查所有类别为宝剑队的明星
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>联合查询(了解)：合并两个select语句查询到的结果集
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>- union,去重
</span></span><span class=line><span class=cl>- union all，不去重
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>分页查询(重点)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>- 关键字:limit a,b
</span></span><span class=line><span class=cl>  - a代表从第几个下标开始查询
</span></span><span class=line><span class=cl>SELECT*FROM star LIMIT 0,4; //第二次 4,4
</span></span><span class=line><span class=cl>  - b代表查询多少条数据，也就是每页显示的数据条数
</span></span><span class=line><span class=cl>- 将客户端传入的要查询的页数&#34;page&#34;转换成a
</span></span><span class=line><span class=cl> a=(page-1)*b
</span></span><span class=line><span class=cl>对明星进行按价格从高到低排序，然后取第一个明星信息
</span></span><span class=line><span class=cl>SELECT * FROM star ORDER BY price DESC LIMIT 0,1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SELECT ename,job FROM emp WHERE deptno=10 //10号部门员工和工作
</span></span><span class=line><span class=cl>SELECT deptno,AVG(sal)FROM emp GROUP BY deptno 以部门分组 查出平均工资</span></span></code></pre></td></tr></table></div></div><h2 id=oracle数据库-ˈɒrəkl>Oracle数据库 [ˈɒrəkl]
<a class=header-anchor href=#oracle%e6%95%b0%e6%8d%ae%e5%ba%93-%cb%88%c9%92r%c9%99kl></a></h2><h3 id=安装>安装
<a class=header-anchor href=#%e5%ae%89%e8%a3%85></a></h3><p>安装全部下一步,检查先决条件时的网络配置需求,勾选用户已验证,最后一步更改两个用户名 把是否锁定帐户勾取消设置密码 密码 scott 密码tiger hr 密码hr</p><h2 id=连接>连接
<a class=header-anchor href=#%e8%bf%9e%e6%8e%a5></a></h2><p>http://pc5268-20140727:1158/em/ 用户名sys 密码root 连接身份sysdba 也可以用ip地址</p><p>instantclient_12_1目录下 dos执行 sqlplus
<a href=mailto:scott/tiger@192.168.44.68 title=scott/tiger@192.168.44.68>scott/tiger@192.168.44.68
</a>:1521/orcl 第一次要输用户名和密码scott 密码tiger</p><p>用NavicatPremium要在工具->选项->环境->OCI环境,填instantclient_11_2\oci.dll 下载的 软件和下载的版本要一致32/64位</p><h2 id=sql基础常识>sql基础常识
<a class=header-anchor href=#sql%e5%9f%ba%e7%a1%80%e5%b8%b8%e8%af%86></a></h2><p>在Oracle的学习之中，重点使用的是SQL语句，而所有的SQL语句都要在scott用户下完成，这个用户下一共有四张表，可以使用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>SELECT * FROM tab;</span></span></code></pre></td></tr></table></div></div><h2 id=表结构详解>表结构详解
<a class=header-anchor href=#%e8%a1%a8%e7%bb%93%e6%9e%84%e8%af%a6%e8%a7%a3></a></h2><p>1、 部门表：dept [dɪˈpɑ:tmənt]department</p><table><thead><tr><th><strong>№</strong></th><th><strong>名称</strong></th><th><strong>类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>1</td><td>DEPTNO</td><td>NUMBER(2)</td><td>表示部门编号，由两位数字所组成</td></tr><tr><td>2</td><td>DNAME</td><td>VARCHAR2(14)</td><td>部门名称，最多由14个字符所组成</td></tr><tr><td>3</td><td>LOC</td><td>VARCHAR2(13)</td><td>部门所在的位置</td></tr></tbody></table><p>2、 雇员表：emp [ɪmˈplɔɪi:] employee</p><table><thead><tr><th><strong>№</strong></th><th><strong>名称</strong></th><th><strong>类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>1</td><td>EMPNO</td><td>NUMBER(4)</td><td>雇员的编号，由四位数字所组成</td></tr><tr><td>2</td><td>ENAME</td><td>VARCHAR2(10)</td><td>雇员的姓名，由10位字符所组成</td></tr><tr><td>3</td><td>JOB</td><td>VARCHAR2(9)</td><td>雇员的职位 包括管理 管理的管理</td></tr><tr><td>4</td><td>MGR</td><td>NUMBER(4)</td><td>上级的字段 雇员对应的领导编号，领导也是雇员</td></tr><tr><td>5</td><td>HIREDATE</td><td>DATE</td><td>雇员的雇佣日期</td></tr><tr><td>6</td><td>SAL</td><td>NUMBER(7,2)</td><td>基本工资，其中有两位小数，五倍整数，一共是七位</td></tr><tr><td>7</td><td>COMM</td><td>NUMBER(7,2)</td><td>奖金，佣金</td></tr><tr><td>8</td><td>DEPTNO</td><td>NUMBER(2)</td><td>雇员所在的部门编号</td></tr></tbody></table><p>3、 工资等级表：salgrade [ˈsæləri] salary grade [greɪd]</p><table><thead><tr><th><strong>№</strong></th><th><strong>名称</strong></th><th><strong>类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>1</td><td>GRADE</td><td>NUMBER</td><td>工资的等级</td></tr><tr><td>2</td><td>LOSAL</td><td>NUMBER</td><td>此等级的最低工资</td></tr><tr><td>3</td><td>HISAL</td><td>NUMBER</td><td>此等级的最高工资</td></tr></tbody></table><p>4、 资金表：bonus [ˈbəʊnəs]</p><table><thead><tr><th><strong>№</strong></th><th><strong>名称</strong></th><th><strong>类型</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>1</td><td>ENAME</td><td>VARCHAR2(10)</td><td>雇员姓名</td></tr><tr><td>2</td><td>JOB</td><td>VARCHAR2(9)</td><td>雇员职位</td></tr><tr><td>3</td><td>SAL</td><td>NUMBER</td><td>雇员的工资</td></tr><tr><td>4</td><td>COMM</td><td>NUMBER</td><td>雇员的奖金</td></tr></tbody></table><p>SCOTT用户 表空间下的表 SALGRADE工资等级表 BONUS奖金表 DEPT部门表 EMP员工表</p><p>HI用户下的表 REGIONS地区 COUNTRIES国家 LOCATIONS地址 DEPARTMENTS部门 EMPLOYEES员工 JOBS职位 JOB_HISTORY职位历史</p><p>sql结构化查询语言 分类语言:四类语言</p><p>DDL数据定义语言 操作数据库结构 create drop alter</p><p>DML数据操纵语言 操纵的是数据 insert增 update改 delete删</p><p>DCL数据控制语言 控制权限grant revoke</p><p>DQL数据查询语言 select</p><h2 id=查询语法-select-查询列名-from-表名>查询语法: select 查询列名 from 表名
<a class=header-anchor href=#%e6%9f%a5%e8%af%a2%e8%af%ad%e6%b3%95-select-%e6%9f%a5%e8%af%a2%e5%88%97%e5%90%8d-from-%e8%a1%a8%e5%90%8d></a></h2><p>查询列名处为要查询的最后过滤规则:查询全部列用* 单个/多个列 用列名 别名 用,隔开 全部列加单个/多个用 表名.*,列名,列名</p><p><strong>sql编写顺序 :select/选择结果 要查询/显示的列 from/来自 表名 where 条件判断 group by 分组的条件 having 分组之后的条件过滤 order by 排序</strong></p><p>编写顺序:select..from..shere..group by..having.order by..</p><p>执行顺序 from..where..group by..having..select..order by..</p><p>limit属于mysql独有的方言 select*sal, from emp</p><h2 id=规则>规则:
<a class=header-anchor href=#%e8%a7%84%e5%88%99></a></h2><p>Oracle体系结构 数据库&ndash;实例orcl&ndash;表空间/用户操作表空间&ndash;数据文件</p><p>创建一个项目:先创建一个用户->再创建表空间/指定用户操作的表空间->创建表</p><p>和mysql最大区别 Oracle: 表是属于用户的 Oracle是属于多用户的</p><h2 id=基本查询>基本查询
<a class=header-anchor href=#%e5%9f%ba%e6%9c%ac%e6%9f%a5%e8%af%a2></a></h2><p>select*from emp &ndash;查询emp表</p><p>或者 select emp.* from emp</p><p>select ename from emp 查 姓名单列</p><p>SELECT ENAME from emp WHERE ENAME=&lsquo;JONES&rsquo; 查单列并加条件</p><p>select ename as &ldquo;姓&名&rdquo;,job 工作 from emp &ndash;只查出两列 并以别名姓名和工作 显示表头</p><p>SELECT emp.*,job from emp查整个表 并在后面查多出一列job的列</p><p>SELECT emp.*, sal**12 from emp 年薪 from emp;&ndash;查询所有 多输出一列sal并计算 查询员工年薪以别名显示</p><p>select 2+2*5 from dual &ndash;运算查询</p><p>别名中间有特殊字符需要使用双引号包含整个别名 as可以省略
select distinct job from emp &ndash;去除重复数据查询 去除了重复的工作 多行是每一行对应都相同就去除重复的</p><p>&ndash;null值不能参与运算 nvl(null,5)专门判断第一参数如果为null就返回参数2否则返回参数1</p><p>select sal,comm, nvl(comm,0)+sal from emp &ndash;查询出工资 奖金 和总收入 总收入解决null不能计算用nvl</p><p>select concat(&lsquo;我爱&rsquo;,&lsquo;java&rsquo;)from dual;&ndash;通用两个字符串拼接 字符串用用单引</p><p>select &lsquo;我爱&rsquo;||&lsquo;Java&rsquo;||&lsquo;go&rsquo;from dual;&ndash;两个字符串拼接 字符串用用单引</p><h2 id=条件查询where-符合条件的行>条件查询/where 符合条件的行
<a class=header-anchor href=#%e6%9d%a1%e4%bb%b6%e6%9f%a5%e8%af%a2where-%e7%ac%a6%e5%90%88%e6%9d%a1%e4%bb%b6%e7%9a%84%e8%a1%8c></a></h2><p>where后面的写法就是条件 查询出符合条件的行</p><p>关系运算符 > >= &lt; &lt;= = != &lt;> 逻辑 or and not</p><p>其它in在集合内 in null专门判断是null is not null不为null between..and在区间内 like模糊 any任意 all所有 exists存在</p><p>select*from emp where comm is not null and sal>1500&ndash;查能获得到奖金并且工资大于1500的员工 资金不是null的条件并且..</p><p>select*from emp where comm is null and not(sal>1500)&ndash;没有奖金并且工资 不大于1500的</p><p>select*from emp where sal between 1500 and 3000 &ndash;工资1500-3000区间</p><p>select*from emp where HIREDATE between to_date(&lsquo;1981-1-1&rsquo;,&lsquo;yyyy-mm-dd&rsquo;) and to_date(&lsquo;1981-12-31&rsquo;,&lsquo;yyyy-mm-dd&rsquo;); &ndash;查1981年1月1号到12月31日入职的员工 转日期查询</p><p>select*from emp where ename=&lsquo;smith&rsquo;or empno=7499 &ndash;名字是smith或者编号7499都行</p><p>select*from emp where empno in(7369,7499,7521) &ndash;员工确定编号的几个 确定列的范围 中的多个</p><p>select*from emp where ename like &lsquo;_M%&rsquo; &ndash;模糊查询 员工名字第二个字符是M后面任意的</p><p>select*from emp where empno!=7369 order by comm desc nulls last,HIREDATE asc nulls last&ndash;排除编号7369 以奖金降序排 入职按升序排 遇到空值放后面</p><h2 id=单行函数>单行函数
<a class=header-anchor href=#%e5%8d%95%e8%a1%8c%e5%87%bd%e6%95%b0></a></h2><p>单行函数/对单个值进行处理 数值函数 字符函数 日期 转换 通用nvl
多行函数/聚合函数 sum avg max min count</p><h3 id=数值函数>数值函数
<a class=header-anchor href=#%e6%95%b0%e5%80%bc%e5%87%bd%e6%95%b0></a></h3><p>select ceil(-13.9)from dual&ndash;13 向下取整
select floor(-12.9)from dual&ndash;13 向上取整
select round(3.155,2)from dual&ndash;3.16 四舍五入 留2位小数
select trunc(3.155,2)from dual&ndash;3.15 直接截断留2位小数
select mod(9,2)from dual&ndash;1 取模 整除后的余数</p><h3 id=字符>字符
<a class=header-anchor href=#%e5%ad%97%e7%ac%a6></a></h3><p>select concat(&lsquo;我爱&rsquo;,&lsquo;Java&rsquo;)from dual&ndash;我爱Java 字符串拼接
select substr(&lsquo;abcdef&rsquo;,2,3)from dual&ndash;bcd 字符串截取 从第二个开始截三位 开始位置0或1
select length(&lsquo;abcdef&rsquo;)from dual&ndash;6 字符串长度
select replace(&lsquo;abcdef&rsquo;,&lsquo;a&rsquo;,&lsquo;b&rsquo;)from dual&ndash;bbcdef 字符串替换
select trim(&rsquo;s&rsquo;from&rsquo;sscdess&rsquo;)from dual&ndash;cde 去掉两边的s</p><h3 id=日期>日期
<a class=header-anchor href=#%e6%97%a5%e6%9c%9f></a></h3><p>select sysdate from dual &ndash;2018-02-28 23:31:07 获取当前时间</p><p>select ename,round((sysdate-hiredate)/7)from emp&ndash;获得员工入职的当前时间减入职时间 /7的周数的四舍五入</p><p>select ename,round(sysdate-hiredate)from emp &ndash;员工入职天数</p><p>select ename,round(MONTHS_BETWEEN(sysdate,hiredate))from emp&ndash;获得员工入职的月数 专用函数</p><p>select ename,round(MONTHS_BETWEEN(sysdate,hiredate)/12)from emp&ndash;获得员工入职的年数</p><p>select add_months(sysdate,3)from emp&ndash;三个月以后的日期是多少</p><h3 id=转换>转换
<a class=header-anchor href=#%e8%bd%ac%e6%8d%a2></a></h3><p>select to_number(&lsquo;10&rsquo;)+24 from dual;&ndash;34 字符串转数值</p><p>select &lsquo;10&rsquo;+24 from dual;&ndash;34 运算时会自动转数值 不是就报错</p><p>经数值转字符:</p><p>select sal,to_char(sal,&lsquo;9999.99&rsquo;)from emp;&ndash;1600-1600.00 对工资 经数值转字符 处理后 对比 只能用9去匹配 格式化字符串 这里是前面最多可以四位数 后面加两个小数 1600-1600.00 16000报错
<code>select sal,to_char(sal,'$9,999.99')from emp;--1600-$1,600.00 格式化为加美元符加千位符</code></p><p>日期转字符
select to_char(sysdate,&lsquo;yyyy-mm-dd&rsquo;) from dual;&ndash;2018-02-28格式化只显示日期
select to_char(sysdate,&lsquo;yyyy&rsquo;) from dual;&ndash;2018 只显示年
select to_char(sysdate,&lsquo;ddd&rsquo;) from dual;&ndash;059 现在距今年过了几天 dd距这个月过了几天 d 距这个星期过了几天
select to_char(sysdate,&lsquo;day&rsquo;) from dual;&ndash;webnesday 现在星期几的英语 dy星期几的缩写</p><p>字符转日期
select*from emp where HIREDATE between to_date(&lsquo;1981-1-1&rsquo;,&lsquo;yyyy-mm-dd&rsquo;) and to_date(&lsquo;1981-12-31&rsquo;,&lsquo;yyyy-mm-dd&rsquo;); &ndash;查1981年1月1号到12月31日入职的员工 转日期查询</p><h3 id=通用>通用
<a class=header-anchor href=#%e9%80%9a%e7%94%a8></a></h3><p>处理空值nvl</p><p>-null值不能参与运算 nvl(null,5)专门判断第一参数如果为null就返回参数2否则返回参数1</p><p>select sal,comm, nvl(comm,0)+sal from emp &ndash;查询出工资 奖金 和总收入 总收入解决null不能计算用nvl</p><p>nvl2 相当于判断第一个参数是不是Null 的三元运算符
select nvl2(null,5,6)from dual &ndash;6如果第一个参数是null返回第三个 否则返回第二个
select nvl2(2,5,6)from dual &ndash;6如果第一个参数是null返回第三个 否则返回第二个</p><h3 id=条件表达式-case>条件表达式 case
<a class=header-anchor href=#%e6%9d%a1%e4%bb%b6%e8%a1%a8%e8%be%be%e5%bc%8f-case></a></h3><p>select ename,case ename when&rsquo;KING&rsquo; then &lsquo;王者&rsquo; when &lsquo;ALLEN&rsquo; then &lsquo;艾伦&rsquo; else &lsquo;路人甲&rsquo; end from emp</p><p>独有的 未匹配到的为null</p><p>select ename,decode(ename,&lsquo;KING&rsquo;,&lsquo;王者&rsquo;,&lsquo;SMITH&rsquo;,&lsquo;史密斯&rsquo;)from emp</p><h2 id=多行函数聚合函数>多行函数/聚合函数
<a class=header-anchor href=#%e5%a4%9a%e8%a1%8c%e5%87%bd%e6%95%b0%e8%81%9a%e5%90%88%e5%87%bd%e6%95%b0></a></h2><p>where是在分组之前执行的条件过滤 不能接聚合 可以接单行 having是分组之后 的条件过滤 可以接聚合</p><p>sql编写顺序 select..from..where..group by..having..order by..</p><p>sql执行顺序 from..where..group by..having..select..order by..</p><p>函数 计数count 最大max 最小min 平均avg 求和sum 会忽略空值</p><p>select count(<em>)from emp;&ndash;查询所有员工人数 14
select sum(comm)from emp;&ndash;查询奖金总金额 2200
select avg(comm)from emp&ndash;查询全公司平均奖金 550 会忽略空值 不行
select sum(comm)/count(</em>) from emp;&ndash;用总奖金除总人数就是对的 157.1</p><h2 id=笛卡尔积两张表的乘积>笛卡尔积/两张表的乘积
<a class=header-anchor href=#%e7%ac%9b%e5%8d%a1%e5%b0%94%e7%a7%af%e4%b8%a4%e5%bc%a0%e8%a1%a8%e7%9a%84%e4%b9%98%e7%a7%af></a></h2><p>&ndash;笛卡尔积的概念就是同时查询两张表,列数相加,行数相乘</p><p>select*from emp,dept &ndash;员工14行和部门4行 查出了56行</p><p>&ndash;在笛卡尔积基础上筛选出有意义的数据 隐式内连接 可以加别名
select*from emp,dept where emp.deptno=dept.deptno;</p><p>内连接:内连接(自然连接): <strong>只有两个表相匹配的行才能在结果集中出现</strong>内连接是只显示满足条件 外左连接显示左边全部的和右边与左边相同的 右连接显示右边全部的和左边与右边相同的</p><p><strong>加别名内隐式连接</strong> 员工8列14行部门3列4行 查出了11列14行 员工表在前部门前在后</p><p>select*from emp e,dept d where e.deptno=d.deptno;</p><p><strong>&ndash;显式内连接inner join ..on</strong> 查询出两张表交叉的以后的内容 和隐式一样结果
select*from emp e inner join dept d on e.deptno=d.deptno;</p><p><strong>以下都是查几列的 并加条件的内连接查询</strong></p><p>&ndash;查询员工编号,姓名 经理编号 姓名
from来自于员工的两张 并取别名来查,再第一张的编号和第二张的经理编号就得出了是领导的员工编号最后select过滤出来的就是员工编号 姓名 经理编号 姓名的列
select e.empno,e.ename,e.mgr,m.ename from emp e,emp m where e.mgr=m.empno</p><p>&ndash;查询员工编号,姓名 部门 经理编号 姓名
select e1.empno,e1.ename,e1.mgr,m1.ename,d1.dname from emp e1,emp m1,dept d1 where e1.mgr=m1.empno and e1.deptno=d1.deptno;
&ndash;查询员工编号 姓名 部门 经理编号 姓名 部门
select e1.empno,e1.ename,d1.dname,e1.mgr,m1.ename,d2.dname from emp e1,emp m1,dept d1,dept d2 where e1.mgr=m1.empno and e1.deptno=d1.deptno and m1.deptno=d2.deptno</p><p>&ndash;查询出每个雇员的姓名，工资，部门名称，工资在公司的等级及其领导的姓名，领导的工资，以及领导所对应的等级
select DISTINCT e.ENAME,e.SAL,d.DNAME,g.GRADE,s.ENAME mgr_name,g2.grade m_grade from emp e,dept d,SALGRADE g,emp s,salgrade g2 where e.DEPTNO=d.DEPTNO and e.SAL BETWEEN g.LOSAL and g.HISAL and s.EMPNO=e.MGR and s.sal between g2.losal and g2.hisal</p><p>外连接: left/right join on
<strong>左外连接</strong>: 就是在等值连接的基础上加上左主表中的未匹配数据
右外连接:等值连接的基础上加上被右连接表的不匹配数据</p><p>全外连接 full join on</p><p>全外连接是在等值连接的基础上将左表和右表的未匹配数据都加上</p><p>select*from emp e left outer join dept d on e.deptno=d.deptno &ndash;左外连接</p><h2 id=子查询嵌套>子查询/嵌套:
<a class=header-anchor href=#%e5%ad%90%e6%9f%a5%e8%af%a2%e5%b5%8c%e5%a5%97></a></h2><p>一个查询语句嵌套另一个查询内容 解决复杂查询单行子查询出来的结果只有单个值 > >= = > >= != 多行子查询出来的结果有多行 in any all exists</p><p>&ndash;查询最高工资的员工信息 先查信息 where条件为最大的
select*from emp where sal=(select max(sal)from emp)&ndash;7839</p><h3 id=单行子查询子查询出来的结果只有一行>单行子查询:子查询出来的结果只有一行
<a class=header-anchor href=#%e5%8d%95%e8%a1%8c%e5%ad%90%e6%9f%a5%e8%af%a2%e5%ad%90%e6%9f%a5%e8%af%a2%e5%87%ba%e6%9d%a5%e7%9a%84%e7%bb%93%e6%9e%9c%e5%8f%aa%e6%9c%89%e4%b8%80%e8%a1%8c></a></h3><p>&ndash;查询出比员工编号7654的工资高 同时和7788号从事相同工作的员工信息 先查员工信息再条件查工资比7654高同时..
select*from emp where sal>(select sal from emp where empno=7654) and job=(select job from emp where empno=7788)</p><p>查询 每个部门最低工资的员工信息和他所在部门信息 先查部门..
select deptno,min(sal) minsal from emp group by deptno&ndash;先查各部门最低工资的分组再查每个部门最低的员工 连接他所在的部门
select*from emp e1,(select deptno,min(sal)minsal from emp GROUP BY deptno)t1, dept d1 where e1.DEPTNO =t1.deptno and e1.sal=t1.minsal and e1.deptno=d1.deptno;</p><h3 id=多行子查询-in--not-in--any--all-exists>多行子查询 in , not in , any , all, exists,
<a class=header-anchor href=#%e5%a4%9a%e8%a1%8c%e5%ad%90%e6%9f%a5%e8%af%a2-in--not-in--any--all-exists></a></h3><p>in表示值是否存在子查询结果集中 not in反之 any任意 是表示子查询结果中任意一个，all表示子查询结果中的所有</p><p>&ndash; 查询出比10号部门任意员工薪资高的员工信息</p><p>select sal from emp where deptno = 10; &ndash;先查10号部门里任意员工工资 再以条件 查整个表
select * from emp where sal >any(select sal from emp where deptno = 10);</p><p>&ndash;查询所有是领导的员工信息 编号是 mgr里的 去重
select<em>from emp where empno in(select distinct mgr from emp)
select</em>from emp where empno =any(select distinct mgr from emp)
&ndash;查询所有不是领导的员工信息 有空值is not null
select<em>from emp where empno not in(select distinct mgr from emp where mgr is not null)
select</em>from emp where empno !=all(select distinct mgr from emp where mgr is not null)</p><h3 id=exists查询语句-存在如果查询语句有结果则返回true否则返回false>exists(查询语句): 存在如果查询语句,有结果,则返回true,否则返回false
<a class=header-anchor href=#exists%e6%9f%a5%e8%af%a2%e8%af%ad%e5%8f%a5-%e5%ad%98%e5%9c%a8%e5%a6%82%e6%9e%9c%e6%9f%a5%e8%af%a2%e8%af%ad%e5%8f%a5%e6%9c%89%e7%bb%93%e6%9e%9c%e5%88%99%e8%bf%94%e5%9b%9etrue%e5%90%a6%e5%88%99%e8%bf%94%e5%9b%9efalse></a></h3><p>&ndash;如果有7339编号存在 就查询所有
select * from emp where exists(select * from emp where empno=7369);</p><p>&ndash; 查询有员工的部门信息
select * from dept d where exists(select * from emp e where e.deptno=d.deptno);
&ndash; 关联子查询和非关联子查询</p><p>关联子查询: 子查询依赖外层查询
先执行外层查询,然后再执行内层查询
非关联子查询: 子查询可以单独执行,不依赖外层查询条件
先执行子查询,再执行外层查询,内层子查询只执行一次<br>按照行划分: 单行子查询多行子查询</p><pre><code>按照出现的位置划分:
      select 
      from   当作一张表处理,需要取别名
      where 
      having   
</code></pre><h3 id=select-后面接子查询>select 后面接子查询:
<a class=header-anchor href=#select-%e5%90%8e%e9%9d%a2%e6%8e%a5%e5%ad%90%e6%9f%a5%e8%af%a2></a></h3><p>select ename,deptno from emp;&mdash;- 查询员工姓名和部门名称 下面再接子查询
select ename,(select dname from dept d where d.deptno=e.deptno) from emp e;</p><p>&ndash; from后面接子查询 ( 注意: 子查询当作表处理 子查询一定要取一个别名)</p><p>薪资高于10号部门平均工资的所有员工信息having后面接子查询</p><p>select deptno,avg(sal) from emp group by deptno having avg(sal)>(select avg(sal) from emp where deptno=30);</p><h3 id=练习一-找到员工表中工资最高的前三名只要前三条>练习一: 找到员工表中工资最高的前三名(只要前三条)
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0%e4%b8%80-%e6%89%be%e5%88%b0%e5%91%98%e5%b7%a5%e8%a1%a8%e4%b8%ad%e5%b7%a5%e8%b5%84%e6%9c%80%e9%ab%98%e7%9a%84%e5%89%8d%e4%b8%89%e5%90%8d%e5%8f%aa%e8%a6%81%e5%89%8d%e4%b8%89%e6%9d%a1></a></h3><p>select * from emp order by sal desc;
rownum : 伪列 ,代表的是行号</p><p>rownum 默认起始值是 1 ,每查询出一条记录, rownum++<br>rownum :主要运用在分页查询</p><p>&ndash; 查询行号大于3的所有记录</p><p>select rownum,emp.* from emp where rownum > 3;</p><p>&ndash; 查询行号小于3的所有记录
select rownum,emp.* from emp where rownum &lt; 3;</p><p>select rownum,emp.* from emp where rownum >=1;</p><p>&ndash; rownum没有顺序了
/*
from .. where &mldr; group by .. having .. select ..rownum.. order by
<em>/
select emp.</em> from emp order by sal desc;</p><p>select rownum,tt.* from (select emp.* from emp order by sal desc) tt;</p><p>&ndash; 查询工资最高的前三名
select rownum,tt.* from (select emp.* from emp order by sal desc) tt where rownum &lt;=3;</p><h2 id=练习二找到员工表中薪水大于本部门平均薪水的员工>练习二:找到员工表中薪水大于本部门平均薪水的员工
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0%e4%ba%8c%e6%89%be%e5%88%b0%e5%91%98%e5%b7%a5%e8%a1%a8%e4%b8%ad%e8%96%aa%e6%b0%b4%e5%a4%a7%e4%ba%8e%e6%9c%ac%e9%83%a8%e9%97%a8%e5%b9%b3%e5%9d%87%e8%96%aa%e6%b0%b4%e7%9a%84%e5%91%98%e5%b7%a5></a></h2><p>&ndash; 1.分组统计每个部门的平均薪水
select deptno , avg(sal) avgsal from emp group by deptno;
&ndash; 2. 连接查询结果
select * from emp e,(select deptno , avg(sal) avgsal from emp group by deptno) tt
where e.deptno = tt.deptno and e.sal > tt.avgsal;</p><p>练习三:统计每年入职员工的个数
select hiredate from emp;</p><p>&ndash; 只显示年
select to_char(hiredate,&lsquo;yyyy&rsquo;) from emp;</p><p>&ndash; 分组统计每年入职个数
select to_char(hiredate,&lsquo;yyyy&rsquo;) yy,count(1) cc from emp group by to_char(hiredate,&lsquo;yyyy&rsquo;);</p><p>&ndash; 1. 先将1987竖起来
select case yy when &lsquo;1987&rsquo; then cc end
from
(select to_char(hiredate,&lsquo;yyyy&rsquo;) yy,count(1) cc from emp group by to_char(hiredate,&lsquo;yyyy&rsquo;)) tt;</p><p>&ndash; 2. 去除1987中空值
select sum(case yy when &lsquo;1987&rsquo; then cc end) &ldquo;1987&rdquo;
from
(select to_char(hiredate,&lsquo;yyyy&rsquo;) yy,count(1) cc from emp group by to_char(hiredate,&lsquo;yyyy&rsquo;)) tt;</p><p>&ndash; 3. 计算Total
select sum(cc) &ldquo;TOTAL&rdquo;
from
(select to_char(hiredate,&lsquo;yyyy&rsquo;) yy,count(1) cc from emp group by to_char(hiredate,&lsquo;yyyy&rsquo;)) tt;</p><p>&ndash; 4. 合并1987和total</p><p>select sum(cc) &ldquo;TOTAL&rdquo;,</p><p>sum(case yy when &lsquo;1987&rsquo; then cc end) &ldquo;1987&rdquo; from</p><p>(select to_char(hiredate,&lsquo;yyyy&rsquo;) yy,count(1) cc from emp group by to_char(hiredate,&lsquo;yyyy&rsquo;)) tt;</p><p>&ndash; 5. 最终结果
select sum(cc) &ldquo;TOTAL&rdquo;,</p><p>sum(case yy when &lsquo;1987&rsquo; then cc end) &ldquo;1987&rdquo;,
sum(case yy when &lsquo;1980&rsquo; then cc end) &ldquo;1980&rdquo;,
sum(case yy when &lsquo;1981&rsquo; then cc end) &ldquo;1981&rdquo;,
sum(case yy when &lsquo;1982&rsquo; then cc end) &ldquo;1982&rdquo;</p><p>from</p><p>(select to_char(hiredate,&lsquo;yyyy&rsquo;) yy,count(1) cc from emp group by to_char(hiredate,&lsquo;yyyy&rsquo;)) tt;</p><h2 id=rownum-和rowid>rownum 和rowid
<a class=header-anchor href=#rownum-%e5%92%8crowid></a></h2><p>&ndash; 查询第5-10条记录
&ndash; 1.查询前10条记录
select rownum line,emp.* from emp where rownum &lt;=10;</p><p>&ndash; 2. 查询行号>=5的记录
select * from (select rownum line,emp.* from emp where rownum &lt;=10) tt where line >=5;</p><p>rowid: 伪列,代表的每行记录在磁盘中存放的真实的物理地址rowid,用在索引查询</p><p>select rowid,emp.* from emp where deptno>20 order by sal;</p><h2 id=集合运算-并集交集差集>集合运算: 并集,交集,差集
<a class=header-anchor href=#%e9%9b%86%e5%90%88%e8%bf%90%e7%ae%97-%e5%b9%b6%e9%9b%86%e4%ba%a4%e9%9b%86%e5%b7%ae%e9%9b%86></a></h2><p>员工表 , 经理表
工资,婚否 工资,婚否</p><p>所有员工的婚否</p><p>工资大于1500 或者 20号部门下的员工&ndash; 并集</p><p>select * from emp where sal > 1500
union
select * from emp where deptno=20;</p><p>&ndash; 工资大于1500 并且 20号部门下的员工&ndash;交集
select * from emp where sal > 1500
intersect
select * from emp where deptno=20;</p><p>&ndash; 工资大于1500 并且不是20号部门下的员工&ndash;差集
select * from emp where sal > 1500
minus
select * from emp where deptno=20;</p><p>&ndash; 集合运算注意事项
/*
1.列的数量要一致 如果不足,可以用null补齐
2.列的类型要保持一致
3.列的顺序要一致</p><p>*/select ename,sal from emp where sal > 1500
union
select ename,null from emp where deptno = 20;</p><h2 id=表空间>表空间
<a class=header-anchor href=#%e8%a1%a8%e7%a9%ba%e9%97%b4></a></h2><p>数据库 &mdash;> 实例Orcl &mdash;> 表空间(用户) &mdash;> 数据文件</p><p>地球 &mdash;> China &mdash;> 省份(用户) &mdash;> 土地</p><p>创建表空间 2创建用户 root3 用户去建表</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>       create tablespace 表空间的名称
</span></span><span class=line><span class=cl>       datafile &#39;存放的未知&#39;
</span></span><span class=line><span class=cl>       size   初始大小
</span></span><span class=line><span class=cl>       autoextend on
</span></span><span class=line><span class=cl>       next  每次增长多少</span></span></code></pre></td></tr></table></div></div><h3 id=1创建表空间>1创建表空间
<a class=header-anchor href=#1%e5%88%9b%e5%bb%ba%e8%a1%a8%e7%a9%ba%e9%97%b4></a></h3><p>先需要登录管理员帐号 system 密码root</p><p>create tablespace shenzhen
datafile &lsquo;c:\shenzhen.dbf&rsquo;
size 100m
autoextend on
next 10m;</p><p>&ndash; 删除表空间drop tablespace shenzhen;</p><h3 id=2创建用户>2创建用户
<a class=header-anchor href=#2%e5%88%9b%e5%bb%ba%e7%94%a8%e6%88%b7></a></h3><p>create user 用户名 identified by 密码 default tablespace 表空间名称<br>*/
create user zhangsan
identified by zs408
default tablespace shenzhen;</p><h3 id=3用户授权>3用户授权
<a class=header-anchor href=#3%e7%94%a8%e6%88%b7%e6%8e%88%e6%9d%83></a></h3><p>grant create session to zhangsan;</p><p>revoke create session from zhangsan;</p><p>&ndash; 授予DBA(数据库管理员)角色,拥有权限
grant dba to zhangsan;</p><p>select * from scott.emp;
update scott.emp set ename=&lsquo;ALLEN&rsquo; where ename = &lsquo;ALL%EN&rsquo;;</p><h3 id=4创建表>4创建表
<a class=header-anchor href=#4%e5%88%9b%e5%bb%ba%e8%a1%a8></a></h3><p>格式:</p><p>create table 表名(字段 字段类型 [约束],字段 字段类型 [约束]
);</p><p>char(最大长度) : 固定长度字符串 char(10) hello , 占10个, 不满10 用空格补满</p><p>字段类型:</p><p>varchar2(最大长度) : 可变长度字符串varchar2(10) hello , 占5个</p><p>number(总长度,小数位数)</p><p>date : 年月日时分秒</p><p>timestamp : 时间戳 , 精确到毫秒</p><p>Long : 大字符串类型, 最大支持保存2G</p><p>CLOB : Character Large Object 字符串大对象 最大4G</p><p>BLOB : Binary Large Object 二进制大对象 4G</p><p>&ndash; 创建表
create table person(
name varchar2(20),
age number,
salary number(10,2)
);</p><p>还可以&ndash; 使用子查询创建表, 相当于复制表,包含了表结构和表数据,但是不包含约束
create table emp as select * from scott.emp;
select * from emp;</p><p>使用子查询创建表,只要表的结构 后面故意条件是没有的条件create table emp1 as select * from scott.emp where empno=1234567;
select * from emp1;</p><h3 id=修改表>修改表
<a class=header-anchor href=#%e4%bf%ae%e6%94%b9%e8%a1%a8></a></h3><p>&ndash; 修改表格式: 添加列add, 重定义列 modify, 修改列名 rename, 删除列 drop, 修改表名,rename</p><p>alter table person add ( phone varchar2(11),address varchar2(20) );</p><p>&ndash; 重定义列 modify
alter table person modify phone number;</p><p>&ndash; 修改列名 rename
alter table person rename column phone to mobile;</p><p>&ndash; 删除列名 drop
alter table person drop column mobile;</p><p>&ndash; 修改表名
rename person to person1;</p><h3 id=删除表-drop-table-person1>删除表 drop table person1;
<a class=header-anchor href=#%e5%88%a0%e9%99%a4%e8%a1%a8-drop-table-person1></a></h3><h3 id=表的约束>表的约束
<a class=header-anchor href=#%e8%a1%a8%e7%9a%84%e7%ba%a6%e6%9d%9f></a></h3><p>表的五大约束:</p><pre><code> 主键约束: primary key , 非空唯一
 唯一约束: unique , 唯一可以为空
 非空约束: not null, 不能为空
 检查约束: check(条件),mysql中可以写,但是mysql直接忽略掉
 
 外键约束: foreign key , 约束从表中的记录必须参考主表中的记录
</code></pre><p>单表约束</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5>5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6>6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7>7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8>8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>create</span> <span class=n>table</span> <span class=n>person</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>pid</span> <span class=n>number</span> <span class=n>primary</span> <span class=n>key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=n>varchar2</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span> <span class=n>unique</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>age</span> <span class=n>number</span> <span class=ow>not</span> <span class=n>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>sex</span> <span class=n>varchar2</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span> <span class=n>check</span><span class=p>(</span><span class=n>sex</span> <span class=ow>in</span><span class=p>(</span><span class=s1>&#39;男&#39;</span><span class=p>,</span><span class=s1>&#39;女&#39;</span><span class=p>,</span><span class=s1>&#39;妖&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=n>male</span><span class=p>,</span><span class=n>female</span><span class=p>,</span><span class=n>ladyboy</span>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>person</span> <span class=n>values</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;zhangsan&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;妖&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>person</span> <span class=n>values</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=s1>&#39;lisi&#39;</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;妖&#39;</span><span class=p>);</span></span></span></code></pre></td></tr></table></div></div><p>外键约束 外键约束: foreign key , 约束从表中的记录必须参考主表中的记录 主表是商品类型 从表是商品表 有主键是外键的是主表</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23>23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24>24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25>25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26>26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27>27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28>28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29>29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30>30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31>31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>create</span> <span class=n>table</span> <span class=n>category</span><span class=p>(</span>
</span></span><span class=line><span class=cl>       <span class=n>cid</span> <span class=n>number</span> <span class=n>primary</span> <span class=n>key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=n>cname</span> <span class=n>varchar2</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=n>table</span> <span class=n>product</span><span class=p>(</span>
</span></span><span class=line><span class=cl>       <span class=n>pid</span> <span class=n>number</span> <span class=n>primary</span> <span class=n>key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=n>pname</span> <span class=n>varchar2</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>       <span class=n>cno</span> <span class=n>number</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>category</span> <span class=n>values</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;手机数码&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>product</span> <span class=n>values</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span><span class=s1>&#39;锤子&#39;</span><span class=p>,</span><span class=mi>11</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>truncate</span> <span class=n>table</span> <span class=n>product</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>添加外键约束</span>
</span></span><span class=line><span class=cl><span class=n>alter</span> <span class=n>table</span> <span class=n>product</span> <span class=n>add</span> <span class=n>foreign</span> <span class=n>key</span><span class=p>(</span><span class=n>cno</span><span class=p>)</span> <span class=n>references</span> <span class=n>category</span><span class=p>(</span><span class=n>cid</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>product</span> <span class=n>values</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span><span class=s1>&#39;锤子&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>删除主表</span><span class=p>:</span> <span class=err>先取消外键约束</span><span class=p>,</span><span class=err>再删除自己</span>
</span></span><span class=line><span class=cl><span class=n>drop</span> <span class=n>table</span> <span class=n>category</span> <span class=n>cascade</span> <span class=n>constraint</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>级联删除</span><span class=p>,</span><span class=err>添加外键约束</span>
</span></span><span class=line><span class=cl><span class=o>--</span> 
</span></span><span class=line><span class=cl><span class=n>alter</span> <span class=n>table</span> <span class=n>product</span> <span class=n>add</span> <span class=n>foreign</span> <span class=n>key</span><span class=p>(</span><span class=n>cno</span><span class=p>)</span> <span class=n>references</span> <span class=n>category</span><span class=p>(</span><span class=n>cid</span><span class=p>)</span> <span class=n>on</span> <span class=n>delete</span> <span class=n>cascade</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>删除</span><span class=n>category主表中的记录</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>级联删除</span><span class=p>:</span> <span class=err>先去从表中查看有没有关联的数据</span><span class=p>,</span><span class=err>如果有</span><span class=p>,</span><span class=err>则先删除从表中的记录</span><span class=p>,</span><span class=err>再删除主表中记录</span>
</span></span><span class=line><span class=cl><span class=n>delete</span> <span class=n>from</span> <span class=n>category</span> <span class=n>where</span> <span class=n>cid</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=o>*</span> <span class=n>from</span> <span class=n>category</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=o>*</span> <span class=n>from</span> <span class=n>product</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h2 id=增删改表操作>增删改表操作
<a class=header-anchor href=#%e5%a2%9e%e5%88%a0%e6%94%b9%e8%a1%a8%e6%93%8d%e4%bd%9c></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>       插入数据 insert into 
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 使用子查询插入数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 将10号部门的所有员工信息插入到emp1中
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>emp1</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>scott</span><span class=p>.</span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>deptno</span><span class=o>=</span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>      删除所有数据:
</span></span></span><span class=line><span class=cl><span class=cm>      delete     和      truncate
</span></span></span><span class=line><span class=cl><span class=cm>      逐条删除数据       先删除再创建表
</span></span></span><span class=line><span class=cl><span class=cm>      DML                 DDL
</span></span></span><span class=line><span class=cl><span class=cm>      支持事务           不支持事务
</span></span></span><span class=line><span class=cl><span class=cm>                         效率高
</span></span></span><span class=line><span class=cl><span class=cm>*/</span></span></span></code></pre></td></tr></table></div></div><h2 id=通过navicat-premium-实现oracle基本操作>通过Navicat Premium 实现Oracle基本操作
<a class=header-anchor href=#%e9%80%9a%e8%bf%87navicat-premium-%e5%ae%9e%e7%8e%b0oracle%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c></a></h2><p>system root，连接后。我们点击面板上的“其他”下的选项“表空间->新建表空间->弹出设置界面</p><p>表空间类型不要改 名 随便填.DBF 大小100选m 路径是服务器上的地址 自动扩展on 下一个大小20M 其它不要填 保存 服务器对应路径就有个文件了</p><p>新建用户:点击面板上的“用户”选项->新建用户->设置界面</p><p>用户名”处填写的用户名字母一定是<strong>大写</strong>,密码设置,默认表空间”处，我们选择理科前面我们新建的表空间 临时表空间选temp</p><p>“成员属于”中我们选择了“DBA”授予和默认就可以保存了。其实对于一般的用户，我们只需赋予connect、resource、服务器权限create view这几个权限即可。但是这里我们为了演示方便就直接选择“DBA”就可以保存了..</p><h2 id=事务>事务
<a class=header-anchor href=#%e4%ba%8b%e5%8a%a1></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span><span class=lnt id=hl-8-31><a class=lnlinks href=#hl-8-31>31</a>
</span><span class=lnt id=hl-8-32><a class=lnlinks href=#hl-8-32>32</a>
</span><span class=lnt id=hl-8-33><a class=lnlinks href=#hl-8-33>33</a>
</span><span class=lnt id=hl-8-34><a class=lnlinks href=#hl-8-34>34</a>
</span><span class=lnt id=hl-8-35><a class=lnlinks href=#hl-8-35>35</a>
</span><span class=lnt id=hl-8-36><a class=lnlinks href=#hl-8-36>36</a>
</span><span class=lnt id=hl-8-37><a class=lnlinks href=#hl-8-37>37</a>
</span><span class=lnt id=hl-8-38><a class=lnlinks href=#hl-8-38>38</a>
</span><span class=lnt id=hl-8-39><a class=lnlinks href=#hl-8-39>39</a>
</span><span class=lnt id=hl-8-40><a class=lnlinks href=#hl-8-40>40</a>
</span><span class=lnt id=hl-8-41><a class=lnlinks href=#hl-8-41>41</a>
</span><span class=lnt id=hl-8-42><a class=lnlinks href=#hl-8-42>42</a>
</span><span class=lnt id=hl-8-43><a class=lnlinks href=#hl-8-43>43</a>
</span><span class=lnt id=hl-8-44><a class=lnlinks href=#hl-8-44>44</a>
</span><span class=lnt id=hl-8-45><a class=lnlinks href=#hl-8-45>45</a>
</span><span class=lnt id=hl-8-46><a class=lnlinks href=#hl-8-46>46</a>
</span><span class=lnt id=hl-8-47><a class=lnlinks href=#hl-8-47>47</a>
</span><span class=lnt id=hl-8-48><a class=lnlinks href=#hl-8-48>48</a>
</span><span class=lnt id=hl-8-49><a class=lnlinks href=#hl-8-49>49</a>
</span><span class=lnt id=hl-8-50><a class=lnlinks href=#hl-8-50>50</a>
</span><span class=lnt id=hl-8-51><a class=lnlinks href=#hl-8-51>51</a>
</span><span class=lnt id=hl-8-52><a class=lnlinks href=#hl-8-52>52</a>
</span><span class=lnt id=hl-8-53><a class=lnlinks href=#hl-8-53>53</a>
</span><span class=lnt id=hl-8-54><a class=lnlinks href=#hl-8-54>54</a>
</span><span class=lnt id=hl-8-55><a class=lnlinks href=#hl-8-55>55</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>   事务: 一组操作,要么都成功,要么都失败
</span></span></span><span class=line><span class=cl><span class=cm>   
</span></span></span><span class=line><span class=cl><span class=cm>   事务特型:
</span></span></span><span class=line><span class=cl><span class=cm>       原子性
</span></span></span><span class=line><span class=cl><span class=cm>       一致性
</span></span></span><span class=line><span class=cl><span class=cm>       隔离性
</span></span></span><span class=line><span class=cl><span class=cm>       持久性
</span></span></span><span class=line><span class=cl><span class=cm>       
</span></span></span><span class=line><span class=cl><span class=cm>   不考虑隔离级别的问题：　脏读，　虚读／幻读，不可重复读
</span></span></span><span class=line><span class=cl><span class=cm>   
</span></span></span><span class=line><span class=cl><span class=cm>   mysql隔离级别:
</span></span></span><span class=line><span class=cl><span class=cm>        READ UNCOMMITTED 读取未提交  脏读，　虚读／幻读，不可重复读
</span></span></span><span class=line><span class=cl><span class=cm>        READ COMMITTED   读取已提交, 虚读／幻读，不可重复读
</span></span></span><span class=line><span class=cl><span class=cm>        REPEATABLE READ  可重复读, 虚读／幻读，
</span></span></span><span class=line><span class=cl><span class=cm>        SERIALIAZABLE   串行化 
</span></span></span><span class=line><span class=cl><span class=cm>        
</span></span></span><span class=line><span class=cl><span class=cm>  Oracle隔离级别:
</span></span></span><span class=line><span class=cl><span class=cm>        READ COMMITTED (默认)
</span></span></span><span class=line><span class=cl><span class=cm>        SERIALIAZABLE
</span></span></span><span class=line><span class=cl><span class=cm>        READ ONLY 
</span></span></span><span class=line><span class=cl><span class=cm>        
</span></span></span><span class=line><span class=cl><span class=cm>   事务回滚点/保存点
</span></span></span><span class=line><span class=cl><span class=cm>        savepoint 保存点的名称
</span></span></span><span class=line><span class=cl><span class=cm>        
</span></span></span><span class=line><span class=cl><span class=cm>        rollback to 保存点  
</span></span></span><span class=line><span class=cl><span class=cm>        
</span></span></span><span class=line><span class=cl><span class=cm>    主要使用场景: 数据迁移的时候, 1000万  100万提交一次, 50万的时候,            
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>lou</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>f</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- PLSQLB编程
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 声明部分
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 业务逻辑
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>lou</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>lou</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>lou</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>savepoint</span><span class=w> </span><span class=n>aa</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>lou</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>lou</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>lou</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>commit</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>exception</span><span class=w> </span><span class=c1>-- 捕获异常
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>when</span><span class=w> </span><span class=n>others</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=c1>-- 处理异常
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>     </span><span class=k>rollback</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>aa</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=k>commit</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>lou</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h2 id=视图对查询结果的封装>视图:对查询结果的封装
<a class=header-anchor href=#%e8%a7%86%e5%9b%be%e5%af%b9%e6%9f%a5%e8%af%a2%e7%bb%93%e6%9e%9c%e7%9a%84%e5%b0%81%e8%a3%85></a></h2><p>语法: create [or replace] view 视图名称 as 查询语句</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a>
</span><span class=lnt id=hl-9-27><a class=lnlinks href=#hl-9-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>   视图view: 
</span></span></span><span class=line><span class=cl><span class=cm>       实际是对查询结果的封装,视图本身不存储任何数据,所有的数据都存放在原来的表中
</span></span></span><span class=line><span class=cl><span class=cm>       作用:
</span></span></span><span class=line><span class=cl><span class=cm>           封装复杂查询语句
</span></span></span><span class=line><span class=cl><span class=cm>           屏蔽表中的细节
</span></span></span><span class=line><span class=cl><span class=cm>           
</span></span></span><span class=line><span class=cl><span class=cm>       语法:
</span></span></span><span class=line><span class=cl><span class=cm>           create [or replace] view 视图名称 as 查询语句 [with read only]
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 封装员工表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>replace</span><span class=w> </span><span class=k>view</span><span class=w> </span><span class=n>view_test1</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=n>ename</span><span class=p>,</span><span class=n>job</span><span class=p>,</span><span class=n>mgr</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>view_test1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 同义词
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=n>synonym</span><span class=w> </span><span class=n>yuangong</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>view_test1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>yuangong</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 通过视图去修改数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>update</span><span class=w> </span><span class=n>view_test1</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>ename</span><span class=o>=</span><span class=s1>&#39;SMITHaaaa&#39;</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>ename</span><span class=o>=</span><span class=s1>&#39;SMITH&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 创建只读视图
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>replace</span><span class=w> </span><span class=k>view</span><span class=w> </span><span class=n>view_test2</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=n>ename</span><span class=p>,</span><span class=n>job</span><span class=p>,</span><span class=n>mgr</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=k>read</span><span class=w> </span><span class=k>only</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>update</span><span class=w> </span><span class=n>view_test2</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>ename</span><span class=o>=</span><span class=s1>&#39;SMITHaaaa&#39;</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>ename</span><span class=o>=</span><span class=s1>&#39;SMITH&#39;</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h2 id=序列-生成自增的编号>序列 生成自增的编号
<a class=header-anchor href=#%e5%ba%8f%e5%88%97-%e7%94%9f%e6%88%90%e8%87%aa%e5%a2%9e%e7%9a%84%e7%bc%96%e5%8f%b7></a></h2><p>语法: create sequence 序列的名称</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22>22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23>23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24>24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25>25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26>26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27>27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28>28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29>29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30>30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31>31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32>32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33>33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34>34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35>35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36>36</a>
</span><span class=lnt id=hl-10-37><a class=lnlinks href=#hl-10-37>37</a>
</span><span class=lnt id=hl-10-38><a class=lnlinks href=#hl-10-38>38</a>
</span><span class=lnt id=hl-10-39><a class=lnlinks href=#hl-10-39>39</a>
</span><span class=lnt id=hl-10-40><a class=lnlinks href=#hl-10-40>40</a>
</span><span class=lnt id=hl-10-41><a class=lnlinks href=#hl-10-41>41</a>
</span><span class=lnt id=hl-10-42><a class=lnlinks href=#hl-10-42>42</a>
</span><span class=lnt id=hl-10-43><a class=lnlinks href=#hl-10-43>43</a>
</span><span class=lnt id=hl-10-44><a class=lnlinks href=#hl-10-44>44</a>
</span><span class=lnt id=hl-10-45><a class=lnlinks href=#hl-10-45>45</a>
</span><span class=lnt id=hl-10-46><a class=lnlinks href=#hl-10-46>46</a>
</span><span class=lnt id=hl-10-47><a class=lnlinks href=#hl-10-47>47</a>
</span><span class=lnt id=hl-10-48><a class=lnlinks href=#hl-10-48>48</a>
</span><span class=lnt id=hl-10-49><a class=lnlinks href=#hl-10-49>49</a>
</span><span class=lnt id=hl-10-50><a class=lnlinks href=#hl-10-50>50</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>    序列: 
</span></span></span><span class=line><span class=cl><span class=cm>        1,2,3,4,5,6,7
</span></span></span><span class=line><span class=cl><span class=cm>    模拟类似auto_increment作用
</span></span></span><span class=line><span class=cl><span class=cm>    作用: Oracle中主要是用来生成自增的编号 
</span></span></span><span class=line><span class=cl><span class=cm>    
</span></span></span><span class=line><span class=cl><span class=cm>    语法:
</span></span></span><span class=line><span class=cl><span class=cm>        create sequence 序列的名称
</span></span></span><span class=line><span class=cl><span class=cm>        start with 从几开始
</span></span></span><span class=line><span class=cl><span class=cm>        incrementby 每次增长多少
</span></span></span><span class=line><span class=cl><span class=cm>        minvalue | nominvalue
</span></span></span><span class=line><span class=cl><span class=cm>        maxvalue | nomaxvalue
</span></span></span><span class=line><span class=cl><span class=cm>        cycle | nocycle
</span></span></span><span class=line><span class=cl><span class=cm>        cache n 缓存
</span></span></span><span class=line><span class=cl><span class=cm>          
</span></span></span><span class=line><span class=cl><span class=cm>        cache 5
</span></span></span><span class=line><span class=cl><span class=cm>              1,2,3,4,5
</span></span></span><span class=line><span class=cl><span class=cm>                        6,7,8,9,10 
</span></span></span><span class=line><span class=cl><span class=cm>                        
</span></span></span><span class=line><span class=cl><span class=cm>      序列的属性:
</span></span></span><span class=line><span class=cl><span class=cm>          currval : 当前值 , 必须是调用过一次nextval之后
</span></span></span><span class=line><span class=cl><span class=cm>          nextval  : 下一个值  
</span></span></span><span class=line><span class=cl><span class=cm>          
</span></span></span><span class=line><span class=cl><span class=cm>      注意: 序列中的数,一旦取过了, 无论回滚还是异常,都是永不回头的向下递增                
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 1,3,5,7,9,1,3,5,7,9.....
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=n>sequence</span><span class=w> </span><span class=n>seq_test1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>start</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>increment</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=mi>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>minvalue</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>maxvalue</span><span class=w> </span><span class=mi>9</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>cycle</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>cache</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 获取当前值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>seq_test1</span><span class=p>.</span><span class=n>currval</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>dual</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 获取下一个值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>select</span><span class=w> </span><span class=n>seq_test1</span><span class=p>.</span><span class=n>nextval</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>dual</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 通常创建序列的写法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=n>sequence</span><span class=w> </span><span class=n>seq_test2</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=n>seq_test2</span><span class=p>.</span><span class=n>nextval</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>dual</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>truncate</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>lou</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>lou</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>lou</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=n>seq_test2</span><span class=p>.</span><span class=n>nextval</span><span class=p>);</span></span></span></code></pre></td></tr></table></div></div><h2 id=索引-int_coll-索引后查询巨快>索引 int_coll 索引后查询巨快
<a class=header-anchor href=#%e7%b4%a2%e5%bc%95-int_coll-%e7%b4%a2%e5%bc%95%e5%90%8e%e6%9f%a5%e8%af%a2%e5%b7%a8%e5%bf%ab></a></h2><p>什么是索引: 一种已经排好序的数据结构 能够查询效率, 索引还可以提高排序效率</p><p>语法: create index 索引名称 on 表名(列名1,列名2&mldr;.);</p><p>主键约束: 自带唯一索引 唯一约束: 自带唯一索引</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25>25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26>26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27>27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28>28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29>29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30>30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31>31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32>32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>--</span> <span class=err>创建测试数据</span><span class=mi>500</span><span class=err>万</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>创建一张表</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=n>table</span> <span class=n>wbw</span><span class=p>(</span>
</span></span><span class=line><span class=cl>   <span class=n>c1</span> <span class=n>number</span> <span class=n>primary</span> <span class=n>key</span><span class=p>,</span>    
</span></span><span class=line><span class=cl>   <span class=n>c2</span> <span class=n>varchar2</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>   <span class=n>c3</span> <span class=n>varchar2</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>插入</span><span class=mi>500</span><span class=err>万条记录索引</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=n>sequence</span> <span class=n>seq_wbw</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=n>PLSQL中的循环</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>   <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=mf>1.</span><span class=o>.</span><span class=mi>5000000</span> <span class=n>loop</span>
</span></span><span class=line><span class=cl>     <span class=n>insert</span> <span class=n>into</span> <span class=n>wbw</span> <span class=n>values</span><span class=p>(</span><span class=n>seq_wbw</span><span class=o>.</span><span class=n>nextval</span><span class=p>,</span><span class=s1>&#39;c2:&#39;</span><span class=o>||</span><span class=n>i</span><span class=p>,</span><span class=s1>&#39;c3:&#39;</span><span class=o>||</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=n>end</span> <span class=n>loop</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>   <span class=n>commit</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=n>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=n>from</span> <span class=n>wbw</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>在没有创建索引的情况下</span> <span class=mf>6.489</span><span class=n>s</span>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=o>*</span> <span class=n>from</span> <span class=n>wbw</span> <span class=n>where</span> <span class=n>c2</span><span class=o>=</span><span class=s1>&#39;c2:4000000&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=mf>0.023</span>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=o>*</span> <span class=n>from</span> <span class=n>wbw</span> <span class=n>where</span> <span class=n>c1</span><span class=o>=</span><span class=mi>4000000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>创建索引</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=n>index</span> <span class=n>wbw_c2</span> <span class=n>on</span> <span class=n>wbw</span><span class=p>(</span><span class=n>c2</span><span class=p>);</span></span></span></code></pre></td></tr></table></div></div><h2 id=plsql编程>PLSQL编程
<a class=header-anchor href=#plsql%e7%bc%96%e7%a8%8b></a></h2><p>Procedure Language 实际上是Oracle对SQL语言的能力扩展,让SQL语言拥有了if条件判断,for循环处理</p><pre><code>declare -- 声明部分相当于语法:java-- class--- main
变量名  变量类型 := 初始值 
变量名  emp.sal%type; -- 引用类型的变量 知道具体的列
变量名 emp%rowtype;  -- 记录型变量  记录一行
变量名 number;
begin 
-- 业务逻辑
dbms_output.put_line('hello world !'); 相当于是java打印
end;
</code></pre><h3 id=基本语法>基本语法
<a class=header-anchor href=#%e5%9f%ba%e6%9c%ac%e8%af%ad%e6%b3%95></a></h3><pre><code>declare
i number :=5000;--先定义变量i并赋值
begin
  dbms_output.put_line('你好呀'||i);--打印结果是:你好呀5000
end;
  
declare
  vsal emp.sal%type;--先定义 引用类型的变量vsal 为具体列
begin
  select sal into vsal from emp where empno=7369;--给变量赋值 为查询结果编号7369的工资
 dbms_output.put_line(vsal);--打印vsal 是emp表里工资 条件是编号7369输出是:4600
end;

declare
  vrow emp%rowtype;--先定义 记录型变量vsal
begin
select * into vrow from emp where empno=7369;----给变量赋值 为编号是7369的一行记录
 dbms_output.put_line(vrow.empno||':'|| vrow.ename);--打印 7369:SMITH/史密斯
end;
</code></pre><h3 id=if条件判断>if条件判断
<a class=header-anchor href=#if%e6%9d%a1%e4%bb%b6%e5%88%a4%e6%96%ad></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>  if条件判断
</span></span></span><span class=line><span class=cl><span class=cm>     if 条件1 then
</span></span></span><span class=line><span class=cl><span class=cm>      elsif 条件2 then
</span></span></span><span class=line><span class=cl><span class=cm>      else
</span></span></span><span class=line><span class=cl><span class=cm>      end if;
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 根据不同年龄输出信息
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>age</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=p>:</span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=err>请输入</span><span class=p>;</span><span class=c1>--&amp;会弹出输入框 请输入 为输入名称输入的 为值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>if</span><span class=w> </span><span class=n>age</span><span class=o>&lt;=</span><span class=mi>18</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;未成年人&#39;</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>elsif</span><span class=w> </span><span class=n>age</span><span class=o>&gt;</span><span class=mi>18</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>age</span><span class=o>&lt;=</span><span class=mi>24</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;年轻人&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>elsif</span><span class=w> </span><span class=n>age</span><span class=o>&gt;</span><span class=mi>24</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>age</span><span class=o>&lt;</span><span class=mi>48</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;中年人&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>else</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;老年人&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>end</span><span class=w> </span><span class=k>if</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h3 id=三种循环>三种循环
<a class=header-anchor href=#%e4%b8%89%e7%a7%8d%e5%be%aa%e7%8e%af></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span><span class=lnt id=hl-13-23><a class=lnlinks href=#hl-13-23>23</a>
</span><span class=lnt id=hl-13-24><a class=lnlinks href=#hl-13-24>24</a>
</span><span class=lnt id=hl-13-25><a class=lnlinks href=#hl-13-25>25</a>
</span><span class=lnt id=hl-13-26><a class=lnlinks href=#hl-13-26>26</a>
</span><span class=lnt id=hl-13-27><a class=lnlinks href=#hl-13-27>27</a>
</span><span class=lnt id=hl-13-28><a class=lnlinks href=#hl-13-28>28</a>
</span><span class=lnt id=hl-13-29><a class=lnlinks href=#hl-13-29>29</a>
</span><span class=lnt id=hl-13-30><a class=lnlinks href=#hl-13-30>30</a>
</span><span class=lnt id=hl-13-31><a class=lnlinks href=#hl-13-31>31</a>
</span><span class=lnt id=hl-13-32><a class=lnlinks href=#hl-13-32>32</a>
</span><span class=lnt id=hl-13-33><a class=lnlinks href=#hl-13-33>33</a>
</span><span class=lnt id=hl-13-34><a class=lnlinks href=#hl-13-34>34</a>
</span><span class=lnt id=hl-13-35><a class=lnlinks href=#hl-13-35>35</a>
</span><span class=lnt id=hl-13-36><a class=lnlinks href=#hl-13-36>36</a>
</span><span class=lnt id=hl-13-37><a class=lnlinks href=#hl-13-37>37</a>
</span><span class=lnt id=hl-13-38><a class=lnlinks href=#hl-13-38>38</a>
</span><span class=lnt id=hl-13-39><a class=lnlinks href=#hl-13-39>39</a>
</span><span class=lnt id=hl-13-40><a class=lnlinks href=#hl-13-40>40</a>
</span><span class=lnt id=hl-13-41><a class=lnlinks href=#hl-13-41>41</a>
</span><span class=lnt id=hl-13-42><a class=lnlinks href=#hl-13-42>42</a>
</span><span class=lnt id=hl-13-43><a class=lnlinks href=#hl-13-43>43</a>
</span><span class=lnt id=hl-13-44><a class=lnlinks href=#hl-13-44>44</a>
</span><span class=lnt id=hl-13-45><a class=lnlinks href=#hl-13-45>45</a>
</span><span class=lnt id=hl-13-46><a class=lnlinks href=#hl-13-46>46</a>
</span><span class=lnt id=hl-13-47><a class=lnlinks href=#hl-13-47>47</a>
</span><span class=lnt id=hl-13-48><a class=lnlinks href=#hl-13-48>48</a>
</span><span class=lnt id=hl-13-49><a class=lnlinks href=#hl-13-49>49</a>
</span><span class=lnt id=hl-13-50><a class=lnlinks href=#hl-13-50>50</a>
</span><span class=lnt id=hl-13-51><a class=lnlinks href=#hl-13-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=err>三种循环语法</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>for循环</span><span class=p>:</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=err>变量名</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=err>起始值</span><span class=p>..</span><span class=err>结束值</span><span class=w>  </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>       
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>while循环语法</span><span class=p>:</span><span class=w>     </span><span class=n>while</span><span class=w> </span><span class=err>条件</span><span class=w> </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>exit循环语法</span><span class=p>:</span><span class=w>    </span><span class=n>exit</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=err>退出的条件</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=err>循环体</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 输出1-10
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=mi>1</span><span class=p>..</span><span class=mi>10</span><span class=w> </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 输出10-1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>for</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>reverse</span><span class=w> </span><span class=mi>1</span><span class=p>..</span><span class=mi>10</span><span class=w> </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 输出1-10
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>i</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=p>:</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=c1>--变量i赋值为1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>while</span><span class=w> </span><span class=n>i</span><span class=o>&lt;=</span><span class=mi>10</span><span class=w> </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>i</span><span class=w> </span><span class=p>:</span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>;</span><span class=c1>--i的变化为+1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 输出1-10
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>i</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=p>:</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>exit</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=n>i</span><span class=o>&gt;</span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>i</span><span class=w> </span><span class=p>:</span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h2 id=游标-是对查询结果集的封装>游标 是对查询结果集的封装
<a class=header-anchor href=#%e6%b8%b8%e6%a0%87-%e6%98%af%e5%af%b9%e6%9f%a5%e8%af%a2%e7%bb%93%e6%9e%9c%e9%9b%86%e7%9a%84%e5%b0%81%e8%a3%85></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26>26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27>27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28>28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29>29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30>30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31>31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32>32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33>33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34>34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35>35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36>36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37>37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38>38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39>39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40>40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41>41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42>42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43>43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44>44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45>45</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=w>   </span><span class=err>游标</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=err>光标</span><span class=o>/</span><span class=err>指针</span><span class=p>)</span><span class=w>  </span><span class=err>是对查询结果集的封装</span><span class=p>,</span><span class=w> </span><span class=err>相当于是</span><span class=n>jdbc中的ResultSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=err>语法</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=err>声明游标</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>cursor</span><span class=w> </span><span class=err>游标名</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=err>查询语句</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>cursor</span><span class=w> </span><span class=err>游标名</span><span class=p>(</span><span class=err>参数名</span><span class=w> </span><span class=err>参数类型</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=err>查询语句</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=err>参数名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=err>开发步骤</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=mi>1</span><span class=p>.</span><span class=err>打开游标</span><span class=w> </span><span class=k>open</span><span class=w> </span><span class=err>游标名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=mi>2</span><span class=p>.</span><span class=err>从游标中提取数据</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                   </span><span class=k>fetch</span><span class=w> </span><span class=err>游标名</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=err>变量</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                         </span><span class=err>游标名</span><span class=o>%</span><span class=n>notfound</span><span class=w>  </span><span class=err>没有数据</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                         </span><span class=err>游标名</span><span class=o>%</span><span class=k>found</span><span class=w>     </span><span class=err>找到数据</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=mi>3</span><span class=p>.</span><span class=err>关闭游标</span><span class=w> </span><span class=k>close</span><span class=w> </span><span class=err>游标名</span><span class=w>               
</span></span></span><span class=line><span class=cl><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 输出所有员工的信息
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>cursor</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=p>;</span><span class=w> </span><span class=c1>-- 声明游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>vrow</span><span class=w> </span><span class=n>emp</span><span class=o>%</span><span class=n>rowtype</span><span class=p>;</span><span class=c1>-- 声明变量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=k>open</span><span class=w> </span><span class=n>vemps</span><span class=p>;</span><span class=w> </span><span class=c1>--1. 打开游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>       </span><span class=n>loop</span><span class=w>  </span><span class=c1>--2. 提取数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=k>fetch</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vrow</span><span class=p>;</span><span class=c1>--赋值给vrow
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>         </span><span class=n>exit</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=n>vemps</span><span class=o>%</span><span class=n>notfound</span><span class=p>;</span><span class=c1>-- 判断无数据就退出查询
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>                </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;姓名:&#39;</span><span class=o>||</span><span class=n>vrow</span><span class=p>.</span><span class=n>ename</span><span class=o>||</span><span class=s1>&#39; 工资:&#39;</span><span class=o>||</span><span class=n>vrow</span><span class=p>.</span><span class=n>sal</span><span class=p>);</span><span class=c1>-- 打印数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>close</span><span class=w> </span><span class=n>vemps</span><span class=p>;</span><span class=w> </span><span class=c1>-- 关闭游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 输出指定部门的员工信息
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 声明游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=k>cursor</span><span class=w> </span><span class=n>vemps</span><span class=p>(</span><span class=n>vdeptno</span><span class=w> </span><span class=nb>number</span><span class=p>)</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>deptno</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vdeptno</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>vrow</span><span class=w> </span><span class=n>emp</span><span class=o>%</span><span class=n>rowtype</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 声明记录型变量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>open</span><span class=w> </span><span class=n>vemps</span><span class=p>(</span><span class=mi>20</span><span class=p>);</span><span class=c1>-- 1. 打开游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>loop</span><span class=c1>-- 2.循环遍历游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>      </span><span class=k>fetch</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vrow</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>exit</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=n>vemps</span><span class=o>%</span><span class=n>notfound</span><span class=p>;</span><span class=c1>--判断没有数据就退出
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>      </span><span class=c1>-- 打印数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>      </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;姓名:&#39;</span><span class=o>||</span><span class=n>vrow</span><span class=p>.</span><span class=n>ename</span><span class=o>||</span><span class=s1>&#39; 工资:&#39;</span><span class=o>||</span><span class=n>vrow</span><span class=p>.</span><span class=n>sal</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>close</span><span class=w> </span><span class=n>vemps</span><span class=p>;</span><span class=c1>-- 3. 关闭游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>end</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h2 id=游标练习>游标练习
<a class=header-anchor href=#%e6%b8%b8%e6%a0%87%e7%bb%83%e4%b9%a0></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15>15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16>16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17>17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18>18</a>
</span><span class=lnt id=hl-15-19><a class=lnlinks href=#hl-15-19>19</a>
</span><span class=lnt id=hl-15-20><a class=lnlinks href=#hl-15-20>20</a>
</span><span class=lnt id=hl-15-21><a class=lnlinks href=#hl-15-21>21</a>
</span><span class=lnt id=hl-15-22><a class=lnlinks href=#hl-15-22>22</a>
</span><span class=lnt id=hl-15-23><a class=lnlinks href=#hl-15-23>23</a>
</span><span class=lnt id=hl-15-24><a class=lnlinks href=#hl-15-24>24</a>
</span><span class=lnt id=hl-15-25><a class=lnlinks href=#hl-15-25>25</a>
</span><span class=lnt id=hl-15-26><a class=lnlinks href=#hl-15-26>26</a>
</span><span class=lnt id=hl-15-27><a class=lnlinks href=#hl-15-27>27</a>
</span><span class=lnt id=hl-15-28><a class=lnlinks href=#hl-15-28>28</a>
</span><span class=lnt id=hl-15-29><a class=lnlinks href=#hl-15-29>29</a>
</span><span class=lnt id=hl-15-30><a class=lnlinks href=#hl-15-30>30</a>
</span><span class=lnt id=hl-15-31><a class=lnlinks href=#hl-15-31>31</a>
</span><span class=lnt id=hl-15-32><a class=lnlinks href=#hl-15-32>32</a>
</span><span class=lnt id=hl-15-33><a class=lnlinks href=#hl-15-33>33</a>
</span><span class=lnt id=hl-15-34><a class=lnlinks href=#hl-15-34>34</a>
</span><span class=lnt id=hl-15-35><a class=lnlinks href=#hl-15-35>35</a>
</span><span class=lnt id=hl-15-36><a class=lnlinks href=#hl-15-36>36</a>
</span><span class=lnt id=hl-15-37><a class=lnlinks href=#hl-15-37>37</a>
</span><span class=lnt id=hl-15-38><a class=lnlinks href=#hl-15-38>38</a>
</span><span class=lnt id=hl-15-39><a class=lnlinks href=#hl-15-39>39</a>
</span><span class=lnt id=hl-15-40><a class=lnlinks href=#hl-15-40>40</a>
</span><span class=lnt id=hl-15-41><a class=lnlinks href=#hl-15-41>41</a>
</span><span class=lnt id=hl-15-42><a class=lnlinks href=#hl-15-42>42</a>
</span><span class=lnt id=hl-15-43><a class=lnlinks href=#hl-15-43>43</a>
</span><span class=lnt id=hl-15-44><a class=lnlinks href=#hl-15-44>44</a>
</span><span class=lnt id=hl-15-45><a class=lnlinks href=#hl-15-45>45</a>
</span><span class=lnt id=hl-15-46><a class=lnlinks href=#hl-15-46>46</a>
</span><span class=lnt id=hl-15-47><a class=lnlinks href=#hl-15-47>47</a>
</span><span class=lnt id=hl-15-48><a class=lnlinks href=#hl-15-48>48</a>
</span><span class=lnt id=hl-15-49><a class=lnlinks href=#hl-15-49>49</a>
</span><span class=lnt id=hl-15-50><a class=lnlinks href=#hl-15-50>50</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 按照职位涨工资,总裁涨1000 , 经理涨800 , 其他人涨400
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>   游标: 所有员工
</span></span></span><span class=line><span class=cl><span class=cm>   遍历所有员工
</span></span></span><span class=line><span class=cl><span class=cm>       根据职位涨工资    
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 声明游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>cursor</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=p>;</span><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 声明记录型变量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>vrow</span><span class=w> </span><span class=n>emp</span><span class=o>%</span><span class=n>rowtype</span><span class=p>;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 1.打开游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>open</span><span class=w> </span><span class=n>vemps</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 2.游标 循环提取数据给变量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=k>fetch</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vrow</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>exit</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=n>vemps</span><span class=o>%</span><span class=n>notfound</span><span class=p>;</span><span class=c1>--游标没有查询了才退出
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>     
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=c1>-- 根据职位涨工资    
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>     </span><span class=k>if</span><span class=w> </span><span class=n>vrow</span><span class=p>.</span><span class=n>job</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;PRESIDENT&#39;</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>update</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>sal</span><span class=o>=</span><span class=n>sal</span><span class=o>+</span><span class=mi>1000</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=n>vrow</span><span class=p>.</span><span class=n>empno</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=k>elsif</span><span class=w> </span><span class=n>vrow</span><span class=p>.</span><span class=n>job</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;MANAGER&#39;</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>update</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>sal</span><span class=o>=</span><span class=n>sal</span><span class=o>+</span><span class=mi>800</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=n>vrow</span><span class=p>.</span><span class=n>empno</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=k>else</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>update</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>sal</span><span class=o>=</span><span class=n>sal</span><span class=o>+</span><span class=mi>400</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=n>vrow</span><span class=p>.</span><span class=n>empno</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=k>end</span><span class=w> </span><span class=k>if</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 关闭游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>close</span><span class=w> </span><span class=n>vemps</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 提交数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>commit</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>  excel产品 --- &gt; xml,json   php,python
</span></span></span><span class=line><span class=cl><span class=cm>  扩展: 使用for循环遍历游标
</span></span></span><span class=line><span class=cl><span class=cm>  
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=c1>-- 声明游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=k>cursor</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>for</span><span class=w> </span><span class=n>vrow</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=n>vrow</span><span class=p>.</span><span class=n>ename</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h2 id=例外-相当于是java异常>例外 相当于是java异常
<a class=header-anchor href=#%e4%be%8b%e5%a4%96-%e7%9b%b8%e5%bd%93%e4%ba%8e%e6%98%afjava%e5%bc%82%e5%b8%b8></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23>23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24>24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25>25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26>26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27>27</a>
</span><span class=lnt id=hl-16-28><a class=lnlinks href=#hl-16-28>28</a>
</span><span class=lnt id=hl-16-29><a class=lnlinks href=#hl-16-29>29</a>
</span><span class=lnt id=hl-16-30><a class=lnlinks href=#hl-16-30>30</a>
</span><span class=lnt id=hl-16-31><a class=lnlinks href=#hl-16-31>31</a>
</span><span class=lnt id=hl-16-32><a class=lnlinks href=#hl-16-32>32</a>
</span><span class=lnt id=hl-16-33><a class=lnlinks href=#hl-16-33>33</a>
</span><span class=lnt id=hl-16-34><a class=lnlinks href=#hl-16-34>34</a>
</span><span class=lnt id=hl-16-35><a class=lnlinks href=#hl-16-35>35</a>
</span><span class=lnt id=hl-16-36><a class=lnlinks href=#hl-16-36>36</a>
</span><span class=lnt id=hl-16-37><a class=lnlinks href=#hl-16-37>37</a>
</span><span class=lnt id=hl-16-38><a class=lnlinks href=#hl-16-38>38</a>
</span><span class=lnt id=hl-16-39><a class=lnlinks href=#hl-16-39>39</a>
</span><span class=lnt id=hl-16-40><a class=lnlinks href=#hl-16-40>40</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>  例外 (意外): 相当于是java异常
</span></span></span><span class=line><span class=cl><span class=cm>    语法:
</span></span></span><span class=line><span class=cl><span class=cm>      declare
</span></span></span><span class=line><span class=cl><span class=cm>         声明部分
</span></span></span><span class=line><span class=cl><span class=cm>      begin
</span></span></span><span class=line><span class=cl><span class=cm>         业务逻辑
</span></span></span><span class=line><span class=cl><span class=cm>      exception
</span></span></span><span class=line><span class=cl><span class=cm>         处理例外
</span></span></span><span class=line><span class=cl><span class=cm>         when 例外1 then
</span></span></span><span class=line><span class=cl><span class=cm>           when 例外2 then
</span></span></span><span class=line><span class=cl><span class=cm>              when others then
</span></span></span><span class=line><span class=cl><span class=cm>              end;
</span></span></span><span class=line><span class=cl><span class=cm>      
</span></span></span><span class=line><span class=cl><span class=cm>  常见的系统的例外
</span></span></span><span class=line><span class=cl><span class=cm>      zero_divide : 除零例外
</span></span></span><span class=line><span class=cl><span class=cm>      value_error : 类型转换
</span></span></span><span class=line><span class=cl><span class=cm>      no_data_found : 没有找到数据例外
</span></span></span><span class=line><span class=cl><span class=cm>      too_many_rows : 查询出多行记录,但是赋值给了单行变量
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>i</span><span class=w> </span><span class=nb>number</span><span class=p>;</span><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>vrow</span><span class=w> </span><span class=n>emp</span><span class=o>%</span><span class=n>rowtype</span><span class=p>;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- i := 5/0;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=c1>-- i := &#39;aaa&#39;;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=c1>-- select * into vrow from emp where empno=1234567;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vrow</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>exception</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>when</span><span class=w> </span><span class=n>too_many_rows</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;查询出多行记录,但是赋值给了单行变量&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>when</span><span class=w> </span><span class=n>no_data_found</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;发生了没有找到数据例外&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>when</span><span class=w> </span><span class=n>value_error</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;发生了类型转换的例外&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>when</span><span class=w> </span><span class=n>zero_divide</span><span class=w> </span><span class=k>then</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;发生除零例外&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>when</span><span class=w> </span><span class=n>others</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;发生了未知的例外&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h3 id=自定义例外>自定义例外
<a class=header-anchor href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e4%be%8b%e5%a4%96></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span><span class=lnt id=hl-17-17><a class=lnlinks href=#hl-17-17>17</a>
</span><span class=lnt id=hl-17-18><a class=lnlinks href=#hl-17-18>18</a>
</span><span class=lnt id=hl-17-19><a class=lnlinks href=#hl-17-19>19</a>
</span><span class=lnt id=hl-17-20><a class=lnlinks href=#hl-17-20>20</a>
</span><span class=lnt id=hl-17-21><a class=lnlinks href=#hl-17-21>21</a>
</span><span class=lnt id=hl-17-22><a class=lnlinks href=#hl-17-22>22</a>
</span><span class=lnt id=hl-17-23><a class=lnlinks href=#hl-17-23>23</a>
</span><span class=lnt id=hl-17-24><a class=lnlinks href=#hl-17-24>24</a>
</span><span class=lnt id=hl-17-25><a class=lnlinks href=#hl-17-25>25</a>
</span><span class=lnt id=hl-17-26><a class=lnlinks href=#hl-17-26>26</a>
</span><span class=lnt id=hl-17-27><a class=lnlinks href=#hl-17-27>27</a>
</span><span class=lnt id=hl-17-28><a class=lnlinks href=#hl-17-28>28</a>
</span><span class=lnt id=hl-17-29><a class=lnlinks href=#hl-17-29>29</a>
</span><span class=lnt id=hl-17-30><a class=lnlinks href=#hl-17-30>30</a>
</span><span class=lnt id=hl-17-31><a class=lnlinks href=#hl-17-31>31</a>
</span><span class=lnt id=hl-17-32><a class=lnlinks href=#hl-17-32>32</a>
</span><span class=lnt id=hl-17-33><a class=lnlinks href=#hl-17-33>33</a>
</span><span class=lnt id=hl-17-34><a class=lnlinks href=#hl-17-34>34</a>
</span><span class=lnt id=hl-17-35><a class=lnlinks href=#hl-17-35>35</a>
</span><span class=lnt id=hl-17-36><a class=lnlinks href=#hl-17-36>36</a>
</span><span class=lnt id=hl-17-37><a class=lnlinks href=#hl-17-37>37</a>
</span><span class=lnt id=hl-17-38><a class=lnlinks href=#hl-17-38>38</a>
</span><span class=lnt id=hl-17-39><a class=lnlinks href=#hl-17-39>39</a>
</span><span class=lnt id=hl-17-40><a class=lnlinks href=#hl-17-40>40</a>
</span><span class=lnt id=hl-17-41><a class=lnlinks href=#hl-17-41>41</a>
</span><span class=lnt id=hl-17-42><a class=lnlinks href=#hl-17-42>42</a>
</span><span class=lnt id=hl-17-43><a class=lnlinks href=#hl-17-43>43</a>
</span><span class=lnt id=hl-17-44><a class=lnlinks href=#hl-17-44>44</a>
</span><span class=lnt id=hl-17-45><a class=lnlinks href=#hl-17-45>45</a>
</span><span class=lnt id=hl-17-46><a class=lnlinks href=#hl-17-46>46</a>
</span><span class=lnt id=hl-17-47><a class=lnlinks href=#hl-17-47>47</a>
</span><span class=lnt id=hl-17-48><a class=lnlinks href=#hl-17-48>48</a>
</span><span class=lnt id=hl-17-49><a class=lnlinks href=#hl-17-49>49</a>
</span><span class=lnt id=hl-17-50><a class=lnlinks href=#hl-17-50>50</a>
</span><span class=lnt id=hl-17-51><a class=lnlinks href=#hl-17-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>     自定义例外
</span></span></span><span class=line><span class=cl><span class=cm>         声明:
</span></span></span><span class=line><span class=cl><span class=cm>              例外名称 exception;
</span></span></span><span class=line><span class=cl><span class=cm>         抛出自定义例外:
</span></span></span><span class=line><span class=cl><span class=cm>              raise 例外名称
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 声明例外
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=n>no_emp_found</span><span class=w> </span><span class=k>exception</span><span class=p>;</span><span class=w>           
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 抛出例外
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=n>raise</span><span class=w> </span><span class=n>no_emp_found</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>exception</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 捕获例外
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>when</span><span class=w> </span><span class=n>no_emp_found</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;自定义例外&#39;</span><span class=p>);</span><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>when</span><span class=w> </span><span class=n>others</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;未知例外&#39;</span><span class=p>);</span><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>-</span><span class=w> </span><span class=err>查询指定编号的员工</span><span class=p>,</span><span class=err>若这个员工没有找到</span><span class=p>,</span><span class=err>则抛出自定义的例外</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 正确做法:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 声明例外
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=n>no_emp_found</span><span class=w> </span><span class=k>exception</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 定义记录型变量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=n>vrow</span><span class=w> </span><span class=n>emp</span><span class=o>%</span><span class=n>rowtype</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 声明游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=k>cursor</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=mi>1234567</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 打开游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=k>open</span><span class=w> </span><span class=n>vemps</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 向下移动游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=k>fetch</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vrow</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 判断游标是否找到数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=k>if</span><span class=w> </span><span class=n>vemps</span><span class=o>%</span><span class=n>notfound</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>raise</span><span class=w> </span><span class=n>no_emp_found</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>end</span><span class=w> </span><span class=k>if</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>-- 关闭游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=k>close</span><span class=w> </span><span class=n>vemps</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>exception</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>when</span><span class=w> </span><span class=n>no_emp_found</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;捕获了自定义的例外&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>when</span><span class=w> </span><span class=n>others</span><span class=w> </span><span class=k>then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;未知的例外&#39;</span><span class=p>);</span><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h2 id=存储过程-编译好的plsql代码片断封装在数据库中-相当于方法调用的时候传参数>存储过程 编译好的PLSQL代码片断,封装在数据库中 相当于方法调用的时候传参数
<a class=header-anchor href=#%e5%ad%98%e5%82%a8%e8%bf%87%e7%a8%8b-%e7%bc%96%e8%af%91%e5%a5%bd%e7%9a%84plsql%e4%bb%a3%e7%a0%81%e7%89%87%e6%96%ad%e5%b0%81%e8%a3%85%e5%9c%a8%e6%95%b0%e6%8d%ae%e5%ba%93%e4%b8%ad-%e7%9b%b8%e5%bd%93%e4%ba%8e%e6%96%b9%e6%b3%95%e8%b0%83%e7%94%a8%e7%9a%84%e6%97%b6%e5%80%99%e4%bc%a0%e5%8f%82%e6%95%b0></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>  1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2>  2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3>  3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4>  4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5>  5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6>  6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7>  7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8>  8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9>  9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10> 10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11> 11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12> 12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13> 13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14> 14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15> 15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16> 16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17> 17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18> 18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19> 19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20> 20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21> 21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22> 22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23> 23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24> 24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25> 25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26> 26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27> 27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28> 28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29> 29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30> 30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31> 31</a>
</span><span class=lnt id=hl-18-32><a class=lnlinks href=#hl-18-32> 32</a>
</span><span class=lnt id=hl-18-33><a class=lnlinks href=#hl-18-33> 33</a>
</span><span class=lnt id=hl-18-34><a class=lnlinks href=#hl-18-34> 34</a>
</span><span class=lnt id=hl-18-35><a class=lnlinks href=#hl-18-35> 35</a>
</span><span class=lnt id=hl-18-36><a class=lnlinks href=#hl-18-36> 36</a>
</span><span class=lnt id=hl-18-37><a class=lnlinks href=#hl-18-37> 37</a>
</span><span class=lnt id=hl-18-38><a class=lnlinks href=#hl-18-38> 38</a>
</span><span class=lnt id=hl-18-39><a class=lnlinks href=#hl-18-39> 39</a>
</span><span class=lnt id=hl-18-40><a class=lnlinks href=#hl-18-40> 40</a>
</span><span class=lnt id=hl-18-41><a class=lnlinks href=#hl-18-41> 41</a>
</span><span class=lnt id=hl-18-42><a class=lnlinks href=#hl-18-42> 42</a>
</span><span class=lnt id=hl-18-43><a class=lnlinks href=#hl-18-43> 43</a>
</span><span class=lnt id=hl-18-44><a class=lnlinks href=#hl-18-44> 44</a>
</span><span class=lnt id=hl-18-45><a class=lnlinks href=#hl-18-45> 45</a>
</span><span class=lnt id=hl-18-46><a class=lnlinks href=#hl-18-46> 46</a>
</span><span class=lnt id=hl-18-47><a class=lnlinks href=#hl-18-47> 47</a>
</span><span class=lnt id=hl-18-48><a class=lnlinks href=#hl-18-48> 48</a>
</span><span class=lnt id=hl-18-49><a class=lnlinks href=#hl-18-49> 49</a>
</span><span class=lnt id=hl-18-50><a class=lnlinks href=#hl-18-50> 50</a>
</span><span class=lnt id=hl-18-51><a class=lnlinks href=#hl-18-51> 51</a>
</span><span class=lnt id=hl-18-52><a class=lnlinks href=#hl-18-52> 52</a>
</span><span class=lnt id=hl-18-53><a class=lnlinks href=#hl-18-53> 53</a>
</span><span class=lnt id=hl-18-54><a class=lnlinks href=#hl-18-54> 54</a>
</span><span class=lnt id=hl-18-55><a class=lnlinks href=#hl-18-55> 55</a>
</span><span class=lnt id=hl-18-56><a class=lnlinks href=#hl-18-56> 56</a>
</span><span class=lnt id=hl-18-57><a class=lnlinks href=#hl-18-57> 57</a>
</span><span class=lnt id=hl-18-58><a class=lnlinks href=#hl-18-58> 58</a>
</span><span class=lnt id=hl-18-59><a class=lnlinks href=#hl-18-59> 59</a>
</span><span class=lnt id=hl-18-60><a class=lnlinks href=#hl-18-60> 60</a>
</span><span class=lnt id=hl-18-61><a class=lnlinks href=#hl-18-61> 61</a>
</span><span class=lnt id=hl-18-62><a class=lnlinks href=#hl-18-62> 62</a>
</span><span class=lnt id=hl-18-63><a class=lnlinks href=#hl-18-63> 63</a>
</span><span class=lnt id=hl-18-64><a class=lnlinks href=#hl-18-64> 64</a>
</span><span class=lnt id=hl-18-65><a class=lnlinks href=#hl-18-65> 65</a>
</span><span class=lnt id=hl-18-66><a class=lnlinks href=#hl-18-66> 66</a>
</span><span class=lnt id=hl-18-67><a class=lnlinks href=#hl-18-67> 67</a>
</span><span class=lnt id=hl-18-68><a class=lnlinks href=#hl-18-68> 68</a>
</span><span class=lnt id=hl-18-69><a class=lnlinks href=#hl-18-69> 69</a>
</span><span class=lnt id=hl-18-70><a class=lnlinks href=#hl-18-70> 70</a>
</span><span class=lnt id=hl-18-71><a class=lnlinks href=#hl-18-71> 71</a>
</span><span class=lnt id=hl-18-72><a class=lnlinks href=#hl-18-72> 72</a>
</span><span class=lnt id=hl-18-73><a class=lnlinks href=#hl-18-73> 73</a>
</span><span class=lnt id=hl-18-74><a class=lnlinks href=#hl-18-74> 74</a>
</span><span class=lnt id=hl-18-75><a class=lnlinks href=#hl-18-75> 75</a>
</span><span class=lnt id=hl-18-76><a class=lnlinks href=#hl-18-76> 76</a>
</span><span class=lnt id=hl-18-77><a class=lnlinks href=#hl-18-77> 77</a>
</span><span class=lnt id=hl-18-78><a class=lnlinks href=#hl-18-78> 78</a>
</span><span class=lnt id=hl-18-79><a class=lnlinks href=#hl-18-79> 79</a>
</span><span class=lnt id=hl-18-80><a class=lnlinks href=#hl-18-80> 80</a>
</span><span class=lnt id=hl-18-81><a class=lnlinks href=#hl-18-81> 81</a>
</span><span class=lnt id=hl-18-82><a class=lnlinks href=#hl-18-82> 82</a>
</span><span class=lnt id=hl-18-83><a class=lnlinks href=#hl-18-83> 83</a>
</span><span class=lnt id=hl-18-84><a class=lnlinks href=#hl-18-84> 84</a>
</span><span class=lnt id=hl-18-85><a class=lnlinks href=#hl-18-85> 85</a>
</span><span class=lnt id=hl-18-86><a class=lnlinks href=#hl-18-86> 86</a>
</span><span class=lnt id=hl-18-87><a class=lnlinks href=#hl-18-87> 87</a>
</span><span class=lnt id=hl-18-88><a class=lnlinks href=#hl-18-88> 88</a>
</span><span class=lnt id=hl-18-89><a class=lnlinks href=#hl-18-89> 89</a>
</span><span class=lnt id=hl-18-90><a class=lnlinks href=#hl-18-90> 90</a>
</span><span class=lnt id=hl-18-91><a class=lnlinks href=#hl-18-91> 91</a>
</span><span class=lnt id=hl-18-92><a class=lnlinks href=#hl-18-92> 92</a>
</span><span class=lnt id=hl-18-93><a class=lnlinks href=#hl-18-93> 93</a>
</span><span class=lnt id=hl-18-94><a class=lnlinks href=#hl-18-94> 94</a>
</span><span class=lnt id=hl-18-95><a class=lnlinks href=#hl-18-95> 95</a>
</span><span class=lnt id=hl-18-96><a class=lnlinks href=#hl-18-96> 96</a>
</span><span class=lnt id=hl-18-97><a class=lnlinks href=#hl-18-97> 97</a>
</span><span class=lnt id=hl-18-98><a class=lnlinks href=#hl-18-98> 98</a>
</span><span class=lnt id=hl-18-99><a class=lnlinks href=#hl-18-99> 99</a>
</span><span class=lnt id=hl-18-100><a class=lnlinks href=#hl-18-100>100</a>
</span><span class=lnt id=hl-18-101><a class=lnlinks href=#hl-18-101>101</a>
</span><span class=lnt id=hl-18-102><a class=lnlinks href=#hl-18-102>102</a>
</span><span class=lnt id=hl-18-103><a class=lnlinks href=#hl-18-103>103</a>
</span><span class=lnt id=hl-18-104><a class=lnlinks href=#hl-18-104>104</a>
</span><span class=lnt id=hl-18-105><a class=lnlinks href=#hl-18-105>105</a>
</span><span class=lnt id=hl-18-106><a class=lnlinks href=#hl-18-106>106</a>
</span><span class=lnt id=hl-18-107><a class=lnlinks href=#hl-18-107>107</a>
</span><span class=lnt id=hl-18-108><a class=lnlinks href=#hl-18-108>108</a>
</span><span class=lnt id=hl-18-109><a class=lnlinks href=#hl-18-109>109</a>
</span><span class=lnt id=hl-18-110><a class=lnlinks href=#hl-18-110>110</a>
</span><span class=lnt id=hl-18-111><a class=lnlinks href=#hl-18-111>111</a>
</span><span class=lnt id=hl-18-112><a class=lnlinks href=#hl-18-112>112</a>
</span><span class=lnt id=hl-18-113><a class=lnlinks href=#hl-18-113>113</a>
</span><span class=lnt id=hl-18-114><a class=lnlinks href=#hl-18-114>114</a>
</span><span class=lnt id=hl-18-115><a class=lnlinks href=#hl-18-115>115</a>
</span><span class=lnt id=hl-18-116><a class=lnlinks href=#hl-18-116>116</a>
</span><span class=lnt id=hl-18-117><a class=lnlinks href=#hl-18-117>117</a>
</span><span class=lnt id=hl-18-118><a class=lnlinks href=#hl-18-118>118</a>
</span><span class=lnt id=hl-18-119><a class=lnlinks href=#hl-18-119>119</a>
</span><span class=lnt id=hl-18-120><a class=lnlinks href=#hl-18-120>120</a>
</span><span class=lnt id=hl-18-121><a class=lnlinks href=#hl-18-121>121</a>
</span><span class=lnt id=hl-18-122><a class=lnlinks href=#hl-18-122>122</a>
</span><span class=lnt id=hl-18-123><a class=lnlinks href=#hl-18-123>123</a>
</span><span class=lnt id=hl-18-124><a class=lnlinks href=#hl-18-124>124</a>
</span><span class=lnt id=hl-18-125><a class=lnlinks href=#hl-18-125>125</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*相当于是在java main函数里面写了一些业务逻辑
</span></span></span><span class=line><span class=cl><span class=cm>-- 将main函数中的业务逻辑抽取成单个的方法
</span></span></span><span class=line><span class=cl><span class=cm>    存储过程: 实际上是将一段已经编译好的PLSQL代码片断,封装在数据库中
</span></span></span><span class=line><span class=cl><span class=cm>           作用:
</span></span></span><span class=line><span class=cl><span class=cm>              1. 提高执行效率
</span></span></span><span class=line><span class=cl><span class=cm>              2. 提高代码复用性
</span></span></span><span class=line><span class=cl><span class=cm>          
</span></span></span><span class=line><span class=cl><span class=cm>          语法:
</span></span></span><span class=line><span class=cl><span class=cm>              create [or replace] procedure 过程名称(参数1 in|out 参数类型,参数2 in|out 参数类型)
</span></span></span><span class=line><span class=cl><span class=cm>              is | as
</span></span></span><span class=line><span class=cl><span class=cm>                 -- 声明部分
</span></span></span><span class=line><span class=cl><span class=cm>              begin
</span></span></span><span class=line><span class=cl><span class=cm>                 -- 业务逻辑
</span></span></span><span class=line><span class=cl><span class=cm>              end;
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- in代表输入参数 out代表输出参数
</span></span></span><span class=line><span class=cl><span class=c1>-- 给指定员工涨薪,并打印涨薪前和涨薪后的工资
</span></span></span><span class=line><span class=cl><span class=c1>-- 员工编号 : 输入参数
</span></span></span><span class=line><span class=cl><span class=c1>-- 涨多少 : 输入参数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>   1. 查询当前工资
</span></span></span><span class=line><span class=cl><span class=cm>   2. 打印涨薪前工资
</span></span></span><span class=line><span class=cl><span class=cm>   3. 涨工资
</span></span></span><span class=line><span class=cl><span class=cm>   4. 打印涨薪后的工资
</span></span></span><span class=line><span class=cl><span class=cm>   5. 提交数据
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- select * from emp where empno=1234567; ---&gt; 发送给数据库 ---&gt; 分析编译---&gt; 执行
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 给指定员工涨工资, 并且打印涨工资前的工资和涨工资之后的工资
</span></span></span><span class=line><span class=cl><span class=c1>-- 参数: 员工编号 in
</span></span></span><span class=line><span class=cl><span class=c1>-- 参数: 涨薪数量 in
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>replace</span><span class=w> </span><span class=k>procedure</span><span class=w> </span><span class=n>proc_updatesal</span><span class=p>(</span><span class=n>vempno</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=n>vcount</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=nb>number</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 声明变量,接收当前工资
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>vsal</span><span class=w> </span><span class=n>emp</span><span class=p>.</span><span class=n>sal</span><span class=o>%</span><span class=k>type</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 1.查询当前工资
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sal</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vsal</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=n>vempno</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 2.打印当前工资
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;涨薪前:&#39;</span><span class=o>||</span><span class=n>vsal</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 3.涨工资update
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>update</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>sal</span><span class=o>=</span><span class=n>vsal</span><span class=o>+</span><span class=n>vcount</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=n>vempno</span><span class=p>;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 4.打印涨薪后的工资
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;涨薪后:&#39;</span><span class=o>||</span><span class=p>(</span><span class=n>vsal</span><span class=o>+</span><span class=n>vcount</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 5.提交事务
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>commit</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 调用存储过程,方式1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>call</span><span class=w> </span><span class=n>proc_updatesal</span><span class=p>(</span><span class=mi>7369</span><span class=p>,</span><span class=mi>100</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 方式2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>proc_updatesal</span><span class=p>(</span><span class=mi>7369</span><span class=p>,</span><span class=mi>200</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 封装一个获取指定编号员工年薪的存储过程
</span></span></span><span class=line><span class=cl><span class=c1>-- 参数: 员工编号 in
</span></span></span><span class=line><span class=cl><span class=c1>-- 参数: 年薪     out
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>replace</span><span class=w> </span><span class=k>procedure</span><span class=w> </span><span class=n>proc_getyearsal</span><span class=p>(</span><span class=n>vempno</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=n>vyearsal</span><span class=w> </span><span class=k>out</span><span class=w> </span><span class=nb>number</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>is</span><span class=w>       
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>select</span><span class=w> </span><span class=n>sal</span><span class=o>*</span><span class=mi>12</span><span class=o>+</span><span class=n>nvl</span><span class=p>(</span><span class=n>comm</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vyearsal</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=n>vempno</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 调用获取年薪
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>yearsal</span><span class=w> </span><span class=nb>number</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>proc_getyearsal</span><span class=p>(</span><span class=mi>7369</span><span class=p>,</span><span class=n>yearsal</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;年薪:&#39;</span><span class=o>||</span><span class=n>yearsal</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 获取指定编号员工的年薪
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>   编号: in  输入
</span></span></span><span class=line><span class=cl><span class=cm>   年薪: out 输出
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>replace</span><span class=w> </span><span class=k>procedure</span><span class=w> </span><span class=n>proc_getyearsal</span><span class=p>(</span><span class=n>vempno</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=nb>number</span><span class=p>,</span><span class=n>vyearsal</span><span class=w> </span><span class=k>out</span><span class=w> </span><span class=nb>number</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>sal</span><span class=o>*</span><span class=mi>12</span><span class=o>+</span><span class=n>nvl</span><span class=p>(</span><span class=n>comm</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vyearsal</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>empno</span><span class=o>=</span><span class=n>vempno</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- plsql代码片断中调用
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>yearsal</span><span class=w> </span><span class=nb>number</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>proc_getyearsal</span><span class=p>(</span><span class=mi>7369</span><span class=p>,</span><span class=n>yearsal</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=n>yearsal</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 封装存储过程,输出的是游标类型, 所有员工
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>   sys_refcursor : 系统引用游标
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=k>replace</span><span class=w> </span><span class=k>procedure</span><span class=w> </span><span class=n>proc_getemps</span><span class=p>(</span><span class=n>vemps</span><span class=w> </span><span class=k>out</span><span class=w> </span><span class=n>sys_refcursor</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 打开游标, 谁调用谁关闭
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>open</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=p>;</span><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>declare</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>vemps</span><span class=w> </span><span class=n>sys_refcursor</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>vrow</span><span class=w> </span><span class=n>emp</span><span class=o>%</span><span class=n>rowtype</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 调用存储过程
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>proc_getemps</span><span class=p>(</span><span class=n>vemps</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>loop</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=k>fetch</span><span class=w> </span><span class=n>vemps</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>vrow</span><span class=p>;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>exit</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=n>vemps</span><span class=o>%</span><span class=n>notfound</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=n>dbms_output</span><span class=p>.</span><span class=n>put_line</span><span class=p>(</span><span class=n>vrow</span><span class=p>.</span><span class=n>ename</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>end</span><span class=w> </span><span class=n>loop</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 关闭游标
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>close</span><span class=w> </span><span class=n>vemps</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><h2 id=存储函数>存储函数
<a class=header-anchor href=#%e5%ad%98%e5%82%a8%e5%87%bd%e6%95%b0></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>  1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>  2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3>  3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4>  4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5>  5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6>  6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7>  7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8>  8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9>  9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10> 10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11> 11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12> 12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13> 13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14> 14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15> 15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16> 16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17> 17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18> 18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19> 19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20> 20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21> 21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22> 22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23> 23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24> 24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25> 25</a>
</span><span class=lnt id=hl-19-26><a class=lnlinks href=#hl-19-26> 26</a>
</span><span class=lnt id=hl-19-27><a class=lnlinks href=#hl-19-27> 27</a>
</span><span class=lnt id=hl-19-28><a class=lnlinks href=#hl-19-28> 28</a>
</span><span class=lnt id=hl-19-29><a class=lnlinks href=#hl-19-29> 29</a>
</span><span class=lnt id=hl-19-30><a class=lnlinks href=#hl-19-30> 30</a>
</span><span class=lnt id=hl-19-31><a class=lnlinks href=#hl-19-31> 31</a>
</span><span class=lnt id=hl-19-32><a class=lnlinks href=#hl-19-32> 32</a>
</span><span class=lnt id=hl-19-33><a class=lnlinks href=#hl-19-33> 33</a>
</span><span class=lnt id=hl-19-34><a class=lnlinks href=#hl-19-34> 34</a>
</span><span class=lnt id=hl-19-35><a class=lnlinks href=#hl-19-35> 35</a>
</span><span class=lnt id=hl-19-36><a class=lnlinks href=#hl-19-36> 36</a>
</span><span class=lnt id=hl-19-37><a class=lnlinks href=#hl-19-37> 37</a>
</span><span class=lnt id=hl-19-38><a class=lnlinks href=#hl-19-38> 38</a>
</span><span class=lnt id=hl-19-39><a class=lnlinks href=#hl-19-39> 39</a>
</span><span class=lnt id=hl-19-40><a class=lnlinks href=#hl-19-40> 40</a>
</span><span class=lnt id=hl-19-41><a class=lnlinks href=#hl-19-41> 41</a>
</span><span class=lnt id=hl-19-42><a class=lnlinks href=#hl-19-42> 42</a>
</span><span class=lnt id=hl-19-43><a class=lnlinks href=#hl-19-43> 43</a>
</span><span class=lnt id=hl-19-44><a class=lnlinks href=#hl-19-44> 44</a>
</span><span class=lnt id=hl-19-45><a class=lnlinks href=#hl-19-45> 45</a>
</span><span class=lnt id=hl-19-46><a class=lnlinks href=#hl-19-46> 46</a>
</span><span class=lnt id=hl-19-47><a class=lnlinks href=#hl-19-47> 47</a>
</span><span class=lnt id=hl-19-48><a class=lnlinks href=#hl-19-48> 48</a>
</span><span class=lnt id=hl-19-49><a class=lnlinks href=#hl-19-49> 49</a>
</span><span class=lnt id=hl-19-50><a class=lnlinks href=#hl-19-50> 50</a>
</span><span class=lnt id=hl-19-51><a class=lnlinks href=#hl-19-51> 51</a>
</span><span class=lnt id=hl-19-52><a class=lnlinks href=#hl-19-52> 52</a>
</span><span class=lnt id=hl-19-53><a class=lnlinks href=#hl-19-53> 53</a>
</span><span class=lnt id=hl-19-54><a class=lnlinks href=#hl-19-54> 54</a>
</span><span class=lnt id=hl-19-55><a class=lnlinks href=#hl-19-55> 55</a>
</span><span class=lnt id=hl-19-56><a class=lnlinks href=#hl-19-56> 56</a>
</span><span class=lnt id=hl-19-57><a class=lnlinks href=#hl-19-57> 57</a>
</span><span class=lnt id=hl-19-58><a class=lnlinks href=#hl-19-58> 58</a>
</span><span class=lnt id=hl-19-59><a class=lnlinks href=#hl-19-59> 59</a>
</span><span class=lnt id=hl-19-60><a class=lnlinks href=#hl-19-60> 60</a>
</span><span class=lnt id=hl-19-61><a class=lnlinks href=#hl-19-61> 61</a>
</span><span class=lnt id=hl-19-62><a class=lnlinks href=#hl-19-62> 62</a>
</span><span class=lnt id=hl-19-63><a class=lnlinks href=#hl-19-63> 63</a>
</span><span class=lnt id=hl-19-64><a class=lnlinks href=#hl-19-64> 64</a>
</span><span class=lnt id=hl-19-65><a class=lnlinks href=#hl-19-65> 65</a>
</span><span class=lnt id=hl-19-66><a class=lnlinks href=#hl-19-66> 66</a>
</span><span class=lnt id=hl-19-67><a class=lnlinks href=#hl-19-67> 67</a>
</span><span class=lnt id=hl-19-68><a class=lnlinks href=#hl-19-68> 68</a>
</span><span class=lnt id=hl-19-69><a class=lnlinks href=#hl-19-69> 69</a>
</span><span class=lnt id=hl-19-70><a class=lnlinks href=#hl-19-70> 70</a>
</span><span class=lnt id=hl-19-71><a class=lnlinks href=#hl-19-71> 71</a>
</span><span class=lnt id=hl-19-72><a class=lnlinks href=#hl-19-72> 72</a>
</span><span class=lnt id=hl-19-73><a class=lnlinks href=#hl-19-73> 73</a>
</span><span class=lnt id=hl-19-74><a class=lnlinks href=#hl-19-74> 74</a>
</span><span class=lnt id=hl-19-75><a class=lnlinks href=#hl-19-75> 75</a>
</span><span class=lnt id=hl-19-76><a class=lnlinks href=#hl-19-76> 76</a>
</span><span class=lnt id=hl-19-77><a class=lnlinks href=#hl-19-77> 77</a>
</span><span class=lnt id=hl-19-78><a class=lnlinks href=#hl-19-78> 78</a>
</span><span class=lnt id=hl-19-79><a class=lnlinks href=#hl-19-79> 79</a>
</span><span class=lnt id=hl-19-80><a class=lnlinks href=#hl-19-80> 80</a>
</span><span class=lnt id=hl-19-81><a class=lnlinks href=#hl-19-81> 81</a>
</span><span class=lnt id=hl-19-82><a class=lnlinks href=#hl-19-82> 82</a>
</span><span class=lnt id=hl-19-83><a class=lnlinks href=#hl-19-83> 83</a>
</span><span class=lnt id=hl-19-84><a class=lnlinks href=#hl-19-84> 84</a>
</span><span class=lnt id=hl-19-85><a class=lnlinks href=#hl-19-85> 85</a>
</span><span class=lnt id=hl-19-86><a class=lnlinks href=#hl-19-86> 86</a>
</span><span class=lnt id=hl-19-87><a class=lnlinks href=#hl-19-87> 87</a>
</span><span class=lnt id=hl-19-88><a class=lnlinks href=#hl-19-88> 88</a>
</span><span class=lnt id=hl-19-89><a class=lnlinks href=#hl-19-89> 89</a>
</span><span class=lnt id=hl-19-90><a class=lnlinks href=#hl-19-90> 90</a>
</span><span class=lnt id=hl-19-91><a class=lnlinks href=#hl-19-91> 91</a>
</span><span class=lnt id=hl-19-92><a class=lnlinks href=#hl-19-92> 92</a>
</span><span class=lnt id=hl-19-93><a class=lnlinks href=#hl-19-93> 93</a>
</span><span class=lnt id=hl-19-94><a class=lnlinks href=#hl-19-94> 94</a>
</span><span class=lnt id=hl-19-95><a class=lnlinks href=#hl-19-95> 95</a>
</span><span class=lnt id=hl-19-96><a class=lnlinks href=#hl-19-96> 96</a>
</span><span class=lnt id=hl-19-97><a class=lnlinks href=#hl-19-97> 97</a>
</span><span class=lnt id=hl-19-98><a class=lnlinks href=#hl-19-98> 98</a>
</span><span class=lnt id=hl-19-99><a class=lnlinks href=#hl-19-99> 99</a>
</span><span class=lnt id=hl-19-100><a class=lnlinks href=#hl-19-100>100</a>
</span><span class=lnt id=hl-19-101><a class=lnlinks href=#hl-19-101>101</a>
</span><span class=lnt id=hl-19-102><a class=lnlinks href=#hl-19-102>102</a>
</span><span class=lnt id=hl-19-103><a class=lnlinks href=#hl-19-103>103</a>
</span><span class=lnt id=hl-19-104><a class=lnlinks href=#hl-19-104>104</a>
</span><span class=lnt id=hl-19-105><a class=lnlinks href=#hl-19-105>105</a>
</span><span class=lnt id=hl-19-106><a class=lnlinks href=#hl-19-106>106</a>
</span><span class=lnt id=hl-19-107><a class=lnlinks href=#hl-19-107>107</a>
</span><span class=lnt id=hl-19-108><a class=lnlinks href=#hl-19-108>108</a>
</span><span class=lnt id=hl-19-109><a class=lnlinks href=#hl-19-109>109</a>
</span><span class=lnt id=hl-19-110><a class=lnlinks href=#hl-19-110>110</a>
</span><span class=lnt id=hl-19-111><a class=lnlinks href=#hl-19-111>111</a>
</span><span class=lnt id=hl-19-112><a class=lnlinks href=#hl-19-112>112</a>
</span><span class=lnt id=hl-19-113><a class=lnlinks href=#hl-19-113>113</a>
</span><span class=lnt id=hl-19-114><a class=lnlinks href=#hl-19-114>114</a>
</span><span class=lnt id=hl-19-115><a class=lnlinks href=#hl-19-115>115</a>
</span><span class=lnt id=hl-19-116><a class=lnlinks href=#hl-19-116>116</a>
</span><span class=lnt id=hl-19-117><a class=lnlinks href=#hl-19-117>117</a>
</span><span class=lnt id=hl-19-118><a class=lnlinks href=#hl-19-118>118</a>
</span><span class=lnt id=hl-19-119><a class=lnlinks href=#hl-19-119>119</a>
</span><span class=lnt id=hl-19-120><a class=lnlinks href=#hl-19-120>120</a>
</span><span class=lnt id=hl-19-121><a class=lnlinks href=#hl-19-121>121</a>
</span><span class=lnt id=hl-19-122><a class=lnlinks href=#hl-19-122>122</a>
</span><span class=lnt id=hl-19-123><a class=lnlinks href=#hl-19-123>123</a>
</span><span class=lnt id=hl-19-124><a class=lnlinks href=#hl-19-124>124</a>
</span><span class=lnt id=hl-19-125><a class=lnlinks href=#hl-19-125>125</a>
</span><span class=lnt id=hl-19-126><a class=lnlinks href=#hl-19-126>126</a>
</span><span class=lnt id=hl-19-127><a class=lnlinks href=#hl-19-127>127</a>
</span><span class=lnt id=hl-19-128><a class=lnlinks href=#hl-19-128>128</a>
</span><span class=lnt id=hl-19-129><a class=lnlinks href=#hl-19-129>129</a>
</span><span class=lnt id=hl-19-130><a class=lnlinks href=#hl-19-130>130</a>
</span><span class=lnt id=hl-19-131><a class=lnlinks href=#hl-19-131>131</a>
</span><span class=lnt id=hl-19-132><a class=lnlinks href=#hl-19-132>132</a>
</span><span class=lnt id=hl-19-133><a class=lnlinks href=#hl-19-133>133</a>
</span><span class=lnt id=hl-19-134><a class=lnlinks href=#hl-19-134>134</a>
</span><span class=lnt id=hl-19-135><a class=lnlinks href=#hl-19-135>135</a>
</span><span class=lnt id=hl-19-136><a class=lnlinks href=#hl-19-136>136</a>
</span><span class=lnt id=hl-19-137><a class=lnlinks href=#hl-19-137>137</a>
</span><span class=lnt id=hl-19-138><a class=lnlinks href=#hl-19-138>138</a>
</span><span class=lnt id=hl-19-139><a class=lnlinks href=#hl-19-139>139</a>
</span><span class=lnt id=hl-19-140><a class=lnlinks href=#hl-19-140>140</a>
</span><span class=lnt id=hl-19-141><a class=lnlinks href=#hl-19-141>141</a>
</span><span class=lnt id=hl-19-142><a class=lnlinks href=#hl-19-142>142</a>
</span><span class=lnt id=hl-19-143><a class=lnlinks href=#hl-19-143>143</a>
</span><span class=lnt id=hl-19-144><a class=lnlinks href=#hl-19-144>144</a>
</span><span class=lnt id=hl-19-145><a class=lnlinks href=#hl-19-145>145</a>
</span><span class=lnt id=hl-19-146><a class=lnlinks href=#hl-19-146>146</a>
</span><span class=lnt id=hl-19-147><a class=lnlinks href=#hl-19-147>147</a>
</span><span class=lnt id=hl-19-148><a class=lnlinks href=#hl-19-148>148</a>
</span><span class=lnt id=hl-19-149><a class=lnlinks href=#hl-19-149>149</a>
</span><span class=lnt id=hl-19-150><a class=lnlinks href=#hl-19-150>150</a>
</span><span class=lnt id=hl-19-151><a class=lnlinks href=#hl-19-151>151</a>
</span><span class=lnt id=hl-19-152><a class=lnlinks href=#hl-19-152>152</a>
</span><span class=lnt id=hl-19-153><a class=lnlinks href=#hl-19-153>153</a>
</span><span class=lnt id=hl-19-154><a class=lnlinks href=#hl-19-154>154</a>
</span><span class=lnt id=hl-19-155><a class=lnlinks href=#hl-19-155>155</a>
</span><span class=lnt id=hl-19-156><a class=lnlinks href=#hl-19-156>156</a>
</span><span class=lnt id=hl-19-157><a class=lnlinks href=#hl-19-157>157</a>
</span><span class=lnt id=hl-19-158><a class=lnlinks href=#hl-19-158>158</a>
</span><span class=lnt id=hl-19-159><a class=lnlinks href=#hl-19-159>159</a>
</span><span class=lnt id=hl-19-160><a class=lnlinks href=#hl-19-160>160</a>
</span><span class=lnt id=hl-19-161><a class=lnlinks href=#hl-19-161>161</a>
</span><span class=lnt id=hl-19-162><a class=lnlinks href=#hl-19-162>162</a>
</span><span class=lnt id=hl-19-163><a class=lnlinks href=#hl-19-163>163</a>
</span><span class=lnt id=hl-19-164><a class=lnlinks href=#hl-19-164>164</a>
</span><span class=lnt id=hl-19-165><a class=lnlinks href=#hl-19-165>165</a>
</span><span class=lnt id=hl-19-166><a class=lnlinks href=#hl-19-166>166</a>
</span><span class=lnt id=hl-19-167><a class=lnlinks href=#hl-19-167>167</a>
</span><span class=lnt id=hl-19-168><a class=lnlinks href=#hl-19-168>168</a>
</span><span class=lnt id=hl-19-169><a class=lnlinks href=#hl-19-169>169</a>
</span><span class=lnt id=hl-19-170><a class=lnlinks href=#hl-19-170>170</a>
</span><span class=lnt id=hl-19-171><a class=lnlinks href=#hl-19-171>171</a>
</span><span class=lnt id=hl-19-172><a class=lnlinks href=#hl-19-172>172</a>
</span><span class=lnt id=hl-19-173><a class=lnlinks href=#hl-19-173>173</a>
</span><span class=lnt id=hl-19-174><a class=lnlinks href=#hl-19-174>174</a>
</span><span class=lnt id=hl-19-175><a class=lnlinks href=#hl-19-175>175</a>
</span><span class=lnt id=hl-19-176><a class=lnlinks href=#hl-19-176>176</a>
</span><span class=lnt id=hl-19-177><a class=lnlinks href=#hl-19-177>177</a>
</span><span class=lnt id=hl-19-178><a class=lnlinks href=#hl-19-178>178</a>
</span><span class=lnt id=hl-19-179><a class=lnlinks href=#hl-19-179>179</a>
</span><span class=lnt id=hl-19-180><a class=lnlinks href=#hl-19-180>180</a>
</span><span class=lnt id=hl-19-181><a class=lnlinks href=#hl-19-181>181</a>
</span><span class=lnt id=hl-19-182><a class=lnlinks href=#hl-19-182>182</a>
</span><span class=lnt id=hl-19-183><a class=lnlinks href=#hl-19-183>183</a>
</span><span class=lnt id=hl-19-184><a class=lnlinks href=#hl-19-184>184</a>
</span><span class=lnt id=hl-19-185><a class=lnlinks href=#hl-19-185>185</a>
</span><span class=lnt id=hl-19-186><a class=lnlinks href=#hl-19-186>186</a>
</span><span class=lnt id=hl-19-187><a class=lnlinks href=#hl-19-187>187</a>
</span><span class=lnt id=hl-19-188><a class=lnlinks href=#hl-19-188>188</a>
</span><span class=lnt id=hl-19-189><a class=lnlinks href=#hl-19-189>189</a>
</span><span class=lnt id=hl-19-190><a class=lnlinks href=#hl-19-190>190</a>
</span><span class=lnt id=hl-19-191><a class=lnlinks href=#hl-19-191>191</a>
</span><span class=lnt id=hl-19-192><a class=lnlinks href=#hl-19-192>192</a>
</span><span class=lnt id=hl-19-193><a class=lnlinks href=#hl-19-193>193</a>
</span><span class=lnt id=hl-19-194><a class=lnlinks href=#hl-19-194>194</a>
</span><span class=lnt id=hl-19-195><a class=lnlinks href=#hl-19-195>195</a>
</span><span class=lnt id=hl-19-196><a class=lnlinks href=#hl-19-196>196</a>
</span><span class=lnt id=hl-19-197><a class=lnlinks href=#hl-19-197>197</a>
</span><span class=lnt id=hl-19-198><a class=lnlinks href=#hl-19-198>198</a>
</span><span class=lnt id=hl-19-199><a class=lnlinks href=#hl-19-199>199</a>
</span><span class=lnt id=hl-19-200><a class=lnlinks href=#hl-19-200>200</a>
</span><span class=lnt id=hl-19-201><a class=lnlinks href=#hl-19-201>201</a>
</span><span class=lnt id=hl-19-202><a class=lnlinks href=#hl-19-202>202</a>
</span><span class=lnt id=hl-19-203><a class=lnlinks href=#hl-19-203>203</a>
</span><span class=lnt id=hl-19-204><a class=lnlinks href=#hl-19-204>204</a>
</span><span class=lnt id=hl-19-205><a class=lnlinks href=#hl-19-205>205</a>
</span><span class=lnt id=hl-19-206><a class=lnlinks href=#hl-19-206>206</a>
</span><span class=lnt id=hl-19-207><a class=lnlinks href=#hl-19-207>207</a>
</span><span class=lnt id=hl-19-208><a class=lnlinks href=#hl-19-208>208</a>
</span><span class=lnt id=hl-19-209><a class=lnlinks href=#hl-19-209>209</a>
</span><span class=lnt id=hl-19-210><a class=lnlinks href=#hl-19-210>210</a>
</span><span class=lnt id=hl-19-211><a class=lnlinks href=#hl-19-211>211</a>
</span><span class=lnt id=hl-19-212><a class=lnlinks href=#hl-19-212>212</a>
</span><span class=lnt id=hl-19-213><a class=lnlinks href=#hl-19-213>213</a>
</span><span class=lnt id=hl-19-214><a class=lnlinks href=#hl-19-214>214</a>
</span><span class=lnt id=hl-19-215><a class=lnlinks href=#hl-19-215>215</a>
</span><span class=lnt id=hl-19-216><a class=lnlinks href=#hl-19-216>216</a>
</span><span class=lnt id=hl-19-217><a class=lnlinks href=#hl-19-217>217</a>
</span><span class=lnt id=hl-19-218><a class=lnlinks href=#hl-19-218>218</a>
</span><span class=lnt id=hl-19-219><a class=lnlinks href=#hl-19-219>219</a>
</span><span class=lnt id=hl-19-220><a class=lnlinks href=#hl-19-220>220</a>
</span><span class=lnt id=hl-19-221><a class=lnlinks href=#hl-19-221>221</a>
</span><span class=lnt id=hl-19-222><a class=lnlinks href=#hl-19-222>222</a>
</span><span class=lnt id=hl-19-223><a class=lnlinks href=#hl-19-223>223</a>
</span><span class=lnt id=hl-19-224><a class=lnlinks href=#hl-19-224>224</a>
</span><span class=lnt id=hl-19-225><a class=lnlinks href=#hl-19-225>225</a>
</span><span class=lnt id=hl-19-226><a class=lnlinks href=#hl-19-226>226</a>
</span><span class=lnt id=hl-19-227><a class=lnlinks href=#hl-19-227>227</a>
</span><span class=lnt id=hl-19-228><a class=lnlinks href=#hl-19-228>228</a>
</span><span class=lnt id=hl-19-229><a class=lnlinks href=#hl-19-229>229</a>
</span><span class=lnt id=hl-19-230><a class=lnlinks href=#hl-19-230>230</a>
</span><span class=lnt id=hl-19-231><a class=lnlinks href=#hl-19-231>231</a>
</span><span class=lnt id=hl-19-232><a class=lnlinks href=#hl-19-232>232</a>
</span><span class=lnt id=hl-19-233><a class=lnlinks href=#hl-19-233>233</a>
</span><span class=lnt id=hl-19-234><a class=lnlinks href=#hl-19-234>234</a>
</span><span class=lnt id=hl-19-235><a class=lnlinks href=#hl-19-235>235</a>
</span><span class=lnt id=hl-19-236><a class=lnlinks href=#hl-19-236>236</a>
</span><span class=lnt id=hl-19-237><a class=lnlinks href=#hl-19-237>237</a>
</span><span class=lnt id=hl-19-238><a class=lnlinks href=#hl-19-238>238</a>
</span><span class=lnt id=hl-19-239><a class=lnlinks href=#hl-19-239>239</a>
</span><span class=lnt id=hl-19-240><a class=lnlinks href=#hl-19-240>240</a>
</span><span class=lnt id=hl-19-241><a class=lnlinks href=#hl-19-241>241</a>
</span><span class=lnt id=hl-19-242><a class=lnlinks href=#hl-19-242>242</a>
</span><span class=lnt id=hl-19-243><a class=lnlinks href=#hl-19-243>243</a>
</span><span class=lnt id=hl-19-244><a class=lnlinks href=#hl-19-244>244</a>
</span><span class=lnt id=hl-19-245><a class=lnlinks href=#hl-19-245>245</a>
</span><span class=lnt id=hl-19-246><a class=lnlinks href=#hl-19-246>246</a>
</span><span class=lnt id=hl-19-247><a class=lnlinks href=#hl-19-247>247</a>
</span><span class=lnt id=hl-19-248><a class=lnlinks href=#hl-19-248>248</a>
</span><span class=lnt id=hl-19-249><a class=lnlinks href=#hl-19-249>249</a>
</span><span class=lnt id=hl-19-250><a class=lnlinks href=#hl-19-250>250</a>
</span><span class=lnt id=hl-19-251><a class=lnlinks href=#hl-19-251>251</a>
</span><span class=lnt id=hl-19-252><a class=lnlinks href=#hl-19-252>252</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>/*</span>
</span></span><span class=line><span class=cl>    <span class=err>存储函数</span><span class=p>:</span> <span class=err>实际上是将一段已经编译好的</span><span class=n>PLSQL代码片断</span><span class=p>,</span><span class=err>封装在数据库中</span>    
</span></span><span class=line><span class=cl>          <span class=err>作用</span><span class=p>:</span>
</span></span><span class=line><span class=cl>              <span class=mf>1.</span> <span class=err>提高执行效率</span>
</span></span><span class=line><span class=cl>              <span class=mf>2.</span> <span class=err>提高代码复用性</span>
</span></span><span class=line><span class=cl>         <span class=err>语法</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=p>[</span><span class=ow>or</span> <span class=n>replace</span><span class=p>]</span> <span class=n>function</span> <span class=err>函数名称</span><span class=p>(</span><span class=err>参数</span><span class=mi>1</span> <span class=ow>in</span><span class=o>|</span><span class=n>out</span> <span class=err>参数类型</span><span class=p>)</span> <span class=k>return</span> <span class=err>返回类型</span>
</span></span><span class=line><span class=cl>              <span class=n>is</span>
</span></span><span class=line><span class=cl>              <span class=n>begin</span>
</span></span><span class=line><span class=cl>              <span class=n>end</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>              
</span></span><span class=line><span class=cl>          <span class=err>存储过程和存储函数</span><span class=p>:</span>
</span></span><span class=line><span class=cl>              <span class=mf>1.</span> <span class=err>函数有返回值</span><span class=p>,</span><span class=err>过程没有</span>
</span></span><span class=line><span class=cl>              <span class=mf>2.</span> <span class=err>函数可以直接在</span><span class=n>SQL语句中使用</span><span class=p>,</span><span class=err>过程不可以</span>
</span></span><span class=line><span class=cl>              <span class=mf>3.</span> <span class=err>函数能实现的功能</span><span class=p>,</span><span class=err>过程能实现</span>
</span></span><span class=line><span class=cl>              <span class=mf>4.</span> <span class=err>过程能实现的功能</span><span class=p>,</span><span class=err>函数也能实现</span>
</span></span><span class=line><span class=cl>              
</span></span><span class=line><span class=cl>              <span class=mf>5.</span> <span class=err>函数和过程本质上没有区别</span>
</span></span><span class=line><span class=cl>              
</span></span><span class=line><span class=cl>           <span class=err>通常情况下</span><span class=p>,</span><span class=err>我们自己开发封装的是存储过程</span>
</span></span><span class=line><span class=cl><span class=o>*/</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>存储函数</span><span class=p>:</span> <span class=err>获取指定编号员工的年薪</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>参数</span> <span class=p>:</span> <span class=err>员工编号</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>返回</span> <span class=p>:</span> <span class=err>年薪</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=ow>or</span> <span class=n>replace</span> <span class=n>function</span> <span class=n>func_getyearsal</span><span class=p>(</span><span class=n>vempno</span> <span class=n>number</span><span class=p>)</span> <span class=k>return</span> <span class=n>number</span>
</span></span><span class=line><span class=cl><span class=n>is</span> 
</span></span><span class=line><span class=cl>  <span class=o>--</span> <span class=err>声明变量</span>
</span></span><span class=line><span class=cl>  <span class=n>vyearsal</span> <span class=n>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>  <span class=n>select</span> <span class=n>sal</span><span class=o>*</span><span class=mi>12</span><span class=o>+</span><span class=n>nvl</span><span class=p>(</span><span class=n>comm</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span> <span class=n>into</span> <span class=n>vyearsal</span> <span class=n>from</span> <span class=n>emp</span> <span class=n>where</span> <span class=n>empno</span><span class=o>=</span><span class=n>vempno</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>vyearsal</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>调用</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>  <span class=n>yearsal</span> <span class=n>number</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>  <span class=n>yearsal</span> <span class=p>:</span><span class=o>=</span> <span class=n>func_getyearsal</span><span class=p>(</span><span class=mi>7369</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>dbms_output</span><span class=o>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;年薪:&#39;</span><span class=o>||</span><span class=n>yearsal</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>直接在</span><span class=n>SQL语句中使用</span>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=n>emp</span><span class=o>.*</span><span class=p>,</span><span class=n>func_getyearsal</span><span class=p>(</span><span class=n>empno</span><span class=p>)</span> <span class=n>from</span> <span class=n>emp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>/*</span>
</span></span><span class=line><span class=cl>    <span class=err>使用</span><span class=n>java调用数据库中封装好了存储过程</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=err>用户注册</span> <span class=o>---&gt;</span> <span class=err>数据校验</span>
</span></span><span class=line><span class=cl>    <span class=n>javaEE后台什么校验都不写</span><span class=p>,</span> <span class=err>直接将所有校验都丢给数据库存储过程</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>java调用存储过程的步骤</span><span class=p>:</span>
</span></span><span class=line><span class=cl>         <span class=n>JDBC开发步骤</span><span class=p>:</span>
</span></span><span class=line><span class=cl>               <span class=mf>1.</span> <span class=err>注册驱动</span>
</span></span><span class=line><span class=cl>               <span class=mf>2.</span> <span class=err>获取连接</span>
</span></span><span class=line><span class=cl>               <span class=mf>3.</span> <span class=err>获取执行</span><span class=n>SQL的对象</span>
</span></span><span class=line><span class=cl>               <span class=mf>4.</span> <span class=err>执行</span><span class=n>SQL</span>
</span></span><span class=line><span class=cl>               <span class=mf>5.</span> <span class=err>获取结果</span>
</span></span><span class=line><span class=cl>               <span class=mf>6.</span> <span class=err>释放资源</span>
</span></span><span class=line><span class=cl><span class=o>*/</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=n>java</span> <span class=err>调用一个获取年薪的存储过程</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>练习</span> <span class=p>:</span> <span class=n>java调用输出类型为游标的存储过程</span>
</span></span><span class=line><span class=cl><span class=o>/*</span>
</span></span><span class=line><span class=cl>   <span class=n>cursor</span> <span class=err>游标名</span> <span class=n>is</span> <span class=err>查询结果</span>
</span></span><span class=line><span class=cl>   
</span></span><span class=line><span class=cl>   <span class=n>sys_refcursor</span> <span class=p>:</span> <span class=err>系统引用游标</span><span class=p>,</span> <span class=err>游标类型声明</span>
</span></span><span class=line><span class=cl><span class=o>*/</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=ow>or</span> <span class=n>replace</span> <span class=n>procedure</span> <span class=n>proc_getemps</span><span class=p>(</span><span class=n>vemps</span> <span class=n>out</span> <span class=n>sys_refcursor</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>is</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>   <span class=o>--</span> <span class=err>输出</span><span class=n>sys_refcursor20号部门下的所有员工</span>
</span></span><span class=line><span class=cl>   <span class=o>--</span> <span class=err>打开游标的时候</span><span class=p>,</span><span class=err>指定结果集</span>
</span></span><span class=line><span class=cl>   <span class=n>open</span> <span class=n>vemps</span> <span class=k>for</span> <span class=n>select</span> <span class=o>*</span> <span class=n>from</span> <span class=n>emp</span> <span class=n>where</span> <span class=n>deptno</span><span class=o>=</span><span class=mi>20</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=o>--</span> <span class=err>谁用谁关闭</span>
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>调用</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>  <span class=n>emps</span> <span class=n>sys_refcursor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>vrow</span> <span class=n>emp</span><span class=o>%</span><span class=n>rowtype</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>  <span class=o>--</span> <span class=err>已经打开并且指定了结果集</span>
</span></span><span class=line><span class=cl>  <span class=n>proc_getemps</span><span class=p>(</span><span class=n>emps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=o>--</span><span class=err>循环提取游标中的数据</span>
</span></span><span class=line><span class=cl>  <span class=n>loop</span>
</span></span><span class=line><span class=cl>     <span class=n>fetch</span> <span class=n>emps</span> <span class=n>into</span> <span class=n>vrow</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>     <span class=n>exit</span> <span class=n>when</span> <span class=n>emps</span><span class=o>%</span><span class=n>notfound</span><span class=p>;</span>
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     <span class=n>dbms_output</span><span class=o>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;姓名:&#39;</span><span class=o>||</span><span class=n>vrow</span><span class=o>.</span><span class=n>ename</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>end</span> <span class=n>loop</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>--</span> <span class=err>关闭游标</span>
</span></span><span class=line><span class=cl>  <span class=n>close</span> <span class=n>emps</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>/*</span>
</span></span><span class=line><span class=cl>   <span class=err>自定义例外</span>
</span></span><span class=line><span class=cl>   <span class=err>存储过程</span>
</span></span><span class=line><span class=cl>   <span class=err>存储函数</span>
</span></span><span class=line><span class=cl>   <span class=n>java调用存储过程</span>
</span></span><span class=line><span class=cl>   
</span></span><span class=line><span class=cl>   <span class=err>触发器</span><span class=p>:</span>
</span></span><span class=line><span class=cl>         <span class=err>当用户对表执行了</span><span class=n>insert</span> <span class=o>|</span> <span class=n>update</span> <span class=o>|</span> <span class=n>delete</span> <span class=err>这些操作的时候</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=err>可以使用触发器去触发一段</span><span class=n>PLSQL代码逻辑的执行</span>
</span></span><span class=line><span class=cl>           <span class=err>作用</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=err>监听表中数据变化</span>
</span></span><span class=line><span class=cl>                <span class=err>对表中数据进行校验</span>             
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>           <span class=err>语法</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>create</span> <span class=ow>or</span> <span class=n>replace</span> <span class=n>trigger</span> <span class=err>触发器名称</span>
</span></span><span class=line><span class=cl>                <span class=n>before</span> <span class=o>|</span> <span class=n>after</span>
</span></span><span class=line><span class=cl>                <span class=n>insert</span> <span class=o>|</span> <span class=n>update</span> <span class=o>|</span> <span class=n>delete</span>
</span></span><span class=line><span class=cl>                <span class=n>on</span> <span class=err>表名</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=k>for</span> <span class=n>each</span> <span class=n>row</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>declare</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>begin</span>
</span></span><span class=line><span class=cl>                  
</span></span><span class=line><span class=cl>                <span class=n>end</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>         <span class=err>触发器的分类</span><span class=p>:</span>
</span></span><span class=line><span class=cl>               <span class=err>行级触发器</span><span class=p>:</span> <span class=err>一条</span><span class=n>SQL语句</span><span class=p>,</span> <span class=err>影响了多少行记录</span><span class=p>,</span> <span class=err>触发器就会执行多少次</span>
</span></span><span class=line><span class=cl>                      <span class=err>两个内置对象</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                               <span class=p>:</span><span class=n>new</span>   <span class=err>新的记录</span>  
</span></span><span class=line><span class=cl>                               <span class=p>:</span><span class=n>old</span>   <span class=err>旧的记录</span>
</span></span><span class=line><span class=cl>                      <span class=n>update</span> <span class=n>emp</span> <span class=n>set</span> <span class=n>sal</span><span class=o>=</span><span class=n>sal</span><span class=o>+</span><span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                      
</span></span><span class=line><span class=cl>                           <span class=p>:</span><span class=n>new</span><span class=o>.</span><span class=n>sal</span>  <span class=o>---&gt;</span> <span class=n>sal</span><span class=o>+</span><span class=mi>100</span>
</span></span><span class=line><span class=cl>                           <span class=p>:</span><span class=n>old</span><span class=o>.</span><span class=n>sal</span>  <span class=o>---&gt;</span> <span class=n>sal</span>
</span></span><span class=line><span class=cl>                               
</span></span><span class=line><span class=cl>               <span class=err>语句级触发器</span><span class=p>:</span> <span class=err>一条</span><span class=n>SQL语句</span><span class=p>,</span> <span class=err>无论影响了多少行记录</span><span class=p>,</span> <span class=err>都只触发一次</span>                                
</span></span><span class=line><span class=cl><span class=o>*/</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>若用户向表中插入数据之后</span><span class=p>,</span> <span class=err>打印一句话</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=ow>or</span> <span class=n>replace</span> <span class=n>trigger</span> <span class=n>tri_test1</span>
</span></span><span class=line><span class=cl><span class=n>after</span>
</span></span><span class=line><span class=cl><span class=n>insert</span> 
</span></span><span class=line><span class=cl><span class=n>on</span> <span class=n>emp</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>   <span class=n>dbms_output</span><span class=o>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;有人插入了....&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>emp</span><span class=p>(</span><span class=n>empno</span><span class=p>,</span><span class=n>ename</span><span class=p>)</span> <span class=n>values</span><span class=p>(</span><span class=mi>9527</span><span class=p>,</span><span class=s1>&#39;华安&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>执行一条更新工资的语句</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>周二老板不在</span><span class=p>,</span><span class=err>不能办理员工入职</span><span class=p>(</span><span class=err>不能向员工表中插入数据</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>触发器</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=n>before</span> <span class=n>insert</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>判断今天是否是周二</span>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=n>trim</span><span class=p>(</span><span class=n>to_char</span><span class=p>(</span><span class=n>sysdate</span><span class=p>,</span><span class=s1>&#39;day&#39;</span><span class=p>))</span> <span class=n>from</span> <span class=n>dual</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=ow>or</span> <span class=n>replace</span> <span class=n>trigger</span> <span class=n>tri_checkday</span>
</span></span><span class=line><span class=cl><span class=n>before</span>
</span></span><span class=line><span class=cl><span class=n>insert</span>
</span></span><span class=line><span class=cl><span class=n>on</span> <span class=n>emp</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>   <span class=n>vday</span> <span class=n>varchar2</span><span class=p>(</span><span class=mi>20</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>   <span class=o>--</span> <span class=err>查询当前周几</span>
</span></span><span class=line><span class=cl>   <span class=n>select</span> <span class=n>trim</span><span class=p>(</span><span class=n>to_char</span><span class=p>(</span><span class=n>sysdate</span><span class=p>,</span><span class=s1>&#39;day&#39;</span><span class=p>))</span> <span class=n>into</span> <span class=n>vday</span> <span class=n>from</span> <span class=n>dual</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=o>--</span> <span class=err>判断是否为周二</span><span class=p>,</span><span class=err>若为周二</span><span class=p>,</span><span class=err>则需要中断插入操作</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=n>vday</span> <span class=o>=</span> <span class=s1>&#39;tuesday&#39;</span> <span class=n>then</span>
</span></span><span class=line><span class=cl>     <span class=o>--</span>                   <span class=o>-</span><span class=mi>20000</span> <span class=o>-</span> <span class=o>-</span><span class=mi>20999</span>
</span></span><span class=line><span class=cl>     <span class=n>raise_application_error</span><span class=p>(</span><span class=o>-</span><span class=mi>20001</span><span class=p>,</span><span class=s1>&#39;周二老板不在,不能插入&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=n>end</span> <span class=k>if</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>emp</span><span class=p>(</span><span class=n>empno</span><span class=p>,</span><span class=n>ename</span><span class=p>)</span> <span class=n>values</span><span class=p>(</span><span class=mi>9527</span><span class=p>,</span><span class=s1>&#39;华安&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=o>*</span> <span class=n>from</span> <span class=n>emp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>语句级触发器</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=n>trigger</span> <span class=n>tri_test3</span>
</span></span><span class=line><span class=cl><span class=n>before</span>
</span></span><span class=line><span class=cl><span class=n>update</span>
</span></span><span class=line><span class=cl><span class=n>on</span> <span class=n>emp</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>  <span class=n>dbms_output</span><span class=o>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;语句级触发器&#39;</span><span class=p>);</span> 
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>行级触发器</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=ow>or</span> <span class=n>replace</span> <span class=n>trigger</span> <span class=n>tri_test4</span>
</span></span><span class=line><span class=cl><span class=n>before</span>
</span></span><span class=line><span class=cl><span class=n>update</span>
</span></span><span class=line><span class=cl><span class=n>on</span> <span class=n>emp</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>each</span> <span class=n>row</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>  <span class=n>dbms_output</span><span class=o>.</span><span class=n>put_line</span><span class=p>(</span><span class=s1>&#39;行级触发器,旧的工资:&#39;</span><span class=o>||</span><span class=p>:</span><span class=n>old</span><span class=o>.</span><span class=n>sal</span><span class=o>||</span><span class=s1>&#39;  新的工资:&#39;</span><span class=o>||</span><span class=p>:</span><span class=n>new</span><span class=o>.</span><span class=n>sal</span><span class=p>);</span> 
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>update</span> <span class=n>emp</span> <span class=n>set</span> <span class=n>sal</span><span class=o>=</span><span class=n>sal</span><span class=o>+</span><span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=mi>6</span><span class=err>个月</span> <span class=o>---&gt;</span> <span class=err>人事</span> <span class=err>加薪</span> <span class=o>---&gt;</span> <span class=err>加</span><span class=mi>10</span><span class=err>块钱</span> <span class=o>---&gt;</span> <span class=err>老板签字</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>校验员工薪资</span> <span class=err>调整后的工资一定要</span> <span class=err>大于</span> <span class=err>薪资调整前的工资</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>触发器</span><span class=p>:</span>  <span class=n>before</span> <span class=n>update</span> <span class=n>on</span> <span class=n>emp</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>行级触发器</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=ow>or</span> <span class=n>replace</span> <span class=n>trigger</span> <span class=n>tri_checksal</span>
</span></span><span class=line><span class=cl><span class=n>before</span>
</span></span><span class=line><span class=cl><span class=n>update</span>
</span></span><span class=line><span class=cl><span class=n>on</span> <span class=n>emp</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>each</span> <span class=n>row</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>  <span class=o>--</span> <span class=err>调整后的工资</span> <span class=o>&lt;=</span> <span class=err>薪资调整前的工资</span> <span class=p>,</span><span class=err>则中断更新操作</span>
</span></span><span class=line><span class=cl>  <span class=o>--</span> <span class=p>:</span><span class=n>new</span><span class=o>.</span><span class=n>sal</span>    <span class=o>&lt;=</span> <span class=p>:</span><span class=n>old</span><span class=o>.</span><span class=n>sal</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>:</span><span class=n>new</span><span class=o>.</span><span class=n>sal</span> <span class=o>&lt;=</span> <span class=p>:</span><span class=n>old</span><span class=o>.</span><span class=n>sal</span> <span class=n>then</span>
</span></span><span class=line><span class=cl>     <span class=n>raise_application_error</span><span class=p>(</span><span class=o>-</span><span class=mi>20002</span><span class=p>,</span><span class=s1>&#39;坑爹的,降薪啦!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>end</span> <span class=k>if</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>update</span> <span class=n>emp</span> <span class=n>set</span> <span class=n>sal</span><span class=o>=</span><span class=n>sal</span><span class=o>-</span><span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>/*</span>
</span></span><span class=line><span class=cl>     <span class=err>使用触发器模拟类似</span><span class=n>auto_increment功能</span>
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     <span class=err>当用户插入的时候</span><span class=p>,</span><span class=err>若为</span><span class=n>sid为null</span><span class=p>,</span><span class=err>则给</span><span class=n>sid赋值一个编号</span>
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl><span class=o>*/</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=n>table</span> <span class=n>stu</span><span class=p>(</span>
</span></span><span class=line><span class=cl>     <span class=n>sid</span> <span class=n>number</span> <span class=n>primary</span> <span class=n>key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>     <span class=n>name</span> <span class=n>varchar2</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>创建一个序列</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=n>sequence</span> <span class=n>seq_stu</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>触发器</span><span class=p>:</span> <span class=n>before</span> <span class=n>insert</span> <span class=n>on</span> <span class=n>stu</span>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>行级触发器</span>
</span></span><span class=line><span class=cl><span class=n>create</span> <span class=ow>or</span> <span class=n>replace</span> <span class=n>trigger</span> <span class=n>tri_auto</span>
</span></span><span class=line><span class=cl><span class=n>before</span>
</span></span><span class=line><span class=cl><span class=n>insert</span> 
</span></span><span class=line><span class=cl><span class=n>on</span> <span class=n>stu</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>each</span> <span class=n>row</span>
</span></span><span class=line><span class=cl><span class=n>declare</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>begin</span>
</span></span><span class=line><span class=cl>   <span class=o>--</span> <span class=err>从序列中查询一个数字出来</span><span class=p>,</span><span class=err>赋值给</span><span class=n>sid</span>
</span></span><span class=line><span class=cl>   <span class=n>select</span> <span class=n>seq_stu</span><span class=o>.</span><span class=n>nextval</span> <span class=n>into</span> <span class=p>:</span><span class=n>new</span><span class=o>.</span><span class=n>sid</span> <span class=n>from</span> <span class=n>dual</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>end</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span> <span class=err>同样一张表</span><span class=p>,</span><span class=err>有时候自己指定</span><span class=n>id</span><span class=p>,</span> <span class=err>有时候需要数据库自动生成</span><span class=n>id</span>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>stu</span> <span class=n>values</span><span class=p>(</span><span class=n>null</span><span class=p>,</span><span class=s1>&#39;zs&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>insert</span> <span class=n>into</span> <span class=n>stu</span> <span class=n>values</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=s1>&#39;zs&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>select</span> <span class=o>*</span> <span class=n>from</span> <span class=n>stu</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><div class=post-tags><a href=/tags/oracle/>oracle</a></div><div class=post-share-tools><div class=post-share-loading><i class="fa-solid fa-ellipsis fa-spin"></i></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class=a2a_dd href=https://www.addtoany.com/share></a><a class=a2a_button_wechat></a><a class=a2a_button_qzone></a><a class=a2a_button_sina_weibo></a><a class=a2a_button_douban></a><a class=a2a_button_facebook></a><a class=a2a_button_x></a><a class=a2a_button_email></a><a class=a2a_button_printfriendly></a></div></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>有价值，请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="你永远无法说服猴子说有一个上帝存在 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="你永远无法说服猴子说有一个上帝存在 - 微信">
<span>微信</span></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/mysql%E8%AF%AD%E5%8F%A5/ rel=next title=mysql><i class="fa fa-chevron-left"></i> mysql</a></div><div class="post-nav-prev post-nav-item"><a href=/post/php%E5%9F%BA%E7%A1%80/ rel=prev title=PHP基础>PHP基础
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=i18n-translate class=i18n-translate><i class="fa fa-language"></i><div id=lang-select class=lang-select><div id=lang-selected class=selected-option><span class="flag-icon flag-icon-zh-cn"></span>
<span class=selected-language>简体中文</span>
<i class="fa fa-chevron-down"></i></div><div id=lang-options class=lang-options><div class=lang-option lang-code=zh-cn lang-name=简体中文 lang-url=/post/oracle/><span class="flag-icon flag-icon-zh-cn"></span>
<span class=lang-name>简体中文</span></div></div></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>你永远无法说服猴子说有一个上帝存在</span></div><div class=custom-footer><meta name=referrer content="no-referrer"></div></div></footer><script class=next-config data-name=page type=application/json>{"clipboard":{"js":{"alias":"clipboard","file":"dist/clipboard.min.js","name":"clipboard.js","version":"2.0.11"}},"comments":false,"expired":false,"isHome":false,"isPage":true,"path":"oracle","permalink":"/post/oracle/","title":"oracle","toc":true,"waline":{"commentcnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}}}</script><script type=text/javascript src=/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":true,"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":false,"enable":false,"transition":{"collheader":"slideInRight","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":true},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"/js/3rd"}},"version":"4.8.1","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src="/js/main.min.js?=1761963148" defer></script><script type=text/javascript src="/js/clipboard.min.js?=1761963148" defer></script></body></html>