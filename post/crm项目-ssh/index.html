<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.152.2"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="CRM系统"><meta itemprop=description content="总有一些人先看到未来"><meta name=description content="总有一些人先看到未来"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="CRM系统"><meta property="og:type" content="article"><meta property="og:title" content="CRM系统"><meta property="og:description" content="总有一些人先看到未来"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="/post/crm%E9%A1%B9%E7%9B%AE-ssh/"><meta property="og:site_name" content="你永远无法说服猴子说有一个上帝存在"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="你永远无法说服猴子说有一个上帝存在"><meta property="article:published_time" content="2019-07-22 15:32:20 +0000 UTC"><meta property="article:modified_time" content="2019-07-22 15:32:20 +0000 UTC"><link type=text/css rel=stylesheet href=/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1766275881"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><link rel=stylesheet type=text/css href="/css/custom_style.css?=1766275881"><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>CRM系统 - 你永远无法说服猴子说有一个上帝存在</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>你永远无法说服猴子说有一个上帝存在</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>一生一次的人生该如何度过呢？每次想到有你与我同行，路，必须走下去</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section>首页</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section>分类</a></li><li class="menu-item menu-item-commonweal"><a href=/categories/%E4%BB%B7%E5%80%BC/ class=hvr-icon-pulse rel=section>价值</a></li><li class="menu-item menu-item-about"><a href=/categories/%E5%A6%B9%E5%AD%90/ class=hvr-icon-pulse rel=section>妹子</a></li><li class="menu-item menu-item-"><a href=/ class="menus-parent hvr-icon-pulse" rel=section>玩客集
<span class=menu-item-shrink-icon><i class="fa fa-angle-right"></i></span></a><ul class=menu-children><li class=menu-child-item><a href=/categories/%E7%BC%96%E7%A8%8B/ class=hvr-icon-pulse rel=section><i class="fa hvr-icon"></i>编程</a></li></ul></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse">搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#注册>注册</a></li><li><a href=#登陆>登陆</a></li><li><a href=#客户管理新增客户customer>客户管理&ndash;新增客户/customer</a></li><li><a href=#客户来源-客户行业-客户级别的三个下拉业务-字典bean>客户来源 客户行业 客户级别的三个下拉业务 字典bean</a></li><li><a href=#使用struts方式返回json数据-下拉业务的-信息来源-行业-级别>使用Struts方式返回json数据 /下拉业务的 信息来源 行业 级别</a></li><li><a href=#数据校验>数据校验</a></li><li><a href=#回显-漏掉的数据-不会重复>回显 漏掉的数据 不会重复</a></li><li><a href=#图片上传>图片上传</a></li><li><a href=#客户列表>客户列表</a><ul><li><a href=#menujsp-左框-里客户列表请求>menu.jsp 左框 里客户列表请求</a></li><li><a href=#customeraction里的分页显示客户列表-public-string-findbypage->CustomerAction里的分页显示客户列表 public String findByPage() {</a></li><li><a href=#pagebeanjava--bean包下-提供setgettostring方法>PageBean.java bean包下 提供set/get/tostring方法</a></li><li><a href=#到-customerserviceimpl--分页显示客户列表-有两个地方会走这个方法>到 CustomerServiceImpl 分页显示客户列表 有两个地方会走这个方法：</a></li><li><a href=#service接口-customerservice>service接口 CustomerService</a></li><li><a href=#service实现类-customerserviceimpl>service实现类 CustomerServiceImpl</a></li><li><a href=#dao接口-customerdao>dao接口 CustomerDao</a></li><li><a href=#dao实现-customerdaoimpl>dao实现 CustomerDaoImpl</a></li><li><a href=#strutsxml>struts.xml</a></li><li><a href=#jspcustomerlistjsp>/jsp/customer/list.jsp</a></li><li><a href=#懒加载过滤器-webxml>懒加载过滤器 web.xml</a></li><li><a href=#遍历客户-下面的分页-上下页-分页-跳转的div>遍历客户 下面的分页 上下页 分页 跳转的div</a></li><li><a href=#最后都是提交的表单>最后都是提交的表单</a></li></ul></li><li><a href=#筛选>筛选</a><ul><li><a href=#listjsp>list.jsp</a></li><li><a href=#customeractionjava>CustomerAction.java</a></li><li><a href=#js-加载完就执行下拉三个方法>js 加载完就执行下拉三个方法</a></li><li><a href=#回显筛选的文本框用标记-下拉用上面的js>回显筛选的文本框用标记 下拉用上面的js</a></li><li><a href=#信息创建人和对客户负责人>信息创建人和对客户负责人</a></li></ul></li><li><a href=#删除>删除</a></li><li><a href=#修改>修改</a><ul><li><a href=#listjsp-传参数过去到edit方法>list.jsp 传参数过去到edit方法</a></li><li><a href=#customeractionjava第一步先根据id查询客户对象存值栈-跳转到修改页面>CustomerAction.java第一步先根据id查询客户对象存值栈 跳转到修改页面</a></li><li><a href=#strutsxml--转到edit页面>struts.xml 转到edit页面</a></li><li><a href=#关闭懒加载才能进入editjsp-customerhbmxml>关闭懒加载才能进入edit.jsp Customer.hbm.xml</a></li><li><a href=#回显到-editjsp--修改成-值栈里对应的value>回显到 edit.jsp 修改成 值栈里对应的value</a></li><li><a href=#js-设置下拉的回显>js 设置下拉的回显</a></li><li><a href=#保存>保存</a></li><li><a href=#客户图片回显>客户图片回显</a></li></ul></li><li><a href=#联系人>联系人</a></li><li><a href=#客户拜访>客户拜访</a></li><li><a href=#basedao抽取>BaseDao抽取</a></li><li><a href=#登陆拦截器>登陆拦截器</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=你永远无法说服猴子说有一个上帝存在 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>你永远无法说服猴子说有一个上帝存在</p><div class=site-description itemprop=description>总有一些人先看到未来</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>3366</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>17</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>469</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=#ZgotmplZ title="QQ → tencent://Message/?Uin=304967823&amp;websiteName=www.tcioc.com&amp;Menu=yes" rel=noopener target=_blank><i class="fa fa-quora fa-fw"></i>
QQ
</a></span><span class=links-of-social-item><a href=https://github.com/loveyouluobin title="Github → https://github.com/loveyouluobin" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>
Github
</a></span><span class=links-of-social-item><a href=mailto:304967823@qq.com title="E-Mail → mailto:304967823@qq.com" rel=noopener target=_blank><i class="fa fa-envelope fa-fw"></i>
E-Mail
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/loveyouluobin title="知乎 → https://www.zhihu.com/people/loveyouluobin" rel=noopener target=_blank><i class="fa fa-book fa-fw"></i>
知乎</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://www.zaobao.com/ title=https://www.zaobao.com/ target=_blank>联合早报</a></li><li class=links-of-blogroll-item><a href=https://xiaodu114.github.io/p/fav/imageSite/ title=https://xiaodu114.github.io/p/fav/imageSite/ target=_blank>谷歌搜索</a></li><li class=links-of-blogroll-item><a href=https://yandex.com/ title=https://yandex.com/ target=_blank>懂你的搜索</a></li></ul></div><div class="mydefined animated" itemprop=custom><span></span></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate="0001-01-01 00:00:00 +0000 UTC"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=17939760></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=37514></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate="2025-12-20 15:39:16 +0000 UTC"></div></div></div></div><div class="sidebar-card-widget back-to-top-card"><div class="back-to-top animated" role=button aria-label><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-i18n-translate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=/post/crm%E9%A1%B9%E7%9B%AE-ssh/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="你永远无法说服猴子说有一个上帝存在"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="你永远无法说服猴子说有一个上帝存在"><meta itemprop=description content="总有一些人先看到未来"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="CRM系统"><meta itemprop=description content="注册

bean包下 建用户类 User.java 提供set/get/tostring方法



1
2
3
4
5


private Long user_id;//用户id
private String user_code;  //用户账号
private String user_name; //用户昵称
private String user_password;//用户密码
private char user_state;  //用户状态 ： 1 ： 可用 ，0 ： 暂停使用

"></span><header class=post-header><h1 class=post-title itemprop="name headline">CRM系统</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2019-07-22 15:32:20 +00:00" itemprop="dateCreated datePublished" datetime="2019-07-22 15:32:20 +0000 UTC">2019-07-22
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E7%BC%96%E7%A8%8B/ itemprop=url rel=index><span itemprop=name>编程</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>13590</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>28分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/post/crm%E9%A1%B9%E7%9B%AE-ssh/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h2 id=注册>注册
<a class=header-anchor href=#%e6%b3%a8%e5%86%8c></a></h2><p>bean包下 建用户类 User.java 提供set/get/tostring方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>private Long user_id;//用户id
</span></span><span class=line><span class=cl>private String user_code;  //用户账号
</span></span><span class=line><span class=cl>private String user_name; //用户昵称
</span></span><span class=line><span class=cl>private String user_password;//用户密码
</span></span><span class=line><span class=cl>private char user_state;  //用户状态 ： 1 ： 可用 ，0 ： 暂停使用</span></span></code></pre></td></tr></table></div></div><a id=more></a><p>User.hbm.xml 关联会生成 sys_user表</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;hibernate-mapping&gt;
</span></span><span class=line><span class=cl>	&lt;class name=&#34;com.itheima.bean.User&#34; table=&#34;sys_user&#34;&gt;
</span></span><span class=line><span class=cl>		&lt;id name=&#34;user_id&#34;&gt;
</span></span><span class=line><span class=cl>			&lt;generator class=&#34;native&#34;&gt;&lt;/generator&gt;
</span></span><span class=line><span class=cl>		&lt;/id&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;user_code&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;user_name&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;user_password&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;user_state&#34;/&gt;
</span></span><span class=line><span class=cl>	&lt;/class&gt;
</span></span><span class=line><span class=cl>&lt;/hibernate-mapping&gt;</span></span></code></pre></td></tr></table></div></div><p>register.jsp 的前端请求</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;form action=&#34;${pageContext.request.contextPath }/user_register&#34; method=&#34;post&#34;&gt;
</span></span><span class=line><span class=cl>用户名： &lt;input type=&#34;text&#34; name=&#34;user_code&#34;/&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>用户密码： &lt;input type=&#34;password&#34; name=&#34;user_password&#34;/&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>用户昵称： &lt;input type=&#34;text&#34; name=&#34;user_name&#34;/&gt;&lt;br&gt;
</span></span><span class=line><span class=cl>input type=&#34;submit&#34;  value=&#34;注册&#34;/&gt;&lt;/form&gt;</span></span></code></pre></td></tr></table></div></div><p>UserAction.java 新建在 web.action包下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>UserAction</span> <span class=k>extends</span> <span class=n>ActionSupport</span> <span class=n>implements</span> <span class=n>ModelDriven</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=n>private</span> <span class=n>User</span> <span class=n>user</span><span class=p>;</span><span class=o>//</span><span class=err>声明</span><span class=n>user对象</span>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=n>Override</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>User</span> <span class=n>getModel</span><span class=p>()</span> <span class=p>{</span><span class=o>//</span><span class=err>重写</span><span class=n>getModel方法new出user对象并返回</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>user</span><span class=o>==</span><span class=n>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	 <span class=n>user</span> <span class=o>=</span> <span class=n>new</span> <span class=n>User</span><span class=p>();</span>		<span class=p>}</span> 
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>user</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>private</span> <span class=n>UserService</span> <span class=n>userService</span><span class=p>;</span><span class=o>//</span><span class=err>声明</span><span class=n>userService对象</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>void</span> <span class=n>setUserService</span><span class=p>(</span><span class=n>UserService</span> <span class=n>userService</span><span class=p>)</span> <span class=p>{</span><span class=o>//</span><span class=err>提供</span><span class=n>set方法</span>
</span></span><span class=line><span class=cl>	<span class=n>this</span><span class=o>.</span><span class=n>userService</span> <span class=o>=</span> <span class=n>userService</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=ne>String</span> <span class=n>register</span><span class=p>()</span> <span class=p>{</span><span class=o>//</span><span class=err>注册</span>
</span></span><span class=line><span class=cl><span class=n>user</span><span class=o>.</span><span class=n>setUser_state</span><span class=p>(</span><span class=s1>&#39;1&#39;</span><span class=p>);</span><span class=o>//</span><span class=err>设置状态为</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>userService</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=n>user</span><span class=p>);</span><span class=o>//</span><span class=err>到</span><span class=n>userService</span> <span class=err>注册业务</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>NONE</span><span class=p>;}</span><span class=o>//</span><span class=err>返回</span> <span class=err>为无</span></span></span></code></pre></td></tr></table></div></div><p>接口UserService</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public interface UserService {	void register(User user);}</span></span></code></pre></td></tr></table></div></div><p>UserService接口 实现类UserServiceImpl 并开启事务@Transactional</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>@Transactional
</span></span><span class=line><span class=cl>public class UserServiceImpl implements UserService {
</span></span><span class=line><span class=cl>	private UserDao userDao;//声明userDao接口
</span></span><span class=line><span class=cl>	public void setUserDao(UserDao userDao) {//提供set方法
</span></span><span class=line><span class=cl>		this.userDao = userDao;	}
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>	@Override
</span></span><span class=line><span class=cl>	public void register(User user) {//重写接口UserService 方法 
</span></span><span class=line><span class=cl>	String pwd = Md5Util.encodePwd(user.getUser_password());//把密码 加密
</span></span><span class=line><span class=cl>		user.setUser_password(pwd);//设置封闭进去
</span></span><span class=line><span class=cl>		userDao.save(user);	}//调用userDao接口的.save方法</span></span></code></pre></td></tr></table></div></div><p>接口UserDao</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public interface UserDao {void save(User user);}</span></span></code></pre></td></tr></table></div></div><p>UserDao接口 实现类UserDaoImpl extends HibernateDaoSupport</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>UserDaoImpl</span> <span class=k>extends</span> <span class=n>HibernateDaoSupport</span> <span class=n>implements</span> <span class=n>UserDao</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>void</span> <span class=n>save</span><span class=p>(</span><span class=n>User</span> <span class=n>user</span><span class=p>)</span> <span class=p>{</span><span class=o>//</span><span class=err>重写接口方法</span>
</span></span><span class=line><span class=cl>	<span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>user</span><span class=p>);}}</span><span class=o>//</span><span class=err>继承</span><span class=n>getHibernateTemplate父类的save方法把user扔进去就好</span></span></span></code></pre></td></tr></table></div></div><p>applicationContext.xml</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;!-- 以下属于UserAction模块配置 多例 --&gt;
</span></span><span class=line><span class=cl>&lt;bean id=&#34;userAction&#34; class=&#34;com.it.web.action.UserAction&#34; scope=&#34;prototype&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;property name=&#34;userService&#34; ref=&#34;userService&#34;&gt;&lt;/property&gt;
</span></span><span class=line><span class=cl>&lt;/bean&gt;
</span></span><span class=line><span class=cl>&lt;bean id=&#34;userService&#34; class=&#34;com.it.service.impl.UserServiceImpl&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;property name=&#34;userDao&#34; ref=&#34;userDao&#34;&gt;&lt;/property&gt;
</span></span><span class=line><span class=cl>&lt;/bean&gt;
</span></span><span class=line><span class=cl>&lt;bean id=&#34;userDao&#34; class=&#34;com.it.dao.impl.UserDaoImpl&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;property name=&#34;sessionFactory&#34; ref=&#34;sessionFactory&#34;&gt;&lt;/property&gt;
</span></span><span class=line><span class=cl>&lt;/bean&gt;</span></span></code></pre></td></tr></table></div></div><p>struts.xml配置:前端的请求以user_*开头的请求会到这里 然后指定一组请求集合package名user里的请求的Aiton类全限定名地址 result设置处理后的请求转发地址</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>struts</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>&lt;</span><span class=kn>package</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;user&#34;</span><span class=w> </span><span class=nx>namespace</span><span class=p>=</span><span class=s>&#34;/&#34;</span><span class=w> </span><span class=nx>extends</span><span class=p>=</span><span class=s>&#34;struts-default&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=p>&lt;</span><span class=nx>action</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;user_*&#34;</span><span class=w> </span><span class=nx>class</span><span class=p>=</span><span class=s>&#34;userAction&#34;</span><span class=w> </span><span class=nx>method</span><span class=p>=</span><span class=s>&#34;{1}&#34;</span><span class=w> </span><span class=p>&gt;&lt;</span><span class=o>/</span><span class=nx>action</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>&lt;</span><span class=o>/</span><span class=kn>package</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=o>/</span><span class=nx>struts</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div><h2 id=登陆>登陆
<a class=header-anchor href=#%e7%99%bb%e9%99%86></a></h2><p>前端 login.jsp</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;FORM id=form1 name=form1 action=&#34;${pageContext.request.contextPath}/user_login&#34; method=&#34;post&#34;&gt;</span></span></code></pre></td></tr></table></div></div><p>UserAction.java里新建 login登陆方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7>7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8>8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public String login() {//登陆
</span></span><span class=line><span class=cl>User loginUser=userService.login(user);//调登陆业务返回loginUser
</span></span><span class=line><span class=cl>if (loginUser!=null) {//登陆成功 存到session
</span></span><span class=line><span class=cl>ServletActionContext.getRequest().getSession().setAttribute(&#34;user&#34;, loginUser);
</span></span><span class=line><span class=cl>	return Constant.LOGIN_SUCCESS;//返回到常量接口里的常量 常量再赋值给login_success
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>//ActionContext.getContext().getValueStack().set(&#34;msg&#34;, &#34;帐号或密码错误&#34;);//存到值栈
</span></span><span class=line><span class=cl>addFieldError(&#34;msg&#34;, &#34;帐号或密码错误&#34;);//采用struts里的方法回显错误 取值${fieldErrors.msg[0] }
</span></span><span class=line><span class=cl>return Constant.LOGIN_ERROR;}//返回 失败</span></span></code></pre></td></tr></table></div></div><p>interface UserService接:User login(User user); UserServiceImpl实现类:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public User login(User user) {
</span></span><span class=line><span class=cl>		String pwd = Md5Util.encodePwd(user.getUser_password());//也把密码加密
</span></span><span class=line><span class=cl>		user.setUser_password(pwd);//设置封闭进去
</span></span><span class=line><span class=cl>		return userDao.findUser(user);</span></span></code></pre></td></tr></table></div></div><p>interface UserDao接口:User findUser(User user); UserDaoImpl实现类</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2>2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3>3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4>4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5>5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6>6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public User findUser(User user) {
</span></span><span class=line><span class=cl>String hql=&#34;from User where user_code=? and user_password=? and user_state=1&#34;;
</span></span><span class=line><span class=cl>List&lt;User&gt; list = (List&lt;User&gt;) getHibernateTemplate().find(hql, user.getUser_code(),user.getUser_password());//spring里的模板方法得到的是list
</span></span><span class=line><span class=cl>	if (list.size()&gt;0) {
</span></span><span class=line><span class=cl>		return list.get(0);//返回list里面的user 对象
</span></span><span class=line><span class=cl>	}
</span></span><span class=line><span class=cl>	return null;}</span></span></code></pre></td></tr></table></div></div><p>index.jsp框架结构</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;FRAMESET frameSpacing=0 rows=80,* frameBorder=0&gt; &lt;!-- 框架划分上下 上面划分80像素下面占剩下所有 --&gt;
</span></span><span class=line><span class=cl>	&lt;FRAME name=top src=&#34;top.jsp&#34; frameBorder=0 noResize scrolling=no&gt;&lt;!-- 上面放的内容 --&gt;
</span></span><span class=line><span class=cl>	&lt;FRAMESET frameSpacing=0 frameBorder=0 cols=220,*&gt;&lt;!-- 下面再放个框架 再划分左右 左占220像素右占剩下所有 --&gt;
</span></span><span class=line><span class=cl>		&lt;FRAME name=menu src=&#34;${pageContext.request.contextPath}/menu.jsp&#34; frameBorder=0 noResize&gt;&lt;!-- 左边 --&gt;
</span></span><span class=line><span class=cl>		&lt;FRAME name=main src=&#34;${pageContext.request.contextPath}/welcome.htm&#34; frameBorder=0&gt;&lt;!-- 右边 --&gt;
</span></span><span class=line><span class=cl>&lt;/FRAMESET&gt;</span></span></code></pre></td></tr></table></div></div><p>struts.xml</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4>4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5>5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>&lt;</span><span class=kn>package</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;user&#34;</span><span class=w> </span><span class=nx>namespace</span><span class=p>=</span><span class=s>&#34;/&#34;</span><span class=w> </span><span class=nx>extends</span><span class=p>=</span><span class=s>&#34;struts-default&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=nx>action</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;user_*&#34;</span><span class=w> </span><span class=nx>class</span><span class=p>=</span><span class=s>&#34;userAction&#34;</span><span class=w> </span><span class=nx>method</span><span class=p>=</span><span class=s>&#34;{1}&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=nx>result</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;login_success&#34;</span><span class=w> </span><span class=kd>type</span><span class=p>=</span><span class=s>&#34;redirect&#34;</span><span class=p>&gt;</span><span class=o>/</span><span class=nx>index</span><span class=p>.</span><span class=nx>jsp</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>result</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=nx>result</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;login_error&#34;</span><span class=p>&gt;</span><span class=o>/</span><span class=nx>login</span><span class=p>.</span><span class=nx>jsp</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>result</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>action</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=o>/</span><span class=kn>package</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div><p>成功 就返回index.jsp 里框架里的top.jsp里展示昵称: <code>当前用户：${user.user_name }</code> 方式重定向type=&ldquo;redirect&rdquo;</p><p>在top.jsp上面显示登陆的昵称</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;tr&gt;&lt;td height=35 align=&#34;right&#34;&gt;当前用户：${user.user_name }&amp;nbsp;&lt;a href=&#34;#&#34; &gt;修改密码...</span></span></code></pre></td></tr></table></div></div><p>失败就返回login.jsp 在登陆名后面显示错误信息 struts里的方法回显 <code>${fieldErrors.msg[0] }</code></p><h2 id=客户管理新增客户customer>客户管理&ndash;新增客户/customer
<a class=header-anchor href=#%e5%ae%a2%e6%88%b7%e7%ae%a1%e7%90%86%e6%96%b0%e5%a2%9e%e5%ae%a2%e6%88%b7customer></a></h2><p>index.jsp是个框架用&lt;frameset>代替 &lt;body> 左边是menu.jsp 增加客户</p><p><code>&lt;A class=style2 href="${pageContext.request.contextPath}/jsp/customer/add.jsp" target=main>－ 新增客户&lt;/A></code></p><p>点击增加客户链接后 在框架的右边就显示add.jsp 里是个表单</p><p><code>&lt;FORM id=form1 name=form1 action="${pageContext.request.contextPath }/customer_save" method=post></code></p><p>bean包里 Customer 新增 客户类 都提供get/set/tostring方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>	private Long cust_id;//客户id
</span></span><span class=line><span class=cl>	private String cust_name;//客户名称
</span></span><span class=line><span class=cl>	/*private String cust_source;
</span></span><span class=line><span class=cl>	private String cust_industry;
</span></span><span class=line><span class=cl>	private String cust_level;*/
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	//表示这个客户属于哪一种来源 用 字典对象
</span></span><span class=line><span class=cl>	private BaseDict cust_source;//信息来源来源
</span></span><span class=line><span class=cl>	private BaseDict cust_industry;//所属行业
</span></span><span class=line><span class=cl>	private BaseDict cust_level;//客户级别
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	private String cust_phone;//移动电话
</span></span><span class=line><span class=cl>	private String cust_address;//联系地址
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	private String cust_user_id;//负责人
</span></span><span class=line><span class=cl>	private String cust_create_id;//创建人</span></span></code></pre></td></tr></table></div></div><p>Customer.hbm.xml 生成cst_customer客户表 <strong>客户和字典的关系是： 多对一</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;hibernate-mapping&gt;
</span></span><span class=line><span class=cl>	&lt;class name=&#34;com.it.bean.Customer&#34; table=&#34;cst_customer&#34;&gt;
</span></span><span class=line><span class=cl>		&lt;id name=&#34;cust_id&#34;&gt;
</span></span><span class=line><span class=cl>			&lt;generator class=&#34;native&#34;&gt;&lt;/generator&gt;
</span></span><span class=line><span class=cl>		&lt;/id&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;cust_name&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;cust_phone&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;cust_address&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;cust_user_id&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;cust_create_id&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;!-- 这里要体现客户和字典的关系了，客户和字典的关系是： 多对一  --&gt;
</span></span><span class=line><span class=cl>		&lt;many-to-one name=&#34;cust_source&#34; class=&#34;com.it.bean.BaseDict&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;many-to-one name=&#34;cust_industry&#34; class=&#34;com.it.bean.BaseDict&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;many-to-one name=&#34;cust_level&#34; class=&#34;com.it.bean.BaseDict&#34;/&gt;
</span></span><span class=line><span class=cl>	&lt;/class&gt;
</span></span><span class=line><span class=cl>&lt;/hibernate-mapping&gt;</span></span></code></pre></td></tr></table></div></div><p>跑起来就会自动建表了</p><p>CustomerAction 客户的action</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>CustomerAction</span> <span class=k>extends</span> <span class=n>ActionSupport</span> <span class=n>implements</span> <span class=n>ModelDriven</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=n>Customer</span> <span class=n>customer</span><span class=p>;</span><span class=o>//</span><span class=err>声明</span><span class=n>customer</span><span class=o>/</span><span class=err>客户</span> <span class=err>对象</span> 
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>Customer</span> <span class=n>getModel</span><span class=p>()</span> <span class=p>{</span><span class=o>//</span><span class=err>返回客户对象</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=p>(</span><span class=n>customer</span><span class=o>==</span><span class=n>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>customer</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Customer</span><span class=p>();</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>customer</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=n>CustomerService</span> <span class=n>customerService</span><span class=p>;</span><span class=o>//</span><span class=err>声明接口</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>setCustomerService</span><span class=p>(</span><span class=n>CustomerService</span> <span class=n>customerService</span><span class=p>)</span> <span class=p>{</span><span class=o>//</span><span class=err>提供</span><span class=n>set方法</span>
</span></span><span class=line><span class=cl>		<span class=n>this</span><span class=o>.</span><span class=n>customerService</span> <span class=o>=</span> <span class=n>customerService</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=ne>String</span> <span class=n>save</span><span class=p>()</span> <span class=p>{</span><span class=o>//</span><span class=err>新增保存客户业务</span>
</span></span><span class=line><span class=cl>		<span class=n>customerService</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>customer</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>NONE</span><span class=p>;</span>		<span class=p>}}</span></span></span></code></pre></td></tr></table></div></div><p>interface CustomerServic 接口 void save(Customer customer); 实现类CustomerServiceImpl</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4>4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5>5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public class CustomerServiceImpl implements CustomerService {
</span></span><span class=line><span class=cl>	private CustomerDao customerDao;//声明dao接口
</span></span><span class=line><span class=cl>	@Override
</span></span><span class=line><span class=cl>	public void save(Customer customer) {
</span></span><span class=line><span class=cl>		customerDao.save(customer);//方法
</span></span><span class=line><span class=cl>	}</span></span></code></pre></td></tr></table></div></div><p>interface CustomerDao接口 void save(Customer customer);实现类CustomerDaoImpl</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1>1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2>2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3>3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>CustomerDaoImpl</span> <span class=k>extends</span> <span class=n>HibernateDaoSupport</span> <span class=n>implements</span> <span class=n>CustomerDao</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>save</span><span class=p>(</span><span class=n>Customer</span> <span class=n>customer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>customer</span><span class=p>);</span>	<span class=p>}</span><span class=o>//</span><span class=err>使用父类</span> <span class=err>模板方法保存客户</span></span></span></code></pre></td></tr></table></div></div><p>acclicationContext.xml</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> &lt;!-- 以下属于客户模块 --&gt;
</span></span><span class=line><span class=cl>&lt;bean id=&#34;customerAction&#34; class=&#34;com.it.web.action.CustomerAction&#34; scope=&#34;prototype&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;property name=&#34;customerService&#34; ref=&#34;customerService&#34;&gt;&lt;/property&gt;
</span></span><span class=line><span class=cl>&lt;/bean&gt;
</span></span><span class=line><span class=cl>&lt;bean id=&#34;customerService&#34; class=&#34;com.it.service.impl.CustomerServiceImpl&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;property name=&#34;customerDao&#34; ref=&#34;customerDao&#34;&gt;&lt;/property&gt;
</span></span><span class=line><span class=cl>&lt;/bean&gt;
</span></span><span class=line><span class=cl>&lt;bean id=&#34;customerDao&#34; class=&#34;com.it.dao.impl.CustomerDaoImpl&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;property name=&#34;sessionFactory&#34; ref=&#34;sessionFactory&#34;&gt;&lt;/property&gt;
</span></span><span class=line><span class=cl>&lt;/bean&gt;</span></span></code></pre></td></tr></table></div></div><p>struts</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3>3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4>4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=w>  </span><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=nx>以下属于客户模块</span><span class=w> </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=kn>package</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;customer&#34;</span><span class=w> </span><span class=nx>namespace</span><span class=p>=</span><span class=s>&#34;/&#34;</span><span class=w> </span><span class=nx>extends</span><span class=p>=</span><span class=s>&#34;struts-default&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=nx>action</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;customer_*&#34;</span><span class=w> </span><span class=nx>class</span><span class=p>=</span><span class=s>&#34;customerAction&#34;</span><span class=w> </span><span class=nx>method</span><span class=p>=</span><span class=s>&#34;{1}&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>action</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=o>/</span><span class=kn>package</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div><h2 id=客户来源-客户行业-客户级别的三个下拉业务-字典bean>客户来源 客户行业 客户级别的三个下拉业务 字典bean
<a class=header-anchor href=#%e5%ae%a2%e6%88%b7%e6%9d%a5%e6%ba%90-%e5%ae%a2%e6%88%b7%e8%a1%8c%e4%b8%9a-%e5%ae%a2%e6%88%b7%e7%ba%a7%e5%88%ab%e7%9a%84%e4%b8%89%e4%b8%aa%e4%b8%8b%e6%8b%89%e4%b8%9a%e5%8a%a1-%e5%ad%97%e5%85%b8bean></a></h2><p>BaseDict 数据字典类 规范来源 bean包下 用于规范数据来源</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2>2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3>3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4>4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5>5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6>6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7>7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>	private String dict_id;  //下拉 主键
</span></span><span class=line><span class=cl>	private String dict_type_code; //下拉 类型的代号 001所属行业/002来源
</span></span><span class=line><span class=cl>	private String dict_type_name;//类型 名称
</span></span><span class=line><span class=cl>	private String dict_item_name;// 来源行业级别 三个项目的名称
</span></span><span class=line><span class=cl>	private String dict_item_code;//来源行业级别 三个项目的 项目
</span></span><span class=line><span class=cl>	private int dict_sort;//排序字段
</span></span><span class=line><span class=cl>	private char dict_enable;//是否停用 1使用
</span></span><span class=line><span class=cl>	private String dict_memo;//备注</span></span></code></pre></td></tr></table></div></div><p>前端请求 是js请求</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1> 1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2> 2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3> 3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4> 4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5> 5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6> 6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7> 7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8> 8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9> 9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10>10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11>11</a>
</span><span class=lnt id=hl-25-12><a class=lnlinks href=#hl-25-12>12</a>
</span><span class=lnt id=hl-25-13><a class=lnlinks href=#hl-25-13>13</a>
</span><span class=lnt id=hl-25-14><a class=lnlinks href=#hl-25-14>14</a>
</span><span class=lnt id=hl-25-15><a class=lnlinks href=#hl-25-15>15</a>
</span><span class=lnt id=hl-25-16><a class=lnlinks href=#hl-25-16>16</a>
</span><span class=lnt id=hl-25-17><a class=lnlinks href=#hl-25-17>17</a>
</span><span class=lnt id=hl-25-18><a class=lnlinks href=#hl-25-18>18</a>
</span><span class=lnt id=hl-25-19><a class=lnlinks href=#hl-25-19>19</a>
</span><span class=lnt id=hl-25-20><a class=lnlinks href=#hl-25-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>script</span> <span class=n>type</span><span class=o>=</span><span class=s2>&#34;text/javascript&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>loadDict</span><span class=p>(</span><span class=n>type_code</span> <span class=p>,</span> <span class=n>tagId</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=o>//</span><span class=err>发起请求，获取字典数据</span> <span class=err>按类型查询字典数据</span>
</span></span><span class=line><span class=cl>		<span class=k>var</span> <span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;${pageContext.request.contextPath }/baseDict_findByType&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=o>$.</span><span class=n>post</span><span class=p>(</span><span class=n>url</span> <span class=p>,</span> <span class=p>{</span><span class=s2>&#34;dict_type_code&#34;</span> <span class=p>:</span><span class=n>type_code</span> <span class=p>}</span> <span class=p>,</span> <span class=n>function</span><span class=p>(</span><span class=n>result</span><span class=p>){</span>
</span></span><span class=line><span class=cl>			<span class=o>//</span><span class=n>result</span> <span class=o>--</span> <span class=n>list</span><span class=o>&lt;</span><span class=n>BaseDict</span><span class=o>&gt;</span>  <span class=o>--</span> <span class=n>json</span>
</span></span><span class=line><span class=cl>			<span class=o>$</span><span class=p>(</span><span class=n>result</span><span class=p>)</span><span class=o>.</span><span class=n>each</span><span class=p>(</span><span class=n>function</span><span class=p>(</span><span class=n>i</span> <span class=p>,</span> <span class=n>n</span><span class=p>){</span> <span class=o>//</span><span class=n>i</span> <span class=p>:</span> <span class=err>遍历的下标，</span>  <span class=n>n</span> <span class=p>:</span> <span class=err>遍历出来的对象</span>   <span class=err>字典对象</span>
</span></span><span class=line><span class=cl>				<span class=o>//</span><span class=k>var</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>				<span class=o>//</span><span class=err>找到标签，然后追加内容</span> <span class=n>val</span><span class=p>(</span><span class=n>aa</span><span class=p>)</span> <span class=p>,</span> <span class=n>text</span><span class=p>(</span><span class=n>aa</span><span class=p>)</span> <span class=p>,</span> <span class=n>html</span><span class=p>(</span><span class=n>xxx</span><span class=p>)</span> <span class=p>,</span> <span class=n>append</span><span class=p>(</span><span class=n>xxx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=o>$</span><span class=p>(</span><span class=n>tagId</span><span class=p>)</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;&lt;option value=&#39;&#34;</span><span class=o>+</span><span class=n>n</span><span class=o>.</span><span class=n>dict_id</span><span class=o>+</span><span class=s2>&#34;&#39;&gt;&#34;</span><span class=o>+</span><span class=n>n</span><span class=o>.</span><span class=n>dict_item_name</span><span class=o>+</span><span class=s2>&#34;&lt;/option&gt;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>});</span>
</span></span><span class=line><span class=cl>			
</span></span><span class=line><span class=cl>		<span class=p>}</span> <span class=p>,</span> <span class=s2>&#34;json&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=o>$</span><span class=p>(</span><span class=n>function</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;001&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_industry&#34;</span><span class=p>);</span> <span class=o>//</span><span class=mi>001</span>  <span class=o>--</span> <span class=err>客户行业</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;002&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_source&#34;</span><span class=p>);</span> <span class=o>//</span><span class=mi>002</span>  <span class=o>--</span> <span class=err>客户来源</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;006&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_level&#34;</span><span class=p>);</span><span class=o>//</span><span class=mi>006</span>  <span class=o>--</span> <span class=err>客户级别</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>script</span><span class=o>&gt;</span></span></span></code></pre></td></tr></table></div></div><p>BaseDictAction 的action 里面的 查询下拉业务</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1> 1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2> 2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3> 3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4> 4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5> 5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6> 6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7> 7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8> 8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9> 9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10>10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11>11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12>12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13>13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14>14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15>15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16>16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17>17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18>18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19>19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>BaseDictAction</span> <span class=k>extends</span> <span class=n>ActionSupport</span>  <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=ne>String</span>  <span class=n>dict_type_code</span><span class=p>;</span><span class=o>//</span><span class=err>声明</span> <span class=err>下拉类型的代号</span> <span class=mi>001</span><span class=err>所属行业</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>setDict_type_code</span><span class=p>(</span><span class=ne>String</span> <span class=n>dict_type_code</span><span class=p>)</span> <span class=p>{</span><span class=o>//</span><span class=err>提供</span><span class=n>set方法</span>
</span></span><span class=line><span class=cl>		<span class=n>this</span><span class=o>.</span><span class=n>dict_type_code</span> <span class=o>=</span> <span class=n>dict_type_code</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=n>BaseDictService</span> <span class=n>baseDictService</span><span class=p>;</span><span class=o>//</span><span class=err>声明接口</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>setBaseDictService</span><span class=p>(</span><span class=n>BaseDictService</span> <span class=n>baseDictService</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>this</span><span class=o>.</span><span class=n>baseDictService</span> <span class=o>=</span> <span class=n>baseDictService</span><span class=p>;}</span><span class=o>//</span><span class=err>返回接口</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=ne>String</span> <span class=n>findByType</span><span class=p>(){</span><span class=o>//</span><span class=err>查询下拉的</span> <span class=err>业务</span>
</span></span><span class=line><span class=cl>		<span class=n>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>List</span><span class=o>&lt;</span><span class=n>BaseDict</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>baseDictService</span><span class=o>.</span><span class=n>findByType</span><span class=p>(</span><span class=n>dict_type_code</span><span class=p>);</span><span class=o>//</span><span class=mf>1.</span> <span class=err>查询数据</span>
</span></span><span class=line><span class=cl>			<span class=ne>String</span> <span class=n>json</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Gson</span><span class=p>()</span><span class=o>.</span><span class=n>toJson</span><span class=p>(</span><span class=n>list</span><span class=p>);</span><span class=o>//</span><span class=mf>2.</span> <span class=n>list</span> <span class=o>--&gt;</span> <span class=n>json</span> 
</span></span><span class=line><span class=cl>			<span class=n>HttpServletResponse</span> <span class=n>response</span> <span class=o>=</span> <span class=n>ServletActionContext</span><span class=o>.</span><span class=n>getResponse</span><span class=p>();</span><span class=o>//</span><span class=mf>3.</span> <span class=err>写给页面。</span>
</span></span><span class=line><span class=cl>			<span class=n>response</span><span class=o>.</span><span class=n>setContentType</span><span class=p>(</span><span class=s2>&#34;text/html;charset=utf-8&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=n>response</span><span class=o>.</span><span class=n>getWriter</span><span class=p>()</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>json</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span> <span class=n>catch</span> <span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=n>e</span><span class=o>.</span><span class=n>printStackTrace</span><span class=p>();</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>NONE</span><span class=p>;}</span></span></span></code></pre></td></tr></table></div></div><h2 id=使用struts方式返回json数据-下拉业务的-信息来源-行业-级别>使用Struts方式返回json数据 /下拉业务的 信息来源 行业 级别
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8struts%e6%96%b9%e5%bc%8f%e8%bf%94%e5%9b%9ejson%e6%95%b0%e6%8d%ae-%e4%b8%8b%e6%8b%89%e4%b8%9a%e5%8a%a1%e7%9a%84-%e4%bf%a1%e6%81%af%e6%9d%a5%e6%ba%90-%e8%a1%8c%e4%b8%9a-%e7%ba%a7%e5%88%ab></a></h2><p>BaseDictAction 的action 里面的 查询下拉业务</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11>11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12>12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13>13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14>14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15>15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>BaseDictAction</span> <span class=k>extends</span> <span class=n>ActionSupport</span>  <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=ne>String</span>  <span class=n>dict_type_code</span><span class=p>;</span><span class=o>//</span><span class=err>声明</span> <span class=err>下拉类型的代号</span> <span class=mi>001</span><span class=err>所属行业</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>setDict_type_code</span><span class=p>(</span><span class=ne>String</span> <span class=n>dict_type_code</span><span class=p>)</span> <span class=p>{</span><span class=o>//</span><span class=err>提供</span><span class=n>set方法</span>
</span></span><span class=line><span class=cl>		<span class=n>this</span><span class=o>.</span><span class=n>dict_type_code</span> <span class=o>=</span> <span class=n>dict_type_code</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl><span class=n>private</span> <span class=n>BaseDictService</span> <span class=n>baseDictService</span><span class=p>;</span><span class=o>//</span><span class=err>声明接口</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>void</span> <span class=n>setBaseDictService</span><span class=p>(</span><span class=n>BaseDictService</span> <span class=n>baseDictService</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>this</span><span class=o>.</span><span class=n>baseDictService</span> <span class=o>=</span> <span class=n>baseDictService</span><span class=p>;}</span><span class=o>//</span><span class=err>返回接口</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl><span class=n>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>BaseDict</span><span class=o>&gt;</span><span class=n>list</span><span class=p>;</span><span class=o>//</span><span class=err>字典集合</span> <span class=err>变量</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>BaseDict</span><span class=o>&gt;</span> <span class=n>getList</span><span class=p>()</span> <span class=p>{</span><span class=o>//</span><span class=err>提供</span><span class=n>get方法</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>list</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>//</span><span class=err>改成</span><span class=n>struts方式返回json数据</span> <span class=err>直接在</span><span class=n>struts里配置跳转成json类型</span>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=ne>String</span> <span class=n>findByType</span><span class=p>(){</span>
</span></span><span class=line><span class=cl><span class=n>list</span> <span class=o>=</span> <span class=n>baseDictService</span><span class=o>.</span><span class=n>findByType</span><span class=p>(</span><span class=n>dict_type_code</span><span class=p>);</span><span class=o>//</span><span class=mf>1.</span> <span class=err>查询数据业务</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>Constant</span><span class=o>.</span><span class=n>JSON_SUCCESS</span><span class=p>;}</span><span class=o>//</span><span class=err>直接返回</span> <span class=err>常量</span> <span class=ne>String</span> <span class=n>JSON_SUCCESS</span> <span class=o>=</span> <span class=s2>&#34;json_success&#34;</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div><p>struts.xml root为固定写法把list跳转成json类型 extends=&ldquo;json-default</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1>1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2>2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3>3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4>4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5>5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6>6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7>7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=nx>以下属于字典模块</span><span class=w> </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=kn>package</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;baseDict&#34;</span><span class=w> </span><span class=nx>namespace</span><span class=p>=</span><span class=s>&#34;/&#34;</span><span class=w> </span><span class=nx>extends</span><span class=p>=</span><span class=s>&#34;json-default&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=nx>action</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;baseDict_*&#34;</span><span class=w> </span><span class=nx>class</span><span class=p>=</span><span class=s>&#34;baseDictAction&#34;</span><span class=w> </span><span class=nx>method</span><span class=p>=</span><span class=s>&#34;{1}&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>&lt;</span><span class=nx>result</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;json_success&#34;</span><span class=w> </span><span class=kd>type</span><span class=p>=</span><span class=s>&#34;json&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>				</span><span class=p>&lt;</span><span class=nx>param</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;root&#34;</span><span class=p>&gt;</span><span class=nx>list</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>param</span><span class=p>&gt;&lt;!</span><span class=o>--</span><span class=w> </span><span class=nx>root为固定写法把list跳转成json类型</span><span class=w>  </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>result</span><span class=p>&gt;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>action</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=o>/</span><span class=kn>package</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div><p>这时候点提交会报错 直接返回会生成一条空的客户http://localhost/crm28_511/customer_save</p><p>要在add.jsp 里把三个下拉的 改成字典里的dict_id &lt;select name=&ldquo;cust_industry.dict_id 就可以了</p><h2 id=数据校验>数据校验
<a class=header-anchor href=#%e6%95%b0%e6%8d%ae%e6%a0%a1%e9%aa%8c></a></h2><p>可以在前端做js校验 也可以在后台做校验 CustomerAction.java里的添加客户 save方法前对所有数据作校验</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-29-1><a class=lnlinks href=#hl-29-1> 1</a>
</span><span class=lnt id=hl-29-2><a class=lnlinks href=#hl-29-2> 2</a>
</span><span class=lnt id=hl-29-3><a class=lnlinks href=#hl-29-3> 3</a>
</span><span class=lnt id=hl-29-4><a class=lnlinks href=#hl-29-4> 4</a>
</span><span class=lnt id=hl-29-5><a class=lnlinks href=#hl-29-5> 5</a>
</span><span class=lnt id=hl-29-6><a class=lnlinks href=#hl-29-6> 6</a>
</span><span class=lnt id=hl-29-7><a class=lnlinks href=#hl-29-7> 7</a>
</span><span class=lnt id=hl-29-8><a class=lnlinks href=#hl-29-8> 8</a>
</span><span class=lnt id=hl-29-9><a class=lnlinks href=#hl-29-9> 9</a>
</span><span class=lnt id=hl-29-10><a class=lnlinks href=#hl-29-10>10</a>
</span><span class=lnt id=hl-29-11><a class=lnlinks href=#hl-29-11>11</a>
</span><span class=lnt id=hl-29-12><a class=lnlinks href=#hl-29-12>12</a>
</span><span class=lnt id=hl-29-13><a class=lnlinks href=#hl-29-13>13</a>
</span><span class=lnt id=hl-29-14><a class=lnlinks href=#hl-29-14>14</a>
</span><span class=lnt id=hl-29-15><a class=lnlinks href=#hl-29-15>15</a>
</span><span class=lnt id=hl-29-16><a class=lnlinks href=#hl-29-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public String save(){
</span></span><span class=line><span class=cl>		//在提交前对所有数据都进行校验 是springframework.util.StringUtils包提供的工具类;
</span></span><span class=line><span class=cl>		if (StringUtils.isEmpty(customer.getCust_name())) {
</span></span><span class=line><span class=cl>			addActionError(&#34;客户名称不能为空&#34;);//错误提示
</span></span><span class=line><span class=cl>			return Constant.INPUT_ERROR;
</span></span><span class=line><span class=cl>		}
</span></span><span class=line><span class=cl>		if (StringUtils.isEmpty(customer.getCust_address())) {
</span></span><span class=line><span class=cl>			addActionError(&#34;客户地址不能为空&#34;);//错误提示的值栈
</span></span><span class=line><span class=cl>			return Constant.INPUT_ERROR;
</span></span><span class=line><span class=cl>		}
</span></span><span class=line><span class=cl>		..电话
</span></span><span class=line><span class=cl>		}
</span></span><span class=line><span class=cl>		if (StringUtils.isEmpty(customer.getCust_industry().getDict_id())) {
</span></span><span class=line><span class=cl>			addActionError(&#34;客户行业没选&#34;);//错误提示
</span></span><span class=line><span class=cl>			return Constant.INPUT_ERROR;
</span></span><span class=line><span class=cl>		}..来源 级别</span></span></code></pre></td></tr></table></div></div><p>struts.xml 请求转发回来显示</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1>1</a>
</span><span class=lnt id=hl-30-2><a class=lnlinks href=#hl-30-2>2</a>
</span><span class=lnt id=hl-30-3><a class=lnlinks href=#hl-30-3>3</a>
</span><span class=lnt id=hl-30-4><a class=lnlinks href=#hl-30-4>4</a>
</span><span class=lnt id=hl-30-5><a class=lnlinks href=#hl-30-5>5</a>
</span><span class=lnt id=hl-30-6><a class=lnlinks href=#hl-30-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=nx>以下属于客户模块</span><span class=w> </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=kn>package</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;customer&#34;</span><span class=w> </span><span class=nx>namespace</span><span class=p>=</span><span class=s>&#34;/&#34;</span><span class=w> </span><span class=nx>extends</span><span class=p>=</span><span class=s>&#34;struts-default&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=nx>action</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;customer_*&#34;</span><span class=w> </span><span class=nx>class</span><span class=p>=</span><span class=s>&#34;customerAction&#34;</span><span class=w> </span><span class=nx>method</span><span class=p>=</span><span class=s>&#34;{1}&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>&lt;</span><span class=nx>result</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;input_error&#34;</span><span class=p>&gt;</span><span class=o>/</span><span class=nx>jsp</span><span class=o>/</span><span class=nx>customer</span><span class=o>/</span><span class=nx>add</span><span class=p>.</span><span class=nx>jsp</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>result</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>action</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=o>/</span><span class=kn>package</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div><p>add.jsp</p><p>&lt;%@ taglib uri="/struts-tags&rdquo; prefix=&ldquo;s&rdquo; %></p><p>在结果 后面加一列 里面显示值栈 <code>&lt;td>${actionErrors[0] }&lt;td></code></p><h2 id=回显-漏掉的数据-不会重复>回显 漏掉的数据 不会重复
<a class=header-anchor href=#%e5%9b%9e%e6%98%be-%e6%bc%8f%e6%8e%89%e7%9a%84%e6%95%b0%e6%8d%ae-%e4%b8%8d%e4%bc%9a%e9%87%8d%e5%a4%8d></a></h2><p>文本框回显 : 把 &lt;input 换成&lt;s:textfield 并属性值都要打双引号</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;s:textfield class=&#34;textbox&#34; id=&#34;sChannel2&#34; style=&#34;WIDTH: 180px&#34; maxLength=&#34;50&#34; name=&#34;cust_address&#34; /&gt;</span></span></code></pre></td></tr></table></div></div><p>布局乱了:原理是struts标签的默认主题是xhtml 生成的html标签是使用表格来布局 改一个struts.xml常量主题设成simple</p><p><code>&lt;struts> &lt;constant name="struts.ui.theme" value="simple">&lt;/constant></code></p><p>下拉框回显: 1要知道提交上去是什么数据 2 提交上去的是value=2 然后用2去selectj里挨个问 并设置为selected就好</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-32-1><a class=lnlinks href=#hl-32-1> 1</a>
</span><span class=lnt id=hl-32-2><a class=lnlinks href=#hl-32-2> 2</a>
</span><span class=lnt id=hl-32-3><a class=lnlinks href=#hl-32-3> 3</a>
</span><span class=lnt id=hl-32-4><a class=lnlinks href=#hl-32-4> 4</a>
</span><span class=lnt id=hl-32-5><a class=lnlinks href=#hl-32-5> 5</a>
</span><span class=lnt id=hl-32-6><a class=lnlinks href=#hl-32-6> 6</a>
</span><span class=lnt id=hl-32-7><a class=lnlinks href=#hl-32-7> 7</a>
</span><span class=lnt id=hl-32-8><a class=lnlinks href=#hl-32-8> 8</a>
</span><span class=lnt id=hl-32-9><a class=lnlinks href=#hl-32-9> 9</a>
</span><span class=lnt id=hl-32-10><a class=lnlinks href=#hl-32-10>10</a>
</span><span class=lnt id=hl-32-11><a class=lnlinks href=#hl-32-11>11</a>
</span><span class=lnt id=hl-32-12><a class=lnlinks href=#hl-32-12>12</a>
</span><span class=lnt id=hl-32-13><a class=lnlinks href=#hl-32-13>13</a>
</span><span class=lnt id=hl-32-14><a class=lnlinks href=#hl-32-14>14</a>
</span><span class=lnt id=hl-32-15><a class=lnlinks href=#hl-32-15>15</a>
</span><span class=lnt id=hl-32-16><a class=lnlinks href=#hl-32-16>16</a>
</span><span class=lnt id=hl-32-17><a class=lnlinks href=#hl-32-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>script</span> <span class=n>type</span><span class=o>=</span><span class=s2>&#34;text/javascript&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>$</span><span class=p>(</span><span class=n>function</span><span class=p>(){</span><span class=o>//</span><span class=err>加载完就</span> <span class=err>执行三个方法</span> <span class=err>下拉</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;001&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_industry&#34;</span> <span class=p>,</span> <span class=s2>&#34;${cust_industry.dict_id}&#34;</span><span class=p>);</span> <span class=o>//</span><span class=mi>001</span>  <span class=o>--</span> <span class=err>客户行业</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;002&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_source&#34;</span> <span class=p>,</span> <span class=s2>&#34;${cust_source.dict_id}&#34;</span><span class=p>);</span> <span class=o>//</span><span class=mi>002</span>  <span class=o>--</span> <span class=err>客户来源</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;006&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_level&#34;</span> <span class=p>,</span> <span class=s2>&#34;${cust_level.dict_id}&#34;</span><span class=p>);</span><span class=o>//</span><span class=mi>006</span>  <span class=o>--</span> <span class=err>客户级别</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl>	<span class=n>function</span> <span class=n>loadDict</span><span class=p>(</span><span class=n>type_code</span> <span class=p>,</span> <span class=n>tagId</span> <span class=p>,</span> <span class=n>oldVal</span><span class=p>){</span><span class=o>//</span><span class=err>传旧的值进来回显</span>
</span></span><span class=line><span class=cl>		<span class=o>//</span><span class=err>发起请求，获取字典数据</span> <span class=err>按类型查询字典数据</span>
</span></span><span class=line><span class=cl>		<span class=k>var</span> <span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;${pageContext.request.contextPath }/baseDict_findByType&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=o>$.</span><span class=n>post</span><span class=p>(</span><span class=n>url</span> <span class=p>,</span> <span class=p>{</span><span class=s2>&#34;dict_type_code&#34;</span> <span class=p>:</span><span class=n>type_code</span> <span class=p>}</span> <span class=p>,</span> <span class=n>function</span><span class=p>(</span><span class=n>result</span><span class=p>){</span>
</span></span><span class=line><span class=cl>			<span class=o>$</span><span class=p>(</span><span class=n>result</span><span class=p>)</span><span class=o>.</span><span class=n>each</span><span class=p>(</span><span class=n>function</span><span class=p>(</span><span class=n>i</span> <span class=p>,</span> <span class=n>n</span><span class=p>){</span> <span class=o>//</span><span class=n>i</span> <span class=p>:</span> <span class=err>遍历的下标，</span>  <span class=n>n</span> <span class=p>:</span> <span class=err>遍历出来的对象</span>   <span class=err>字典对象</span>
</span></span><span class=line><span class=cl>				<span class=o>$</span><span class=p>(</span><span class=n>tagId</span><span class=p>)</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;&lt;option value=&#39;&#34;</span><span class=o>+</span><span class=n>n</span><span class=o>.</span><span class=n>dict_id</span><span class=o>+</span><span class=s2>&#34;&#39;&gt;&#34;</span><span class=o>+</span><span class=n>n</span><span class=o>.</span><span class=n>dict_item_name</span><span class=o>+</span><span class=s2>&#34;&lt;/option&gt;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>});</span>
</span></span><span class=line><span class=cl>			<span class=o>//</span><span class=err>选中该选中的</span><span class=n>option</span>  <span class=err>在指定的</span><span class=n>id标签身上找option标签</span><span class=err>，</span> <span class=err>按照</span><span class=n>value值来找</span><span class=err>，如果找到了就修改这个</span><span class=n>option标签的属性</span><span class=err>，修改</span><span class=n>selected属性</span><span class=err>，值为</span><span class=n>selected</span>
</span></span><span class=line><span class=cl>			<span class=o>$</span><span class=p>(</span><span class=n>tagId</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;option[value=&#39;&#34;</span><span class=o>+</span><span class=n>oldVal</span><span class=o>+</span><span class=s2>&#34;&#39;]&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>attr</span><span class=p>(</span><span class=s2>&#34;selected&#34;</span><span class=p>,</span><span class=s2>&#34;selected&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span> <span class=p>,</span> <span class=s2>&#34;json&#34;</span><span class=p>);</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>script</span><span class=o>&gt;</span></span></span></code></pre></td></tr></table></div></div><h2 id=图片上传>图片上传
<a class=header-anchor href=#%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0></a></h2><p>add.jsp 在联系电话后加一个 文件上传标签file</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-33-1><a class=lnlinks href=#hl-33-1>1</a>
</span><span class=lnt id=hl-33-2><a class=lnlinks href=#hl-33-2>2</a>
</span><span class=lnt id=hl-33-3><a class=lnlinks href=#hl-33-3>3</a>
</span><span class=lnt id=hl-33-4><a class=lnlinks href=#hl-33-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>tr</span><span class=o>&gt;&lt;</span><span class=n>td</span><span class=o>&gt;</span><span class=err>客户资质</span> <span class=err>：</span><span class=o>&lt;/</span><span class=n>td</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>td</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>input</span> <span class=n>type</span><span class=o>=</span><span class=s2>&#34;file&#34;</span> <span class=n>name</span><span class=o>=</span><span class=s2>&#34;upload&#34;</span><span class=o>/&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>td</span><span class=o>&gt;&lt;/</span><span class=n>tr</span><span class=o>&gt;</span></span></span></code></pre></td></tr></table></div></div><p>并在表单下面写</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-34-1><a class=lnlinks href=#hl-34-1>1</a>
</span><span class=lnt id=hl-34-2><a class=lnlinks href=#hl-34-2>2</a>
</span><span class=lnt id=hl-34-3><a class=lnlinks href=#hl-34-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;!-- enctype=&#34;application/x-www-form-urlencoded&#34; : 表示提交上去的是一份经过url编码的form表单数据，主要针对文本数据	enctype=&#34;multipart/form-data&#34; : 提交上来的是表单数据，包含多份， 有表单数据也有文件数据 --&gt;
</span></span><span class=line><span class=cl>	&lt;FORM id=form1 name=form1 action=&#34;${pageContext.request.contextPath }/customer_save&#34; method=post
</span></span><span class=line><span class=cl>		enctype=&#34;multipart/form-data&#34;&gt;</span></span></code></pre></td></tr></table></div></div><p>CustomerAction 的save()方法里处理 先声明对象</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-35-1><a class=lnlinks href=#hl-35-1> 1</a>
</span><span class=lnt id=hl-35-2><a class=lnlinks href=#hl-35-2> 2</a>
</span><span class=lnt id=hl-35-3><a class=lnlinks href=#hl-35-3> 3</a>
</span><span class=lnt id=hl-35-4><a class=lnlinks href=#hl-35-4> 4</a>
</span><span class=lnt id=hl-35-5><a class=lnlinks href=#hl-35-5> 5</a>
</span><span class=lnt id=hl-35-6><a class=lnlinks href=#hl-35-6> 6</a>
</span><span class=lnt id=hl-35-7><a class=lnlinks href=#hl-35-7> 7</a>
</span><span class=lnt id=hl-35-8><a class=lnlinks href=#hl-35-8> 8</a>
</span><span class=lnt id=hl-35-9><a class=lnlinks href=#hl-35-9> 9</a>
</span><span class=lnt id=hl-35-10><a class=lnlinks href=#hl-35-10>10</a>
</span><span class=lnt id=hl-35-11><a class=lnlinks href=#hl-35-11>11</a>
</span><span class=lnt id=hl-35-12><a class=lnlinks href=#hl-35-12>12</a>
</span><span class=lnt id=hl-35-13><a class=lnlinks href=#hl-35-13>13</a>
</span><span class=lnt id=hl-35-14><a class=lnlinks href=#hl-35-14>14</a>
</span><span class=lnt id=hl-35-15><a class=lnlinks href=#hl-35-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span><span class=n>struts获取文件数据</span> <span class=err>需要声明文件对象和以下三个并提供</span><span class=n>set方法</span>
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=ne>File</span> <span class=n>upload</span><span class=p>;</span><span class=o>//</span><span class=n>File对象</span> <span class=n>java</span><span class=o>.</span><span class=n>io</span><span class=o>.</span><span class=n>File</span> <span class=err>值是</span><span class=n>file标签的name属性值</span>
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=ne>String</span> <span class=n>uploadContextType</span><span class=p>;</span><span class=o>//</span><span class=err>文件类型</span> <span class=n>name属性值</span><span class=o>+</span><span class=n>ContextType固定写法</span>
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=ne>String</span> <span class=n>uploadFileName</span><span class=p>;</span><span class=o>//</span><span class=err>文件名称</span> <span class=n>name属性值</span><span class=o>+</span><span class=n>FileName固定写法</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>setUpload</span><span class=p>(</span><span class=ne>File</span> <span class=n>upload</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>this</span><span class=o>.</span><span class=n>upload</span> <span class=o>=</span> <span class=n>upload</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>setUploadContextType</span><span class=p>(</span><span class=ne>String</span> <span class=n>uploadContextType</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>this</span><span class=o>.</span><span class=n>uploadContextType</span> <span class=o>=</span> <span class=n>uploadContextType</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>setUploadFileName</span><span class=p>(</span><span class=ne>String</span> <span class=n>uploadFileName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>this</span><span class=o>.</span><span class=n>uploadFileName</span> <span class=o>=</span> <span class=n>uploadFileName</span><span class=p>;</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=ne>String</span> <span class=n>save</span><span class=p>()</span> <span class=n>throws</span> <span class=n>IOException</span><span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=o>//</span><span class=err>存储文件数据把</span><span class=n>tem转成jpg</span><span class=o>|</span><span class=n>png</span> 
</span></span><span class=line><span class=cl>	<span class=ne>File</span> <span class=n>file</span><span class=o>=</span><span class=n>new</span> <span class=ne>File</span><span class=p>(</span><span class=s2>&#34;d://hm28&#34;</span><span class=p>,</span> <span class=n>MyFileUtil</span><span class=o>.</span><span class=n>getFileName</span><span class=p>(</span><span class=n>uploadFileName</span><span class=p>));</span><span class=o>//</span><span class=err>文件对象</span> <span class=err>文件名拼接为要存的路径</span><span class=o>+</span><span class=err>工具类静态方法生成的随机名</span>
</span></span><span class=line><span class=cl>	<span class=n>FileUtils</span><span class=o>.</span><span class=n>copyFile</span><span class=p>(</span><span class=n>upload</span><span class=p>,</span> <span class=n>file</span><span class=p>);</span><span class=o>//</span><span class=err>用</span><span class=n>org</span><span class=o>.</span><span class=n>apache</span><span class=o>.</span><span class=n>commons</span><span class=o>.</span><span class=n>io</span> <span class=err>原文件选属性值</span> <span class=err>和目标文件</span></span></span></code></pre></td></tr></table></div></div><p>上传限制 在struts.xml里 设置为200m</p><p><code>&lt;constant name="struts.multipart.maxSize" value="209715200">&lt;/constant></code></p><h2 id=客户列表>客户列表
<a class=header-anchor href=#%e5%ae%a2%e6%88%b7%e5%88%97%e8%a1%a8></a></h2><h3 id=menujsp-左框-里客户列表请求>menu.jsp 左框 里客户列表请求
<a class=header-anchor href=#menujsp-%e5%b7%a6%e6%a1%86-%e9%87%8c%e5%ae%a2%e6%88%b7%e5%88%97%e8%a1%a8%e8%af%b7%e6%b1%82></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-36-1><a class=lnlinks href=#hl-36-1>1</a>
</span><span class=lnt id=hl-36-2><a class=lnlinks href=#hl-36-2>2</a>
</span><span class=lnt id=hl-36-3><a class=lnlinks href=#hl-36-3>3</a>
</span><span class=lnt id=hl-36-4><a class=lnlinks href=#hl-36-4>4</a>
</span><span class=lnt id=hl-36-5><a class=lnlinks href=#hl-36-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;tr&gt; 
</span></span><span class=line><span class=cl>	&lt;td class=menuSmall&gt;
</span></span><span class=line><span class=cl>		&lt;a class=style2 href=&#34;${pageContext.request.contextPath}/customer_findByPage.action&#34; target=main&gt;－ 客户列表&lt;/a&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>&lt;/tr&gt;</span></span></code></pre></td></tr></table></div></div><h3 id=customeraction里的分页显示客户列表-public-string-findbypage->CustomerAction里的分页显示客户列表 public String findByPage() {
<a class=header-anchor href=#customeraction%e9%87%8c%e7%9a%84%e5%88%86%e9%a1%b5%e6%98%be%e7%a4%ba%e5%ae%a2%e6%88%b7%e5%88%97%e8%a1%a8-public-string-findbypage-></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-37-1><a class=lnlinks href=#hl-37-1>1</a>
</span><span class=lnt id=hl-37-2><a class=lnlinks href=#hl-37-2>2</a>
</span><span class=lnt id=hl-37-3><a class=lnlinks href=#hl-37-3>3</a>
</span><span class=lnt id=hl-37-4><a class=lnlinks href=#hl-37-4>4</a>
</span><span class=lnt id=hl-37-5><a class=lnlinks href=#hl-37-5>5</a>
</span><span class=lnt id=hl-37-6><a class=lnlinks href=#hl-37-6>6</a>
</span><span class=lnt id=hl-37-7><a class=lnlinks href=#hl-37-7>7</a>
</span><span class=lnt id=hl-37-8><a class=lnlinks href=#hl-37-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public String findByPage() {
</span></span><span class=line><span class=cl>	//离线对象如果只是这么创建出来，背后的sql语句 select * from customer;
</span></span><span class=line><span class=cl>	//只会使用离线对象的两个方法  setXXX（针对聚合查询 总记录数、最大值、最小值、）  addXXX(针对where条件的设置)
</span></span><span class=line><span class=cl>	DetachedCriteria criteria  =DetachedCriteria.forClass(Customer.class);//离线对象 [dɪˈtætʃt] [kraɪˈtɪrɪə]
</span></span><span class=line><span class=cl>	//2. 查询数据业务，有返回值
</span></span><span class=line><span class=cl>	PageBean&lt;Customer&gt; pageBean = customerService.findByPage(criteria , currentPage , pageSize);
</span></span><span class=line><span class=cl>	ActionContext.getContext().getValueStack().push(pageBean);//3. 把pageBean存储到作用域 值栈。 push | set | 属性
</span></span><span class=line><span class=cl>	return Constant.PAGE_SUCCESS;}//返回</span></span></code></pre></td></tr></table></div></div><h3 id=pagebeanjava--bean包下-提供setgettostring方法>PageBean.java bean包下 提供set/get/tostring方法
<a class=header-anchor href=#pagebeanjava--bean%e5%8c%85%e4%b8%8b-%e6%8f%90%e4%be%9bsetgettostring%e6%96%b9%e6%b3%95></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-38-1><a class=lnlinks href=#hl-38-1>1</a>
</span><span class=lnt id=hl-38-2><a class=lnlinks href=#hl-38-2>2</a>
</span><span class=lnt id=hl-38-3><a class=lnlinks href=#hl-38-3>3</a>
</span><span class=lnt id=hl-38-4><a class=lnlinks href=#hl-38-4>4</a>
</span><span class=lnt id=hl-38-5><a class=lnlinks href=#hl-38-5>5</a>
</span><span class=lnt id=hl-38-6><a class=lnlinks href=#hl-38-6>6</a>
</span><span class=lnt id=hl-38-7><a class=lnlinks href=#hl-38-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public class PageBean&lt;T&gt; {
</span></span><span class=line><span class=cl>private int currentPage;//当前页码
</span></span><span class=line><span class=cl>private int totalPage;//总页数
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>private int pageSize;//每页条数
</span></span><span class=line><span class=cl>private int totalSize;//总条数
</span></span><span class=line><span class=cl>private List&lt;T&gt;list;//当前页集合</span></span></code></pre></td></tr></table></div></div><h3 id=到-customerserviceimpl--分页显示客户列表-有两个地方会走这个方法>到 CustomerServiceImpl 分页显示客户列表 有两个地方会走这个方法：
<a class=header-anchor href=#%e5%88%b0-customerserviceimpl--%e5%88%86%e9%a1%b5%e6%98%be%e7%a4%ba%e5%ae%a2%e6%88%b7%e5%88%97%e8%a1%a8-%e6%9c%89%e4%b8%a4%e4%b8%aa%e5%9c%b0%e6%96%b9%e4%bc%9a%e8%b5%b0%e8%bf%99%e4%b8%aa%e6%96%b9%e6%b3%95></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-39-1><a class=lnlinks href=#hl-39-1> 1</a>
</span><span class=lnt id=hl-39-2><a class=lnlinks href=#hl-39-2> 2</a>
</span><span class=lnt id=hl-39-3><a class=lnlinks href=#hl-39-3> 3</a>
</span><span class=lnt id=hl-39-4><a class=lnlinks href=#hl-39-4> 4</a>
</span><span class=lnt id=hl-39-5><a class=lnlinks href=#hl-39-5> 5</a>
</span><span class=lnt id=hl-39-6><a class=lnlinks href=#hl-39-6> 6</a>
</span><span class=lnt id=hl-39-7><a class=lnlinks href=#hl-39-7> 7</a>
</span><span class=lnt id=hl-39-8><a class=lnlinks href=#hl-39-8> 8</a>
</span><span class=lnt id=hl-39-9><a class=lnlinks href=#hl-39-9> 9</a>
</span><span class=lnt id=hl-39-10><a class=lnlinks href=#hl-39-10>10</a>
</span><span class=lnt id=hl-39-11><a class=lnlinks href=#hl-39-11>11</a>
</span><span class=lnt id=hl-39-12><a class=lnlinks href=#hl-39-12>12</a>
</span><span class=lnt id=hl-39-13><a class=lnlinks href=#hl-39-13>13</a>
</span><span class=lnt id=hl-39-14><a class=lnlinks href=#hl-39-14>14</a>
</span><span class=lnt id=hl-39-15><a class=lnlinks href=#hl-39-15>15</a>
</span><span class=lnt id=hl-39-16><a class=lnlinks href=#hl-39-16>16</a>
</span><span class=lnt id=hl-39-17><a class=lnlinks href=#hl-39-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>@Transactional//注解业务
</span></span><span class=line><span class=cl>public class CustomerServiceImpl implements CustomerService {
</span></span><span class=line><span class=cl>..
</span></span><span class=line><span class=cl>private int currentPage=1;//先设置 默认第一页/当前页 提供set方法以便页面修改
</span></span><span class=line><span class=cl>private int pageSize=5;//设置每页条数 提供set方法以便页面修改获取具体条数
</span></span><span class=line><span class=cl>public void setCurrentPage(int currentPage) {
</span></span><span class=line><span class=cl>	this.currentPage = currentPage;}
</span></span><span class=line><span class=cl>public void setPageSize(int pageSize) {
</span></span><span class=line><span class=cl>	this.pageSize = pageSize;}
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>public String findByPage() {//分布查询客户列表 两个地方走这个方法左侧客户列表不带条件 筛选带条件
</span></span><span class=line><span class=cl>//离线对象如果只是这么创建出来，背后的sql语句 select * from customer;是QBC查询重要组件 能够在dao层之上两层进行查询条件封装 也可以不封装
</span></span><span class=line><span class=cl>//只会使用离线对象的两个方法  setXXX（针对聚合查询 总记录数、最大值、最小值、addXXX(针对where条件的设置)
</span></span><span class=line><span class=cl>DetachedCriteria criteria=DetachedCriteria.forClass(Customer.class);//离线对象
</span></span><span class=line><span class=cl>PageBean&lt;Customer&gt; pageBean = customerService.findByPage(criteria , currentPage , pageSize);//查询数据业务 返回pageBean 集合对象
</span></span><span class=line><span class=cl>ActionContext.getContext().getValueStack().push(pageBean);//3. 把pageBean存储到作用域 值栈。 push | set | 属性
</span></span><span class=line><span class=cl>return Constant.PAGE_SUCCESS;}//返回</span></span></code></pre></td></tr></table></div></div><h3 id=service接口-customerservice>service接口 CustomerService
<a class=header-anchor href=#service%e6%8e%a5%e5%8f%a3-customerservice></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1>1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public interface CustomerService {
</span></span><span class=line><span class=cl>	PageBean&lt;Customer&gt; findByPage(DetachedCriteria criteria, int currentPage, int pageSize);</span></span></code></pre></td></tr></table></div></div><h3 id=service实现类-customerserviceimpl>service实现类 CustomerServiceImpl
<a class=header-anchor href=#service%e5%ae%9e%e7%8e%b0%e7%b1%bb-customerserviceimpl></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-41-1><a class=lnlinks href=#hl-41-1> 1</a>
</span><span class=lnt id=hl-41-2><a class=lnlinks href=#hl-41-2> 2</a>
</span><span class=lnt id=hl-41-3><a class=lnlinks href=#hl-41-3> 3</a>
</span><span class=lnt id=hl-41-4><a class=lnlinks href=#hl-41-4> 4</a>
</span><span class=lnt id=hl-41-5><a class=lnlinks href=#hl-41-5> 5</a>
</span><span class=lnt id=hl-41-6><a class=lnlinks href=#hl-41-6> 6</a>
</span><span class=lnt id=hl-41-7><a class=lnlinks href=#hl-41-7> 7</a>
</span><span class=lnt id=hl-41-8><a class=lnlinks href=#hl-41-8> 8</a>
</span><span class=lnt id=hl-41-9><a class=lnlinks href=#hl-41-9> 9</a>
</span><span class=lnt id=hl-41-10><a class=lnlinks href=#hl-41-10>10</a>
</span><span class=lnt id=hl-41-11><a class=lnlinks href=#hl-41-11>11</a>
</span><span class=lnt id=hl-41-12><a class=lnlinks href=#hl-41-12>12</a>
</span><span class=lnt id=hl-41-13><a class=lnlinks href=#hl-41-13>13</a>
</span><span class=lnt id=hl-41-14><a class=lnlinks href=#hl-41-14>14</a>
</span><span class=lnt id=hl-41-15><a class=lnlinks href=#hl-41-15>15</a>
</span><span class=lnt id=hl-41-16><a class=lnlinks href=#hl-41-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public PageBean&lt;Customer&gt; findByPage(DetachedCriteria criteria, int currentPage, int pageSize) {
</span></span><span class=line><span class=cl>int totalSize=customerDao.findCound(criteria);//查出总条数 传离线对象 区分筛选某一种类型数据
</span></span><span class=line><span class=cl>List&lt;Customer&gt;list=customerDao.findByPage(criteria,currentPage,pageSize);//查出PageBean的list
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>PageBean&lt;Customer&gt; pageBean = new PageBean&lt;&gt;();//new pageBean对象
</span></span><span class=line><span class=cl>pageBean.setCurrentPage(currentPage);//手动封装 当前页
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>int totalPage=totalSize%pageSize==0?totalSize/pageSize:(totalSize/pageSize)+1;//三元计算出总页数 整除就总页除每页条数,不整除加1
</span></span><span class=line><span class=cl>//int totalPage=(int)Math.ceil(totalSize*1.0/pageSize);//也可以用工具类向上取整只要有小数点就向上取成整数
</span></span><span class=line><span class=cl>pageBean.setTotalPage(totalPage);//手动封装 总页数
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pageBean.setPageSize(pageSize);//手动封装 每页条数
</span></span><span class=line><span class=cl>pageBean.setTotalSize(totalSize);//手动封装 总条数
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pageBean.setList(list);//手动封装pageBean
</span></span><span class=line><span class=cl>return pageBean;}//返回的是pageBean</span></span></code></pre></td></tr></table></div></div><h3 id=dao接口-customerdao>dao接口 CustomerDao
<a class=header-anchor href=#dao%e6%8e%a5%e5%8f%a3-customerdao></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-42-1><a class=lnlinks href=#hl-42-1>1</a>
</span><span class=lnt id=hl-42-2><a class=lnlinks href=#hl-42-2>2</a>
</span><span class=lnt id=hl-42-3><a class=lnlinks href=#hl-42-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public interface CustomerDao {
</span></span><span class=line><span class=cl>	int findCound(DetachedCriteria criteria);
</span></span><span class=line><span class=cl>	List&lt;Customer&gt; findByPage(DetachedCriteria criteria, int currentPage, int pageSize);</span></span></code></pre></td></tr></table></div></div><h3 id=dao实现-customerdaoimpl>dao实现 CustomerDaoImpl
<a class=header-anchor href=#dao%e5%ae%9e%e7%8e%b0-customerdaoimpl></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-43-1><a class=lnlinks href=#hl-43-1> 1</a>
</span><span class=lnt id=hl-43-2><a class=lnlinks href=#hl-43-2> 2</a>
</span><span class=lnt id=hl-43-3><a class=lnlinks href=#hl-43-3> 3</a>
</span><span class=lnt id=hl-43-4><a class=lnlinks href=#hl-43-4> 4</a>
</span><span class=lnt id=hl-43-5><a class=lnlinks href=#hl-43-5> 5</a>
</span><span class=lnt id=hl-43-6><a class=lnlinks href=#hl-43-6> 6</a>
</span><span class=lnt id=hl-43-7><a class=lnlinks href=#hl-43-7> 7</a>
</span><span class=lnt id=hl-43-8><a class=lnlinks href=#hl-43-8> 8</a>
</span><span class=lnt id=hl-43-9><a class=lnlinks href=#hl-43-9> 9</a>
</span><span class=lnt id=hl-43-10><a class=lnlinks href=#hl-43-10>10</a>
</span><span class=lnt id=hl-43-11><a class=lnlinks href=#hl-43-11>11</a>
</span><span class=lnt id=hl-43-12><a class=lnlinks href=#hl-43-12>12</a>
</span><span class=lnt id=hl-43-13><a class=lnlinks href=#hl-43-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>@Override//查询客户总条数 用hibernate模板查
</span></span><span class=line><span class=cl>	public int findCound(DetachedCriteria criteria) {
</span></span><span class=line><span class=cl>		criteria.setProjection(Projections.rowCount());//离线对象经过这个语句就变成查select count(*) from customer查行个数 默认是查全部select*from customer
</span></span><span class=line><span class=cl>		List&lt;Long&gt; list = (List&lt;Long&gt;) getHibernateTemplate().findByCriteria(criteria);
</span></span><span class=line><span class=cl>		if (list.size()&gt;0) {
</span></span><span class=line><span class=cl>			return list.get(0).intValue();//如果集合中有条数  就转成int
</span></span><span class=line><span class=cl>		}
</span></span><span class=line><span class=cl>		return 0;	}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	@Override//查分页
</span></span><span class=line><span class=cl>	public List&lt;Customer&gt; findByPage(DetachedCriteria criteria, int currentPage, int pageSize) {
</span></span><span class=line><span class=cl>		criteria.setProjection(null);//离线对象 重置回来select*from customer
</span></span><span class=line><span class=cl>		return (List&lt;Customer&gt;) getHibernateTemplate().findByCriteria(criteria, (currentPage-1)*pageSize, pageSize);	}//查分页 离线对象 当前页减1再乘每页条数 每页条数</span></span></code></pre></td></tr></table></div></div><h3 id=strutsxml>struts.xml
<a class=header-anchor href=#strutsxml></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-44-1><a class=lnlinks href=#hl-44-1>1</a>
</span><span class=lnt id=hl-44-2><a class=lnlinks href=#hl-44-2>2</a>
</span><span class=lnt id=hl-44-3><a class=lnlinks href=#hl-44-3>3</a>
</span><span class=lnt id=hl-44-4><a class=lnlinks href=#hl-44-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=nx>以下属于客户模块</span><span class=w> </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=kn>package</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;customer&#34;</span><span class=w> </span><span class=nx>namespace</span><span class=p>=</span><span class=s>&#34;/&#34;</span><span class=w> </span><span class=nx>extends</span><span class=p>=</span><span class=s>&#34;struts-default&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=nx>action</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;customer_*&#34;</span><span class=w> </span><span class=nx>class</span><span class=p>=</span><span class=s>&#34;customerAction&#34;</span><span class=w> </span><span class=nx>method</span><span class=p>=</span><span class=s>&#34;{1}&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>&lt;</span><span class=nx>result</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;page_success&#34;</span><span class=p>&gt;</span><span class=o>/</span><span class=nx>jsp</span><span class=o>/</span><span class=nx>customer</span><span class=o>/</span><span class=nx>list</span><span class=p>.</span><span class=nx>jsp</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>result</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div><h3 id=jspcustomerlistjsp>/jsp/customer/list.jsp
<a class=header-anchor href=#jspcustomerlistjsp></a></h3><p>&lt;%@ taglib uri="/struts-tags&rdquo; prefix=&ldquo;s&rdquo; %></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-45-1><a class=lnlinks href=#hl-45-1> 1</a>
</span><span class=lnt id=hl-45-2><a class=lnlinks href=#hl-45-2> 2</a>
</span><span class=lnt id=hl-45-3><a class=lnlinks href=#hl-45-3> 3</a>
</span><span class=lnt id=hl-45-4><a class=lnlinks href=#hl-45-4> 4</a>
</span><span class=lnt id=hl-45-5><a class=lnlinks href=#hl-45-5> 5</a>
</span><span class=lnt id=hl-45-6><a class=lnlinks href=#hl-45-6> 6</a>
</span><span class=lnt id=hl-45-7><a class=lnlinks href=#hl-45-7> 7</a>
</span><span class=lnt id=hl-45-8><a class=lnlinks href=#hl-45-8> 8</a>
</span><span class=lnt id=hl-45-9><a class=lnlinks href=#hl-45-9> 9</a>
</span><span class=lnt id=hl-45-10><a class=lnlinks href=#hl-45-10>10</a>
</span><span class=lnt id=hl-45-11><a class=lnlinks href=#hl-45-11>11</a>
</span><span class=lnt id=hl-45-12><a class=lnlinks href=#hl-45-12>12</a>
</span><span class=lnt id=hl-45-13><a class=lnlinks href=#hl-45-13>13</a>
</span><span class=lnt id=hl-45-14><a class=lnlinks href=#hl-45-14>14</a>
</span><span class=lnt id=hl-45-15><a class=lnlinks href=#hl-45-15>15</a>
</span><span class=lnt id=hl-45-16><a class=lnlinks href=#hl-45-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;!--</span> <span class=err>遍历存在值栈中的</span><span class=n>list</span> <span class=err>的每一条客户信息</span> <span class=err>并展示各项信息</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>c</span><span class=p>:</span><span class=n>forEach</span> <span class=n>items</span><span class=o>=</span><span class=s2>&#34;${list }&#34;</span> <span class=k>var</span><span class=o>=</span><span class=s2>&#34;customer&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>TR</span> <span class=n>style</span><span class=o>=</span><span class=s2>&#34;FONT-WEIGHT: normal; FONT-STYLE: normal; BACKGROUND-COLOR: white; TEXT-DECORATION: none&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>TD</span><span class=o>&gt;$</span><span class=p>{</span><span class=n>customer</span><span class=o>.</span><span class=n>cust_name</span> <span class=p>}</span><span class=o>&lt;/</span><span class=n>TD</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>TD</span><span class=o>&gt;$</span><span class=p>{</span><span class=n>customer</span><span class=o>.</span><span class=n>cust_level</span><span class=o>.</span><span class=n>dict_item_name</span><span class=p>}</span><span class=o>&lt;/</span><span class=n>TD</span><span class=o>&gt;&lt;!--</span> <span class=err>是取得级别里面的名字要</span><span class=o>.</span><span class=err>字典</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>TD</span><span class=o>&gt;$</span><span class=p>{</span><span class=n>customer</span><span class=o>.</span><span class=n>cust_source</span><span class=o>.</span><span class=n>dict_item_name</span> <span class=p>}</span><span class=o>&lt;/</span><span class=n>TD</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>TD</span><span class=o>&gt;$</span><span class=p>{</span><span class=n>customer</span><span class=o>.</span><span class=n>cust_industry</span><span class=o>.</span><span class=n>dict_item_name</span> <span class=p>}</span><span class=o>&lt;/</span><span class=n>TD</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>TD</span><span class=o>&gt;$</span><span class=p>{</span><span class=n>customer</span><span class=o>.</span><span class=n>cust_address</span> <span class=p>}</span><span class=o>&lt;/</span><span class=n>TD</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>TD</span><span class=o>&gt;$</span><span class=p>{</span><span class=n>customer</span><span class=o>.</span><span class=n>cust_phone</span> <span class=p>}</span><span class=o>&lt;/</span><span class=n>TD</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>TD</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>a</span> <span class=n>href</span><span class=o>=</span><span class=s2>&#34;${pageContext.request.contextPath }/customer/CustomerServlet?method=editCustomerUI&amp;custId=${customer.cust_id}&#34;</span><span class=o>&gt;</span><span class=err>修改</span><span class=o>&lt;/</span><span class=n>a</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&amp;</span><span class=n>nbsp</span><span class=p>;</span><span class=o>&amp;</span><span class=n>nbsp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;</span><span class=n>a</span> <span class=n>href</span><span class=o>=</span><span class=s2>&#34;${pageContext.request.contextPath }/customer/CustomerServlet?method=removeCustomer&amp;custId=${customer.cust_id}&#34;</span><span class=o>&gt;</span><span class=err>删除</span><span class=o>&lt;/</span><span class=n>a</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=o>&lt;/</span><span class=n>TD</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>TR</span><span class=o>&gt;</span>	
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>c</span><span class=p>:</span><span class=n>forEach</span><span class=o>&gt;</span></span></span></code></pre></td></tr></table></div></div><h3 id=懒加载过滤器-webxml>懒加载过滤器 web.xml
<a class=header-anchor href=#%e6%87%92%e5%8a%a0%e8%bd%bd%e8%bf%87%e6%bb%a4%e5%99%a8-webxml></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-46-1><a class=lnlinks href=#hl-46-1>1</a>
</span><span class=lnt id=hl-46-2><a class=lnlinks href=#hl-46-2>2</a>
</span><span class=lnt id=hl-46-3><a class=lnlinks href=#hl-46-3>3</a>
</span><span class=lnt id=hl-46-4><a class=lnlinks href=#hl-46-4>4</a>
</span><span class=lnt id=hl-46-5><a class=lnlinks href=#hl-46-5>5</a>
</span><span class=lnt id=hl-46-6><a class=lnlinks href=#hl-46-6>6</a>
</span><span class=lnt id=hl-46-7><a class=lnlinks href=#hl-46-7>7</a>
</span><span class=lnt id=hl-46-8><a class=lnlinks href=#hl-46-8>8</a>
</span><span class=lnt id=hl-46-9><a class=lnlinks href=#hl-46-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;!--   过滤器 懒加载 搜OpenSessionInViewFilter第5版 再在前端请求方法后加 .action --&gt;
</span></span><span class=line><span class=cl>  &lt;filter&gt;
</span></span><span class=line><span class=cl>  	&lt;filter-name&gt;openSession&lt;/filter-name&gt;
</span></span><span class=line><span class=cl>  	&lt;filter-class&gt;org.springframework.orm.hibernate5.support.OpenSessionInViewFilter&lt;/filter-class&gt;
</span></span><span class=line><span class=cl>  &lt;/filter&gt;
</span></span><span class=line><span class=cl>  &lt;filter-mapping&gt;
</span></span><span class=line><span class=cl>  	&lt;filter-name&gt;openSession&lt;/filter-name&gt;
</span></span><span class=line><span class=cl>  	&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;
</span></span><span class=line><span class=cl>  &lt;/filter-mapping&gt;</span></span></code></pre></td></tr></table></div></div><h3 id=遍历客户-下面的分页-上下页-分页-跳转的div>遍历客户 下面的分页 上下页 分页 跳转的div
<a class=header-anchor href=#%e9%81%8d%e5%8e%86%e5%ae%a2%e6%88%b7-%e4%b8%8b%e9%9d%a2%e7%9a%84%e5%88%86%e9%a1%b5-%e4%b8%8a%e4%b8%8b%e9%a1%b5-%e5%88%86%e9%a1%b5-%e8%b7%b3%e8%bd%ac%e7%9a%84div></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-47-1><a class=lnlinks href=#hl-47-1> 1</a>
</span><span class=lnt id=hl-47-2><a class=lnlinks href=#hl-47-2> 2</a>
</span><span class=lnt id=hl-47-3><a class=lnlinks href=#hl-47-3> 3</a>
</span><span class=lnt id=hl-47-4><a class=lnlinks href=#hl-47-4> 4</a>
</span><span class=lnt id=hl-47-5><a class=lnlinks href=#hl-47-5> 5</a>
</span><span class=lnt id=hl-47-6><a class=lnlinks href=#hl-47-6> 6</a>
</span><span class=lnt id=hl-47-7><a class=lnlinks href=#hl-47-7> 7</a>
</span><span class=lnt id=hl-47-8><a class=lnlinks href=#hl-47-8> 8</a>
</span><span class=lnt id=hl-47-9><a class=lnlinks href=#hl-47-9> 9</a>
</span><span class=lnt id=hl-47-10><a class=lnlinks href=#hl-47-10>10</a>
</span><span class=lnt id=hl-47-11><a class=lnlinks href=#hl-47-11>11</a>
</span><span class=lnt id=hl-47-12><a class=lnlinks href=#hl-47-12>12</a>
</span><span class=lnt id=hl-47-13><a class=lnlinks href=#hl-47-13>13</a>
</span><span class=lnt id=hl-47-14><a class=lnlinks href=#hl-47-14>14</a>
</span><span class=lnt id=hl-47-15><a class=lnlinks href=#hl-47-15>15</a>
</span><span class=lnt id=hl-47-16><a class=lnlinks href=#hl-47-16>16</a>
</span><span class=lnt id=hl-47-17><a class=lnlinks href=#hl-47-17>17</a>
</span><span class=lnt id=hl-47-18><a class=lnlinks href=#hl-47-18>18</a>
</span><span class=lnt id=hl-47-19><a class=lnlinks href=#hl-47-19>19</a>
</span><span class=lnt id=hl-47-20><a class=lnlinks href=#hl-47-20>20</a>
</span><span class=lnt id=hl-47-21><a class=lnlinks href=#hl-47-21>21</a>
</span><span class=lnt id=hl-47-22><a class=lnlinks href=#hl-47-22>22</a>
</span><span class=lnt id=hl-47-23><a class=lnlinks href=#hl-47-23>23</a>
</span><span class=lnt id=hl-47-24><a class=lnlinks href=#hl-47-24>24</a>
</span><span class=lnt id=hl-47-25><a class=lnlinks href=#hl-47-25>25</a>
</span><span class=lnt id=hl-47-26><a class=lnlinks href=#hl-47-26>26</a>
</span><span class=lnt id=hl-47-27><a class=lnlinks href=#hl-47-27>27</a>
</span><span class=lnt id=hl-47-28><a class=lnlinks href=#hl-47-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;DIV style=&#34;LINE-HEIGHT: 20px; HEIGHT: 20px; TEXT-ALIGN: right&#34;&gt;
</span></span><span class=line><span class=cl>	共[&lt;B&gt;${totalSize}&lt;/B&gt;]条信息,按每页显示
</span></span><span class=line><span class=cl>	&lt;select name=&#34;pageSize&#34; onchange=&#34;changePageSize()&#34;&gt;&lt;!-- 点击改变就执行JS方法 --&gt;
</span></span><span class=line><span class=cl>	&lt;option value=&#34;5&#34; &lt;c:if test=&#34;${pageSize==5 }&#34;&gt;selected&lt;/c:if&gt;&gt;5&lt;/option&gt;
</span></span><span class=line><span class=cl>	&lt;option value=&#34;10&#34; &lt;c:if test=&#34;${pageSize==10 }&#34;&gt;selected&lt;/c:if&gt;&gt;10&lt;/option&gt;
</span></span><span class=line><span class=cl>	&lt;option value=&#34;15&#34; &lt;c:if test=&#34;${pageSize==15 }&#34;&gt;selected&lt;/c:if&gt;&gt;15&lt;/option&gt;
</span></span><span class=line><span class=cl>	&lt;option value=&#34;20&#34; &lt;c:if test=&#34;${pageSize==20 }&#34;&gt;selected&lt;/c:if&gt;&gt;20&lt;/option&gt;
</span></span><span class=line><span class=cl>	&lt;/select&gt;
</span></span><span class=line><span class=cl>	条,共[&lt;B&gt;${totalPage}&lt;/B&gt;]页 &lt;B&gt;当前第${currentPage}页&lt;/B&gt;
</span></span><span class=line><span class=cl>	[
</span></span><span class=line><span class=cl>	&lt;s:if test=&#34;currentPage==1&#34;&gt;&lt;!-- 如果是第一页就是第一页文字不可点击 --&gt;
</span></span><span class=line><span class=cl>		第一页
</span></span><span class=line><span class=cl>	&lt;/s:if&gt;
</span></span><span class=line><span class=cl>	&lt;s:else&gt;
</span></span><span class=line><span class=cl>	&lt;A href=&#34;javascript:to_page(${currentPage-1})&#34;&gt;到前一页&lt;/A&gt;&lt;!-- 点击执行js方法 --&gt;
</span></span><span class=line><span class=cl>	&lt;/s:else&gt;
</span></span><span class=line><span class=cl>	][
</span></span><span class=line><span class=cl>	&lt;s:if test=&#34;currentPage==totalPage&#34;&gt;&lt;!-- 如果是总页数就是最后一页文字不可点击 --&gt;
</span></span><span class=line><span class=cl>		最后一页
</span></span><span class=line><span class=cl>	&lt;/s:if&gt;
</span></span><span class=line><span class=cl>	&lt;s:else&gt;
</span></span><span class=line><span class=cl>	&lt;A href=&#34;javascript:to_page(${currentPage+1})&#34;&gt;到后一页&lt;/A&gt; 
</span></span><span class=line><span class=cl>	&lt;/s:else&gt;
</span></span><span class=line><span class=cl>	]
</span></span><span class=line><span class=cl>	&lt;input type=&#34;button&#34; value=&#34;跳转到第&#34; onclick=&#34;to_page()&#34;/&gt;
</span></span><span class=line><span class=cl>	&lt;input type=&#34;text&#34; size=&#34;3&#34; id=&#34;page&#34; name=&#34;currentPage&#34; /&gt;
</span></span><span class=line><span class=cl>	页
</span></span><span class=line><span class=cl>&lt;/DIV&gt;</span></span></code></pre></td></tr></table></div></div><p>js</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-48-1><a class=lnlinks href=#hl-48-1> 1</a>
</span><span class=lnt id=hl-48-2><a class=lnlinks href=#hl-48-2> 2</a>
</span><span class=lnt id=hl-48-3><a class=lnlinks href=#hl-48-3> 3</a>
</span><span class=lnt id=hl-48-4><a class=lnlinks href=#hl-48-4> 4</a>
</span><span class=lnt id=hl-48-5><a class=lnlinks href=#hl-48-5> 5</a>
</span><span class=lnt id=hl-48-6><a class=lnlinks href=#hl-48-6> 6</a>
</span><span class=lnt id=hl-48-7><a class=lnlinks href=#hl-48-7> 7</a>
</span><span class=lnt id=hl-48-8><a class=lnlinks href=#hl-48-8> 8</a>
</span><span class=lnt id=hl-48-9><a class=lnlinks href=#hl-48-9> 9</a>
</span><span class=lnt id=hl-48-10><a class=lnlinks href=#hl-48-10>10</a>
</span><span class=lnt id=hl-48-11><a class=lnlinks href=#hl-48-11>11</a>
</span><span class=lnt id=hl-48-12><a class=lnlinks href=#hl-48-12>12</a>
</span><span class=lnt id=hl-48-13><a class=lnlinks href=#hl-48-13>13</a>
</span><span class=lnt id=hl-48-14><a class=lnlinks href=#hl-48-14>14</a>
</span><span class=lnt id=hl-48-15><a class=lnlinks href=#hl-48-15>15</a>
</span><span class=lnt id=hl-48-16><a class=lnlinks href=#hl-48-16>16</a>
</span><span class=lnt id=hl-48-17><a class=lnlinks href=#hl-48-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>script</span> <span class=n>type</span><span class=o>=</span><span class=s2>&#34;text/javascript&#34;</span> <span class=n>src</span><span class=o>=</span><span class=s2>&#34;${pageContext.request.contextPath }/js/jquery-1.11.3.min.js&#34;</span><span class=o>&gt;&lt;/</span><span class=n>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>SCRIPT</span> <span class=n>language</span><span class=o>=</span><span class=n>javascript</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=n>function</span> <span class=n>to_page</span><span class=p>(</span><span class=n>page</span><span class=p>){</span><span class=o>//</span><span class=n>to_page方法传page参数</span> <span class=err>如果有参数就改变并提交表单</span> <span class=n>js版本是1</span><span class=o>.</span><span class=mf>11.3</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=n>page</span><span class=p>){</span><span class=o>//</span><span class=err>如果有参数就执行改变</span><span class=c1>#page标签的页数</span>
</span></span><span class=line><span class=cl>			<span class=o>$</span><span class=p>(</span><span class=s2>&#34;#page&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>val</span><span class=p>(</span><span class=n>page</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span><span class=k>else</span><span class=p>{</span><span class=o>//</span><span class=err>点击转转到</span> <span class=err>就进入</span><span class=n>else分支</span>
</span></span><span class=line><span class=cl>		<span class=k>var</span> <span class=n>requestPage</span><span class=o>=$</span><span class=p>(</span><span class=s2>&#34;#page&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>val</span><span class=p>();</span><span class=o>//</span><span class=err>当前输入的值</span>
</span></span><span class=line><span class=cl>		<span class=k>var</span> <span class=n>totalPage</span><span class=o>=</span><span class=s2>&#34;${totalPage}&#34;</span><span class=p>;</span><span class=o>//</span><span class=err>总页数</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=p>(</span><span class=n>Number</span><span class=p>(</span><span class=n>requestPage</span><span class=p>)</span><span class=o>&gt;</span><span class=n>Number</span><span class=p>(</span><span class=n>totalPage</span><span class=p>))</span> <span class=p>{</span><span class=o>//</span><span class=err>如果输入值大于总页</span> <span class=err>就转到最后一页</span>
</span></span><span class=line><span class=cl>			<span class=n>alert</span><span class=p>(</span><span class=s2>&#34;输入的第&#34;</span><span class=o>+</span><span class=n>requestPage</span><span class=o>+</span><span class=s2>&#34;页,超过最大&#34;</span><span class=o>+</span><span class=n>totalPage</span><span class=o>+</span><span class=s2>&#34;页,现到最后一页&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=o>$</span><span class=p>(</span><span class=s2>&#34;#page&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>val</span><span class=p>(</span><span class=n>totalPage</span><span class=p>);</span>		<span class=p>}</span>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=n>document</span><span class=o>.</span><span class=n>customerForm</span><span class=o>.</span><span class=n>submit</span><span class=p>();}</span><span class=o>//</span><span class=err>并提交整个表单到</span> <span class=n>customer_findByPage</span><span class=o>.</span><span class=n>action</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>	<span class=n>function</span> <span class=n>changePageSize</span><span class=p>(){</span><span class=o>//</span><span class=err>改变每页显示条数</span> <span class=err>的方法</span>
</span></span><span class=line><span class=cl>		<span class=n>document</span><span class=o>.</span><span class=n>customerForm</span><span class=o>.</span><span class=n>submit</span><span class=p>();</span>	<span class=o>//</span><span class=err>提交整个表单到</span><span class=n>findByPage</span><span class=o>.</span><span class=n>action</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>SCRIPT</span><span class=o>&gt;</span></span></span></code></pre></td></tr></table></div></div><h3 id=最后都是提交的表单>最后都是提交的表单
<a class=header-anchor href=#%e6%9c%80%e5%90%8e%e9%83%bd%e6%98%af%e6%8f%90%e4%ba%a4%e7%9a%84%e8%a1%a8%e5%8d%95></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-49-1><a class=lnlinks href=#hl-49-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;FORM id=&#34;customerForm&#34; name=&#34;customerForm&#34; action=&#34;${pageContext.request.contextPath }/customer_findByPage.action&#34; method=post&gt;</span></span></code></pre></td></tr></table></div></div><h2 id=筛选>筛选
<a class=header-anchor href=#%e7%ad%9b%e9%80%89></a></h2><h3 id=listjsp>list.jsp
<a class=header-anchor href=#listjsp></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-50-1><a class=lnlinks href=#hl-50-1> 1</a>
</span><span class=lnt id=hl-50-2><a class=lnlinks href=#hl-50-2> 2</a>
</span><span class=lnt id=hl-50-3><a class=lnlinks href=#hl-50-3> 3</a>
</span><span class=lnt id=hl-50-4><a class=lnlinks href=#hl-50-4> 4</a>
</span><span class=lnt id=hl-50-5><a class=lnlinks href=#hl-50-5> 5</a>
</span><span class=lnt id=hl-50-6><a class=lnlinks href=#hl-50-6> 6</a>
</span><span class=lnt id=hl-50-7><a class=lnlinks href=#hl-50-7> 7</a>
</span><span class=lnt id=hl-50-8><a class=lnlinks href=#hl-50-8> 8</a>
</span><span class=lnt id=hl-50-9><a class=lnlinks href=#hl-50-9> 9</a>
</span><span class=lnt id=hl-50-10><a class=lnlinks href=#hl-50-10>10</a>
</span><span class=lnt id=hl-50-11><a class=lnlinks href=#hl-50-11>11</a>
</span><span class=lnt id=hl-50-12><a class=lnlinks href=#hl-50-12>12</a>
</span><span class=lnt id=hl-50-13><a class=lnlinks href=#hl-50-13>13</a>
</span><span class=lnt id=hl-50-14><a class=lnlinks href=#hl-50-14>14</a>
</span><span class=lnt id=hl-50-15><a class=lnlinks href=#hl-50-15>15</a>
</span><span class=lnt id=hl-50-16><a class=lnlinks href=#hl-50-16>16</a>
</span><span class=lnt id=hl-50-17><a class=lnlinks href=#hl-50-17>17</a>
</span><span class=lnt id=hl-50-18><a class=lnlinks href=#hl-50-18>18</a>
</span><span class=lnt id=hl-50-19><a class=lnlinks href=#hl-50-19>19</a>
</span><span class=lnt id=hl-50-20><a class=lnlinks href=#hl-50-20>20</a>
</span><span class=lnt id=hl-50-21><a class=lnlinks href=#hl-50-21>21</a>
</span><span class=lnt id=hl-50-22><a class=lnlinks href=#hl-50-22>22</a>
</span><span class=lnt id=hl-50-23><a class=lnlinks href=#hl-50-23>23</a>
</span><span class=lnt id=hl-50-24><a class=lnlinks href=#hl-50-24>24</a>
</span><span class=lnt id=hl-50-25><a class=lnlinks href=#hl-50-25>25</a>
</span><span class=lnt id=hl-50-26><a class=lnlinks href=#hl-50-26>26</a>
</span><span class=lnt id=hl-50-27><a class=lnlinks href=#hl-50-27>27</a>
</span><span class=lnt id=hl-50-28><a class=lnlinks href=#hl-50-28>28</a>
</span><span class=lnt id=hl-50-29><a class=lnlinks href=#hl-50-29>29</a>
</span><span class=lnt id=hl-50-30><a class=lnlinks href=#hl-50-30>30</a>
</span><span class=lnt id=hl-50-31><a class=lnlinks href=#hl-50-31>31</a>
</span><span class=lnt id=hl-50-32><a class=lnlinks href=#hl-50-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;TABLE cellSpacing=0 cellPadding=2 border=0&gt;
</span></span><span class=line><span class=cl>&lt;TBODY&gt;
</span></span><span class=line><span class=cl>&lt;TR&gt;
</span></span><span class=line><span class=cl>	&lt;TD&gt;客户名称：&lt;/TD&gt;
</span></span><span class=line><span class=cl>	&lt;TD&gt;&lt;s:textfield class=&#34;textbox&#34; id=&#34;sChannel2&#34; style=&#34;WIDTH: 80px&#34; maxLength=&#34;50&#34; name=&#34;cust_name&#34; /&gt;&lt;/TD&gt;
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	&lt;TD&gt;客户来源：&lt;/TD&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>	&lt;select name=&#34;cust_source.dict_id&#34; class=textbox id=&#34;cust_source&#34; style=&#34;WIDTH: 100px;height:21px&#34;&gt;
</span></span><span class=line><span class=cl>		&lt;option value=&#34;&#34;&gt;---请选择---&lt;/option&gt;
</span></span><span class=line><span class=cl>	&lt;/select&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;TD&gt;客户行业：&lt;/TD&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>	&lt;select name=&#34;cust_industry.dict_id&#34; class=textbox id=&#34;cust_industry&#34; style=&#34;WIDTH: 100px;height:21px&#34;&gt;
</span></span><span class=line><span class=cl>		&lt;option value=&#34;&#34;&gt;---请选择---&lt;/option&gt;
</span></span><span class=line><span class=cl>	&lt;/select&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;TD&gt;客户级别：&lt;/TD&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>	&lt;select name=&#34;cust_level.dict_id&#34; class=textbox id=&#34;cust_level&#34; style=&#34;WIDTH: 100px;height:21px&#34;&gt;
</span></span><span class=line><span class=cl>		&lt;option value=&#34;&#34;&gt;---请选择---&lt;/option&gt;
</span></span><span class=line><span class=cl>	&lt;/select&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	&lt;TD&gt;客户电话：&lt;/TD&gt;
</span></span><span class=line><span class=cl>	&lt;TD&gt;&lt;s:textfield class=&#34;textbox&#34; id=&#34;sChannel2&#34; style=&#34;WIDTH: 80px&#34; maxLength=&#34;50&#34; name=&#34;cust_phone&#34; /&gt;&lt;/TD&gt;
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	&lt;TD&gt;&lt;INPUT class=button id=sButton2 type=submit value=&#34; 筛选 &#34; name=sButton2&gt;&lt;/TD&gt;&lt;!-- 点击按钮就提交 --&gt;
</span></span><span class=line><span class=cl>	&lt;/TR&gt;
</span></span><span class=line><span class=cl>&lt;/TBODY&gt;
</span></span><span class=line><span class=cl>&lt;/TABLE&gt;</span></span></code></pre></td></tr></table></div></div><h3 id=customeractionjava>CustomerAction.java
<a class=header-anchor href=#customeractionjava></a></h3><p>校验有没有带筛选条件就先用qbc查询出来再分页</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-51-1><a class=lnlinks href=#hl-51-1> 1</a>
</span><span class=lnt id=hl-51-2><a class=lnlinks href=#hl-51-2> 2</a>
</span><span class=lnt id=hl-51-3><a class=lnlinks href=#hl-51-3> 3</a>
</span><span class=lnt id=hl-51-4><a class=lnlinks href=#hl-51-4> 4</a>
</span><span class=lnt id=hl-51-5><a class=lnlinks href=#hl-51-5> 5</a>
</span><span class=lnt id=hl-51-6><a class=lnlinks href=#hl-51-6> 6</a>
</span><span class=lnt id=hl-51-7><a class=lnlinks href=#hl-51-7> 7</a>
</span><span class=lnt id=hl-51-8><a class=lnlinks href=#hl-51-8> 8</a>
</span><span class=lnt id=hl-51-9><a class=lnlinks href=#hl-51-9> 9</a>
</span><span class=lnt id=hl-51-10><a class=lnlinks href=#hl-51-10>10</a>
</span><span class=lnt id=hl-51-11><a class=lnlinks href=#hl-51-11>11</a>
</span><span class=lnt id=hl-51-12><a class=lnlinks href=#hl-51-12>12</a>
</span><span class=lnt id=hl-51-13><a class=lnlinks href=#hl-51-13>13</a>
</span><span class=lnt id=hl-51-14><a class=lnlinks href=#hl-51-14>14</a>
</span><span class=lnt id=hl-51-15><a class=lnlinks href=#hl-51-15>15</a>
</span><span class=lnt id=hl-51-16><a class=lnlinks href=#hl-51-16>16</a>
</span><span class=lnt id=hl-51-17><a class=lnlinks href=#hl-51-17>17</a>
</span><span class=lnt id=hl-51-18><a class=lnlinks href=#hl-51-18>18</a>
</span><span class=lnt id=hl-51-19><a class=lnlinks href=#hl-51-19>19</a>
</span><span class=lnt id=hl-51-20><a class=lnlinks href=#hl-51-20>20</a>
</span><span class=lnt id=hl-51-21><a class=lnlinks href=#hl-51-21>21</a>
</span><span class=lnt id=hl-51-22><a class=lnlinks href=#hl-51-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public String findByPage() {//分布查询客户列表 两个地方走这个方法左侧客户列表不带条件 筛选带条件
</span></span><span class=line><span class=cl>//离线对象如果只是这么创建出来，背后的sql语句 select * from customer;是QBC查询重要组件 能够在dao层之上两层进行查询条件封装 也可以不封装
</span></span><span class=line><span class=cl>//只会使用离线对象的两个方法  setXXX（针对聚合查询 总记录数、最大值、最小值、addXXX(针对where条件的设置)
</span></span><span class=line><span class=cl>DetachedCriteria criteria=DetachedCriteria.forClass(Customer.class);//离线对象
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//判断条件 走筛选的如果带上了条件 就把查询语句 先带上参数查询
</span></span><span class=line><span class=cl>if (!StringUtils.isEmpty(customer.getCust_name())) {//校验客户名称 用工具比较客户里名字不为空 就代表前端表单属性name 用模型驱动 传文本框和选择框参数过来了
</span></span><span class=line><span class=cl>criteria.add(Restrictions.like(&#34;cust_name&#34;, &#34;%&#34;+customer.getCust_name()+&#34;%&#34;));}//qbc查询 模糊查询模型驱动获得前端的cust_name作为条件和数据库里查询
</span></span><span class=line><span class=cl>if (!StringUtils.isEmpty(customer.getCust_phone())) {//校验客户电话 qbc要加% List list = criteria.add(Restrictions.like(&#34;pname&#34;, &#34;%肉%&#34;)).list();
</span></span><span class=line><span class=cl>criteria.add(Restrictions.like(&#34;cust_phone&#34;, &#34;%&#34;+customer.getCust_phone()+&#34;%&#34;));}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>if (customer.getCust_source()!=null&amp;&amp;!StringUtils.isEmpty(customer.getCust_source().getDict_id())) {//校验客户来源里的来源对象不为空并且 里面传过来参数的id值不为空 
</span></span><span class=line><span class=cl>	criteria.add(Restrictions.eq(&#34;cust_source.dict_id&#34;, customer.getCust_source().getDict_id()));}//就把参数进去 以id查询
</span></span><span class=line><span class=cl>if (customer.getCust_industry()!=null&amp;&amp;!StringUtils.isEmpty(customer.getCust_industry().getDict_id())) {//校验客户行业里的id值 
</span></span><span class=line><span class=cl>	criteria.add(Restrictions.eq(&#34;cust_industry.dict_id&#34;, customer.getCust_industry().getDict_id()));}
</span></span><span class=line><span class=cl>if (customer.getCust_level()!=null&amp;&amp;!StringUtils.isEmpty(customer.getCust_level().getDict_id())) {//校验客户级别里的id值 
</span></span><span class=line><span class=cl>	criteria.add(Restrictions.eq(&#34;cust_level.dict_id&#34;, customer.getCust_level().getDict_id()));}
</span></span><span class=line><span class=cl>//并以分页查询
</span></span><span class=line><span class=cl>PageBean&lt;Customer&gt; pageBean = customerService.findByPage(criteria , currentPage , pageSize);//查询数据业务 返回pageBean对象
</span></span><span class=line><span class=cl>System.out.println(pageBean);
</span></span><span class=line><span class=cl>ActionContext.getContext().getValueStack().push(pageBean);//3. 把pageBean存储到作用域 值栈。 push | set | 属性
</span></span><span class=line><span class=cl>return Constant.PAGE_SUCCESS;}//返回</span></span></code></pre></td></tr></table></div></div><h3 id=js-加载完就执行下拉三个方法>js 加载完就执行下拉三个方法
<a class=header-anchor href=#js-%e5%8a%a0%e8%bd%bd%e5%ae%8c%e5%b0%b1%e6%89%a7%e8%a1%8c%e4%b8%8b%e6%8b%89%e4%b8%89%e4%b8%aa%e6%96%b9%e6%b3%95></a></h3><p>执行的js的 loadDict方法</p><p>function loadDict(type_code , tagId , oldVal){//传旧的值进来</p><pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
$(function(){//加载完就 执行三个方法 下拉
		loadDict(&quot;001&quot; , &quot;#cust_industry&quot; , &quot;${cust_industry.dict_id}&quot;); //001  -- 客户行业
		loadDict(&quot;002&quot; , &quot;#cust_source&quot; , &quot;${cust_source.dict_id}&quot;); //002  -- 客户来源
		loadDict(&quot;006&quot; , &quot;#cust_level&quot; , &quot;${cust_level.dict_id}&quot;);//006  -- 客户级别
	})
	function loadDict(type_code , tagId , oldVal){//传旧的值进来回显
		//发起请求，获取字典数据 按类型查询字典数据
		var url = &quot;${pageContext.request.contextPath }/baseDict_findByType&quot;;
		$.post(url , {&quot;dict_type_code&quot; :type_code } , function(result){
			$(result).each(function(i , n){ //i : 遍历的下标，  n : 遍历出来的对象   字典对象
				$(tagId).append(&quot;&lt;option value='&quot;+n.dict_id+&quot;'&gt;&quot;+n.dict_item_name+&quot;&lt;/option&gt;&quot;)
			});
			//选中该选中的option  在指定的id标签身上找option标签， 按照value值来找，如果找到了就修改这个option标签的属性，修改selected属性，值为selected
			$(tagId).find(&quot;option[value='&quot;+oldVal+&quot;']&quot;).attr(&quot;selected&quot;,&quot;selected&quot;);
		} , &quot;json&quot;);	}
&lt;/script&gt;
</code></pre><h3 id=回显筛选的文本框用标记-下拉用上面的js>回显筛选的文本框用标记 下拉用上面的js
<a class=header-anchor href=#%e5%9b%9e%e6%98%be%e7%ad%9b%e9%80%89%e7%9a%84%e6%96%87%e6%9c%ac%e6%a1%86%e7%94%a8%e6%a0%87%e8%ae%b0-%e4%b8%8b%e6%8b%89%e7%94%a8%e4%b8%8a%e9%9d%a2%e7%9a%84js></a></h3><p>文本框回显 : 把 &lt;input 换成&lt;s:textfield 并属性值都要打双引号</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-52-1><a class=lnlinks href=#hl-52-1>1</a>
</span><span class=lnt id=hl-52-2><a class=lnlinks href=#hl-52-2>2</a>
</span><span class=lnt id=hl-52-3><a class=lnlinks href=#hl-52-3>3</a>
</span><span class=lnt id=hl-52-4><a class=lnlinks href=#hl-52-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;TD&gt;客户名称：&lt;/TD&gt;
</span></span><span class=line><span class=cl>	&lt;TD&gt;&lt;s:textfield class=&#34;textbox&#34; id=&#34;sChannel2&#34; style=&#34;WIDTH: 80px&#34; maxLength=&#34;50&#34; name=&#34;cust_name&#34; /&gt;&lt;/TD&gt;
</span></span><span class=line><span class=cl>&lt;TD&gt;客户电话：&lt;/TD&gt;
</span></span><span class=line><span class=cl>	&lt;TD&gt;&lt;s:textfield class=&#34;textbox&#34; id=&#34;sChannel2&#34; style=&#34;WIDTH: 80px&#34; maxLength=&#34;50&#34; name=&#34;cust_phone&#34; /&gt;&lt;/TD&gt;		</span></span></code></pre></td></tr></table></div></div><h3 id=信息创建人和对客户负责人>信息创建人和对客户负责人
<a class=header-anchor href=#%e4%bf%a1%e6%81%af%e5%88%9b%e5%bb%ba%e4%ba%ba%e5%92%8c%e5%af%b9%e5%ae%a2%e6%88%b7%e8%b4%9f%e8%b4%a3%e4%ba%ba></a></h3><p>list.jsp 里添加</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-53-1><a class=lnlinks href=#hl-53-1>1</a>
</span><span class=lnt id=hl-53-2><a class=lnlinks href=#hl-53-2>2</a>
</span><span class=lnt id=hl-53-3><a class=lnlinks href=#hl-53-3>3</a>
</span><span class=lnt id=hl-53-4><a class=lnlinks href=#hl-53-4>4</a>
</span><span class=lnt id=hl-53-5><a class=lnlinks href=#hl-53-5>5</a>
</span><span class=lnt id=hl-53-6><a class=lnlinks href=#hl-53-6>6</a>
</span><span class=lnt id=hl-53-7><a class=lnlinks href=#hl-53-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;TD&gt;信息创建人&lt;/TD&gt;
</span></span><span class=line><span class=cl>&lt;TD&gt;对客户负责人&lt;/TD&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;TD&gt;操作&lt;/TD&gt; &lt;!--操作的上面添加--&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;!--遍历的地方添加 并显示 --&gt;
</span></span><span class=line><span class=cl>&lt;TD&gt;${customer.cust_create_id.user_name }&lt;/TD&gt;&lt;TD&gt;${customer.cust_user_id.user_name }&lt;/TD&gt;</span></span></code></pre></td></tr></table></div></div><p>CustomerAction 里的 添加客户方法save 前先设置创建人</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-54-1><a class=lnlinks href=#hl-54-1>1</a>
</span><span class=lnt id=hl-54-2><a class=lnlinks href=#hl-54-2>2</a>
</span><span class=lnt id=hl-54-3><a class=lnlinks href=#hl-54-3>3</a>
</span><span class=lnt id=hl-54-4><a class=lnlinks href=#hl-54-4>4</a>
</span><span class=lnt id=hl-54-5><a class=lnlinks href=#hl-54-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>//设置信息创建人和客户负责人 谁负责添加的这个客户谁就是创建人和负责人
</span></span><span class=line><span class=cl>User user = (User) ServletActionContext.getRequest().getSession().getAttribute(&#34;user&#34;);//取到登陆的user
</span></span><span class=line><span class=cl>customer.setCust_create_id(user);//设置客户的创建人
</span></span><span class=line><span class=cl>customer.setCust_user_id(user);//设置对客户负责人的名字 为登陆创建的user对象
</span></span><span class=line><span class=cl>customerService.save(customer);return NONE;</span></span></code></pre></td></tr></table></div></div><p>bean包 Customer.java 创建人/负责人String更改为对象user</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-55-1><a class=lnlinks href=#hl-55-1>1</a>
</span><span class=lnt id=hl-55-2><a class=lnlinks href=#hl-55-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>private User cust_create_id;//信息创建人 改成对象类型 xml也要改
</span></span><span class=line><span class=cl>private User cust_user_id; //对客户负责人</span></span></code></pre></td></tr></table></div></div><p>Customer.hbm.xml映射关系更改</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-56-1><a class=lnlinks href=#hl-56-1>1</a>
</span><span class=lnt id=hl-56-2><a class=lnlinks href=#hl-56-2>2</a>
</span><span class=lnt id=hl-56-3><a class=lnlinks href=#hl-56-3>3</a>
</span><span class=lnt id=hl-56-4><a class=lnlinks href=#hl-56-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;!-- &lt;property name=&#34;cust_user_id&#34;/&gt;
</span></span><span class=line><span class=cl>		&lt;property name=&#34;cust_create_id&#34;/&gt; 删除其它字段和持久化类关系 改成多对一的关系 客户和用户--&gt;
</span></span><span class=line><span class=cl>		&lt;many-to-one name=&#34;cust_create_id&#34; class=&#34;com.itheima.bean.User&#34;&gt;&lt;/many-to-one&gt;
</span></span><span class=line><span class=cl>		&lt;many-to-one name=&#34;cust_user_id&#34; class=&#34;com.itheima.bean.User&#34;&gt;&lt;/many-to-one&gt;</span></span></code></pre></td></tr></table></div></div><p>添加客户提交保存 并重定向到分页查询方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-57-1><a class=lnlinks href=#hl-57-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>return Constant.SAVA_SUCCESS;</span></span></code></pre></td></tr></table></div></div><p>struts.xml 重定向到分页查询方法</p><p>jsp的请求转发(默认)dispatcher 重定向redirect</p><p>action的请求转发(默认)chain重定向redirectAction</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-58-1><a class=lnlinks href=#hl-58-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;result name=&#34;save_success&#34; type=&#34;redirectAction&#34;&gt;customer_findByPage&lt;/result&gt;</span></span></code></pre></td></tr></table></div></div><h2 id=删除>删除
<a class=header-anchor href=#%e5%88%a0%e9%99%a4></a></h2><p>list.jsp 链接到执行js代码 传id过去</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-59-1><a class=lnlinks href=#hl-59-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;a href=&#34;javascript:del(${customer.cust_id})&#34;&gt;删除&lt;/a&gt;</span></span></code></pre></td></tr></table></div></div><p>js 到delete方法传id过去</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-60-1><a class=lnlinks href=#hl-60-1>1</a>
</span><span class=lnt id=hl-60-2><a class=lnlinks href=#hl-60-2>2</a>
</span><span class=lnt id=hl-60-3><a class=lnlinks href=#hl-60-3>3</a>
</span><span class=lnt id=hl-60-4><a class=lnlinks href=#hl-60-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>function</span> <span class=n>del</span><span class=p>(</span><span class=n>id</span><span class=p>){</span><span class=o>//</span><span class=err>删除方法</span>
</span></span><span class=line><span class=cl>		<span class=k>var</span> <span class=n>flag</span><span class=o>=</span><span class=n>confirm</span><span class=p>(</span><span class=s2>&#34;确定删除这个客户吗&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>flag</span><span class=p>)</span> <span class=p>{</span><span class=o>//</span><span class=err>确定就跳转</span>
</span></span><span class=line><span class=cl>		<span class=n>location</span><span class=o>.</span><span class=n>href</span><span class=o>=</span><span class=s2>&#34;${pageContext.request.contextPath }/customer_delete?cust_id=&#34;</span><span class=o>+</span><span class=n>id</span><span class=p>;</span>	<span class=p>}</span>	<span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>CustomerAction.java建delete方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-61-1><a class=lnlinks href=#hl-61-1>1</a>
</span><span class=lnt id=hl-61-2><a class=lnlinks href=#hl-61-2>2</a>
</span><span class=lnt id=hl-61-3><a class=lnlinks href=#hl-61-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public String delete() {//删除客户的方法 传对象
</span></span><span class=line><span class=cl>	customerService.delete(customer);
</span></span><span class=line><span class=cl>	return Constant.DELETE_SUCCESS;}</span></span></code></pre></td></tr></table></div></div><p>CustomerService接口<code>void delete(Customer customer);</code></p><p>CustomerServiceImpl <code>public void delete(Customer customer) {</code>
<code>customerDao.delete(customer);}</code></p><p>CustomerDao接口 <code>void delete(Customer customer);</code></p><p>CustomerDaoImpl实现<code>public void delete(Customer customer) {getHibernateTemplate().delete(customer); }</code></p><p>struts.xml 重定向到方法</p><p><code>&lt;result name="delete_success" type="redirectAction">customer_findByPage&lt;/result></code></p><h2 id=修改>修改
<a class=header-anchor href=#%e4%bf%ae%e6%94%b9></a></h2><h3 id=listjsp-传参数过去到edit方法>list.jsp 传参数过去到edit方法
<a class=header-anchor href=#listjsp-%e4%bc%a0%e5%8f%82%e6%95%b0%e8%bf%87%e5%8e%bb%e5%88%b0edit%e6%96%b9%e6%b3%95></a></h3><p><code>&lt;a href="${pageContext.request.contextPath }/customer_edit?cust_id=${customer.cust_id}">修改&lt;/a></code></p><h3 id=customeractionjava第一步先根据id查询客户对象存值栈-跳转到修改页面>CustomerAction.java第一步先根据id查询客户对象存值栈 跳转到修改页面
<a class=header-anchor href=#customeractionjava%e7%ac%ac%e4%b8%80%e6%ad%a5%e5%85%88%e6%a0%b9%e6%8d%aeid%e6%9f%a5%e8%af%a2%e5%ae%a2%e6%88%b7%e5%af%b9%e8%b1%a1%e5%ad%98%e5%80%bc%e6%a0%88-%e8%b7%b3%e8%bd%ac%e5%88%b0%e4%bf%ae%e6%94%b9%e9%a1%b5%e9%9d%a2></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-62-1><a class=lnlinks href=#hl-62-1>1</a>
</span><span class=lnt id=hl-62-2><a class=lnlinks href=#hl-62-2>2</a>
</span><span class=lnt id=hl-62-3><a class=lnlinks href=#hl-62-3>3</a>
</span><span class=lnt id=hl-62-4><a class=lnlinks href=#hl-62-4>4</a>
</span><span class=lnt id=hl-62-5><a class=lnlinks href=#hl-62-5>5</a>
</span><span class=lnt id=hl-62-6><a class=lnlinks href=#hl-62-6>6</a>
</span><span class=lnt id=hl-62-7><a class=lnlinks href=#hl-62-7>7</a>
</span><span class=lnt id=hl-62-8><a class=lnlinks href=#hl-62-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>private Customer editCustomer;//属性方法存值栈 声明findById查询出来客户的customer 的变量
</span></span><span class=line><span class=cl>public Customer getEditCustomer() {//提供get方法
</span></span><span class=line><span class=cl>	return editCustomer;}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>public String edit() {//修改客户的方法 第一步先根据id查询客户对象数据跳转到修改页面
</span></span><span class=line><span class=cl>	editCustomer = customerService.findById(customer.getCust_id());
</span></span><span class=line><span class=cl>	//以属性方法存值栈 把editCustomer成全局变量提供get方法就存到值栈了
</span></span><span class=line><span class=cl>	return Constant.EDIT_SUCCESS;}//跳转</span></span></code></pre></td></tr></table></div></div><p>CustomerService接口<code>Customer findById(Long cust_id);</code></p><p>CustomerServiceImpl <code>public Customer findById(Long cust_id) {return customerDao.findById(cust_id);}</code></p><p>CustomerDao接口 <code>Customer findById(Long cust_id);</code></p><p>CustomerDaoImpl实现<code>public Customer findById(Long cust_id) { return getHibernateTemplate().get(Customer.class, cust_id);}</code></p><h3 id=strutsxml--转到edit页面>struts.xml 转到edit页面
<a class=header-anchor href=#strutsxml--%e8%bd%ac%e5%88%b0edit%e9%a1%b5%e9%9d%a2></a></h3><p><code>&lt;result name="edit_success">/jsp/customer/edit.jsp&lt;/result></code></p><h3 id=关闭懒加载才能进入editjsp-customerhbmxml>关闭懒加载才能进入edit.jsp Customer.hbm.xml
<a class=header-anchor href=#%e5%85%b3%e9%97%ad%e6%87%92%e5%8a%a0%e8%bd%bd%e6%89%8d%e8%83%bd%e8%bf%9b%e5%85%a5editjsp-customerhbmxml></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-63-1><a class=lnlinks href=#hl-63-1>1</a>
</span><span class=lnt id=hl-63-2><a class=lnlinks href=#hl-63-2>2</a>
</span><span class=lnt id=hl-63-3><a class=lnlinks href=#hl-63-3>3</a>
</span><span class=lnt id=hl-63-4><a class=lnlinks href=#hl-63-4>4</a>
</span><span class=lnt id=hl-63-5><a class=lnlinks href=#hl-63-5>5</a>
</span><span class=lnt id=hl-63-6><a class=lnlinks href=#hl-63-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;many-to-one lazy=&#34;false&#34; name=&#34;cust_create_id&#34; class=&#34;com.itheima.bean.User&#34;&gt;&lt;/many-to-one&gt;
</span></span><span class=line><span class=cl>&lt;many-to-one lazy=&#34;false&#34; name=&#34;cust_user_id&#34; class=&#34;com.itheima.bean.User&#34;&gt;&lt;/many-to-one&gt;
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>&lt;many-to-one lazy=&#34;false&#34; name=&#34;cust_source&#34; class=&#34;com.itheima.bean.BaseDict&#34;/&gt;
</span></span><span class=line><span class=cl>&lt;many-to-one lazy=&#34;false&#34; name=&#34;cust_industry&#34; class=&#34;com.itheima.bean.BaseDict&#34;/&gt;
</span></span><span class=line><span class=cl>&lt;many-to-one lazy=&#34;false&#34; name=&#34;cust_level&#34; class=&#34;com.itheima.bean.BaseDict&#34;/&gt;</span></span></code></pre></td></tr></table></div></div><p>或者在请求的时候就带 .action</p><p><code>&lt;a href="${pageContext.request.contextPath }/customer_edit.action?cust_id=${customer.cust_id}">修改&lt;/a></code></p><h3 id=回显到-editjsp--修改成-值栈里对应的value>回显到 edit.jsp 修改成 值栈里对应的value
<a class=header-anchor href=#%e5%9b%9e%e6%98%be%e5%88%b0-editjsp--%e4%bf%ae%e6%94%b9%e6%88%90-%e5%80%bc%e6%a0%88%e9%87%8c%e5%af%b9%e5%ba%94%e7%9a%84value></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-64-1><a class=lnlinks href=#hl-64-1> 1</a>
</span><span class=lnt id=hl-64-2><a class=lnlinks href=#hl-64-2> 2</a>
</span><span class=lnt id=hl-64-3><a class=lnlinks href=#hl-64-3> 3</a>
</span><span class=lnt id=hl-64-4><a class=lnlinks href=#hl-64-4> 4</a>
</span><span class=lnt id=hl-64-5><a class=lnlinks href=#hl-64-5> 5</a>
</span><span class=lnt id=hl-64-6><a class=lnlinks href=#hl-64-6> 6</a>
</span><span class=lnt id=hl-64-7><a class=lnlinks href=#hl-64-7> 7</a>
</span><span class=lnt id=hl-64-8><a class=lnlinks href=#hl-64-8> 8</a>
</span><span class=lnt id=hl-64-9><a class=lnlinks href=#hl-64-9> 9</a>
</span><span class=lnt id=hl-64-10><a class=lnlinks href=#hl-64-10>10</a>
</span><span class=lnt id=hl-64-11><a class=lnlinks href=#hl-64-11>11</a>
</span><span class=lnt id=hl-64-12><a class=lnlinks href=#hl-64-12>12</a>
</span><span class=lnt id=hl-64-13><a class=lnlinks href=#hl-64-13>13</a>
</span><span class=lnt id=hl-64-14><a class=lnlinks href=#hl-64-14>14</a>
</span><span class=lnt id=hl-64-15><a class=lnlinks href=#hl-64-15>15</a>
</span><span class=lnt id=hl-64-16><a class=lnlinks href=#hl-64-16>16</a>
</span><span class=lnt id=hl-64-17><a class=lnlinks href=#hl-64-17>17</a>
</span><span class=lnt id=hl-64-18><a class=lnlinks href=#hl-64-18>18</a>
</span><span class=lnt id=hl-64-19><a class=lnlinks href=#hl-64-19>19</a>
</span><span class=lnt id=hl-64-20><a class=lnlinks href=#hl-64-20>20</a>
</span><span class=lnt id=hl-64-21><a class=lnlinks href=#hl-64-21>21</a>
</span><span class=lnt id=hl-64-22><a class=lnlinks href=#hl-64-22>22</a>
</span><span class=lnt id=hl-64-23><a class=lnlinks href=#hl-64-23>23</a>
</span><span class=lnt id=hl-64-24><a class=lnlinks href=#hl-64-24>24</a>
</span><span class=lnt id=hl-64-25><a class=lnlinks href=#hl-64-25>25</a>
</span><span class=lnt id=hl-64-26><a class=lnlinks href=#hl-64-26>26</a>
</span><span class=lnt id=hl-64-27><a class=lnlinks href=#hl-64-27>27</a>
</span><span class=lnt id=hl-64-28><a class=lnlinks href=#hl-64-28>28</a>
</span><span class=lnt id=hl-64-29><a class=lnlinks href=#hl-64-29>29</a>
</span><span class=lnt id=hl-64-30><a class=lnlinks href=#hl-64-30>30</a>
</span><span class=lnt id=hl-64-31><a class=lnlinks href=#hl-64-31>31</a>
</span><span class=lnt id=hl-64-32><a class=lnlinks href=#hl-64-32>32</a>
</span><span class=lnt id=hl-64-33><a class=lnlinks href=#hl-64-33>33</a>
</span><span class=lnt id=hl-64-34><a class=lnlinks href=#hl-64-34>34</a>
</span><span class=lnt id=hl-64-35><a class=lnlinks href=#hl-64-35>35</a>
</span><span class=lnt id=hl-64-36><a class=lnlinks href=#hl-64-36>36</a>
</span><span class=lnt id=hl-64-37><a class=lnlinks href=#hl-64-37>37</a>
</span><span class=lnt id=hl-64-38><a class=lnlinks href=#hl-64-38>38</a>
</span><span class=lnt id=hl-64-39><a class=lnlinks href=#hl-64-39>39</a>
</span><span class=lnt id=hl-64-40><a class=lnlinks href=#hl-64-40>40</a>
</span><span class=lnt id=hl-64-41><a class=lnlinks href=#hl-64-41>41</a>
</span><span class=lnt id=hl-64-42><a class=lnlinks href=#hl-64-42>42</a>
</span><span class=lnt id=hl-64-43><a class=lnlinks href=#hl-64-43>43</a>
</span><span class=lnt id=hl-64-44><a class=lnlinks href=#hl-64-44>44</a>
</span><span class=lnt id=hl-64-45><a class=lnlinks href=#hl-64-45>45</a>
</span><span class=lnt id=hl-64-46><a class=lnlinks href=#hl-64-46>46</a>
</span><span class=lnt id=hl-64-47><a class=lnlinks href=#hl-64-47>47</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;!-- 修改的id的隐藏域  --&gt;
</span></span><span class=line><span class=cl>		&lt;input type=&#34;hidden&#34; name=&#34;cust_id&#34; value=&#34;${editCustomer.cust_id}&#34;&gt;
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>&lt;!-- 要修改表单项目也 修改成值栈里的 --&gt;
</span></span><span class=line><span class=cl>&lt;TABLE cellSpacing=0 cellPadding=5  border=0&gt;
</span></span><span class=line><span class=cl>	&lt;TR&gt;
</span></span><span class=line><span class=cl>		&lt;td&gt;客户名称：&lt;/td&gt;
</span></span><span class=line><span class=cl>		&lt;td&gt;
</span></span><span class=line><span class=cl>			&lt;INPUT class=textbox id=sChannel2 style=&#34;WIDTH: 180px&#34; maxLength=50 name=&#34;cust_name&#34; value=&#34;${editCustomer.cust_name}&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;所属行业 ：&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>		&lt;select name=&#34;cust_industry.dict_id&#34; class=textbox id=&#34;cust_industry&#34; style=&#34;WIDTH: 180px;;height:21px&#34;&gt;
</span></span><span class=line><span class=cl>			&lt;option value=&#34;non&#34;&gt;---请选择---&lt;/option&gt;
</span></span><span class=line><span class=cl>		&lt;/select&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>&lt;/TR&gt;							
</span></span><span class=line><span class=cl>&lt;TR&gt;	
</span></span><span class=line><span class=cl>	&lt;td&gt;信息来源 ：&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>		&lt;select name=&#34;cust_source.dict_id&#34; class=textbox id=&#34;cust_source&#34; style=&#34;WIDTH: 180px;;height:21px&#34;&gt;
</span></span><span class=line><span class=cl>			&lt;option value=&#34;non&#34;&gt;---请选择---&lt;/option&gt;
</span></span><span class=line><span class=cl>		&lt;/select&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;客户级别：&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>		&lt;select name=&#34;cust_level.dict_id&#34; class=textbox id=&#34;cust_level&#34; style=&#34;WIDTH: 180px;;height:21px&#34;&gt;
</span></span><span class=line><span class=cl>			&lt;option value=&#34;non&#34;&gt;---请选择---&lt;/option&gt;
</span></span><span class=line><span class=cl>		&lt;/select&gt;								
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>&lt;/TR&gt;
</span></span><span class=line><span class=cl>&lt;TR&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;联系地址 ：&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>		&lt;INPUT class=textbox id=sChannel2 style=&#34;WIDTH: 180px&#34; maxLength=50 name=&#34;cust_address&#34; value=&#34;${editCustomer.cust_address}&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;联系电话 ：&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>		&lt;INPUT class=textbox id=sChannel2 style=&#34;WIDTH: 180px&#34; maxLength=50 name=&#34;cust_phone&#34; value=&#34;${editCustomer.cust_phone}&#34;&gt;
</span></span><span class=line><span class=cl>		&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;/TR&gt;
</span></span><span class=line><span class=cl>	&lt;tr&gt;
</span></span><span class=line><span class=cl>		&lt;td rowspan=2&gt;
</span></span><span class=line><span class=cl>			&lt;INPUT class=button id=sButton2 type=submit value=&#34; 保存 &#34; name=sButton2&gt;
</span></span><span class=line><span class=cl>		&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;/tr&gt;
</span></span><span class=line><span class=cl>&lt;/TABLE&gt;</span></span></code></pre></td></tr></table></div></div><h3 id=js-设置下拉的回显>js 设置下拉的回显
<a class=header-anchor href=#js-%e8%ae%be%e7%bd%ae%e4%b8%8b%e6%8b%89%e7%9a%84%e5%9b%9e%e6%98%be></a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-65-1><a class=lnlinks href=#hl-65-1> 1</a>
</span><span class=lnt id=hl-65-2><a class=lnlinks href=#hl-65-2> 2</a>
</span><span class=lnt id=hl-65-3><a class=lnlinks href=#hl-65-3> 3</a>
</span><span class=lnt id=hl-65-4><a class=lnlinks href=#hl-65-4> 4</a>
</span><span class=lnt id=hl-65-5><a class=lnlinks href=#hl-65-5> 5</a>
</span><span class=lnt id=hl-65-6><a class=lnlinks href=#hl-65-6> 6</a>
</span><span class=lnt id=hl-65-7><a class=lnlinks href=#hl-65-7> 7</a>
</span><span class=lnt id=hl-65-8><a class=lnlinks href=#hl-65-8> 8</a>
</span><span class=lnt id=hl-65-9><a class=lnlinks href=#hl-65-9> 9</a>
</span><span class=lnt id=hl-65-10><a class=lnlinks href=#hl-65-10>10</a>
</span><span class=lnt id=hl-65-11><a class=lnlinks href=#hl-65-11>11</a>
</span><span class=lnt id=hl-65-12><a class=lnlinks href=#hl-65-12>12</a>
</span><span class=lnt id=hl-65-13><a class=lnlinks href=#hl-65-13>13</a>
</span><span class=lnt id=hl-65-14><a class=lnlinks href=#hl-65-14>14</a>
</span><span class=lnt id=hl-65-15><a class=lnlinks href=#hl-65-15>15</a>
</span><span class=lnt id=hl-65-16><a class=lnlinks href=#hl-65-16>16</a>
</span><span class=lnt id=hl-65-17><a class=lnlinks href=#hl-65-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>SCRIPT</span> <span class=n>language</span><span class=o>=</span><span class=n>javascript</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>		<span class=o>$</span><span class=p>(</span><span class=n>function</span><span class=p>(){</span><span class=o>//</span><span class=err>加载完就</span> <span class=err>执行三个方法</span> <span class=err>下拉</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;001&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_industry&#34;</span> <span class=p>,</span> <span class=s2>&#34;${editCustomer.cust_industry.dict_id}&#34;</span><span class=p>);</span> <span class=o>//</span><span class=mi>001</span>  <span class=o>--</span> <span class=err>客户行业</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;002&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_source&#34;</span> <span class=p>,</span> <span class=s2>&#34;${editCustomer.cust_source.dict_id}&#34;</span><span class=p>);</span> <span class=o>//</span><span class=mi>002</span>  <span class=o>--</span> <span class=err>客户来源</span>
</span></span><span class=line><span class=cl>		<span class=n>loadDict</span><span class=p>(</span><span class=s2>&#34;006&#34;</span> <span class=p>,</span> <span class=s2>&#34;#cust_level&#34;</span> <span class=p>,</span> <span class=s2>&#34;${editCustomer.cust_level.dict_id}&#34;</span><span class=p>);</span><span class=o>//</span><span class=mi>006</span>  <span class=o>--</span> <span class=err>客户级别</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl>	<span class=n>function</span> <span class=n>loadDict</span><span class=p>(</span><span class=n>type_code</span> <span class=p>,</span> <span class=n>tagId</span> <span class=p>,</span> <span class=n>oldVal</span><span class=p>){</span><span class=o>//</span><span class=err>传旧的值进来回显</span>
</span></span><span class=line><span class=cl>		<span class=o>//</span><span class=err>发起请求，获取字典数据</span> <span class=err>按类型查询字典数据</span>
</span></span><span class=line><span class=cl>		<span class=k>var</span> <span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;${pageContext.request.contextPath }/baseDict_findByType&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=o>$.</span><span class=n>post</span><span class=p>(</span><span class=n>url</span> <span class=p>,</span> <span class=p>{</span><span class=s2>&#34;dict_type_code&#34;</span> <span class=p>:</span><span class=n>type_code</span> <span class=p>}</span> <span class=p>,</span> <span class=n>function</span><span class=p>(</span><span class=n>result</span><span class=p>){</span>
</span></span><span class=line><span class=cl>			<span class=o>$</span><span class=p>(</span><span class=n>result</span><span class=p>)</span><span class=o>.</span><span class=n>each</span><span class=p>(</span><span class=n>function</span><span class=p>(</span><span class=n>i</span> <span class=p>,</span> <span class=n>n</span><span class=p>){</span> <span class=o>//</span><span class=n>i</span> <span class=p>:</span> <span class=err>遍历的下标，</span>  <span class=n>n</span> <span class=p>:</span> <span class=err>遍历出来的对象</span>   <span class=err>字典对象</span>
</span></span><span class=line><span class=cl>				<span class=o>$</span><span class=p>(</span><span class=n>tagId</span><span class=p>)</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;&lt;option value=&#39;&#34;</span><span class=o>+</span><span class=n>n</span><span class=o>.</span><span class=n>dict_id</span><span class=o>+</span><span class=s2>&#34;&#39;&gt;&#34;</span><span class=o>+</span><span class=n>n</span><span class=o>.</span><span class=n>dict_item_name</span><span class=o>+</span><span class=s2>&#34;&lt;/option&gt;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>});</span>
</span></span><span class=line><span class=cl>			<span class=o>//</span><span class=err>选中该选中的</span><span class=n>option</span>  <span class=err>在指定的</span><span class=n>id标签身上找option标签</span><span class=err>，</span> <span class=err>按照</span><span class=n>value值来找</span><span class=err>，如果找到了就修改这个</span><span class=n>option标签的属性</span><span class=err>，修改</span><span class=n>selected属性</span><span class=err>，值为</span><span class=n>selected</span>
</span></span><span class=line><span class=cl>			<span class=o>$</span><span class=p>(</span><span class=n>tagId</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;option[value=&#39;&#34;</span><span class=o>+</span><span class=n>oldVal</span><span class=o>+</span><span class=s2>&#34;&#39;]&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>attr</span><span class=p>(</span><span class=s2>&#34;selected&#34;</span><span class=p>,</span><span class=s2>&#34;selected&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span> <span class=p>,</span> <span class=s2>&#34;json&#34;</span><span class=p>);</span>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>SCRIPT</span><span class=o>&gt;</span></span></span></code></pre></td></tr></table></div></div><h3 id=保存>保存
<a class=header-anchor href=#%e4%bf%9d%e5%ad%98></a></h3><p>edit.jsp</p><p><code>&lt;FORM id=form1 name=form1 action="${pageContext.request.contextPath }/customer_update" method=post></code></p><p>CustomerAction建update方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-66-1><a class=lnlinks href=#hl-66-1>1</a>
</span><span class=lnt id=hl-66-2><a class=lnlinks href=#hl-66-2>2</a>
</span><span class=lnt id=hl-66-3><a class=lnlinks href=#hl-66-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>public String update() {//修改客户并保存的方法 修改客户第二步
</span></span><span class=line><span class=cl>		customerService.update(customer);
</span></span><span class=line><span class=cl>		return Constant.UPDATE_SUCCESS;}//跳转</span></span></code></pre></td></tr></table></div></div><p>CustomerService接口<code>void update(Customer customer);</code></p><p>CustomerServiceImpl <code>public void update(Customer customer) {</code>
<code>customerDao.update(customer);}</code></p><p>CustomerDao接口 <code>void update(Customer customer);</code></p><p>CustomerDaoImpl实现<code>public void update(Customer customer) {getHibernateTemplate().update(customer); }</code></p><p>struts.xml 重定向到方法</p><p><code>&lt;result name="update_success" type="redirectAction">customer_findByPage&lt;/result></code></p><p>信息创建人和对客户负责人被修改成空了 要在edit.jsp加两个隐藏域</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-67-1><a class=lnlinks href=#hl-67-1>1</a>
</span><span class=lnt id=hl-67-2><a class=lnlinks href=#hl-67-2>2</a>
</span><span class=lnt id=hl-67-3><a class=lnlinks href=#hl-67-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;!-- 信息创建人和对客户负责人的隐藏域  value还是之前的 查出来要被修改对象里面的 对客户负责人里的用户帐号--&gt;
</span></span><span class=line><span class=cl>		&lt;input type=&#34;hidden&#34; name=&#34;cust_user_id.user_id&#34; value=&#34;${editCustomer.cust_user_id.user_id}&#34;&gt;
</span></span><span class=line><span class=cl>		&lt;input type=&#34;hidden&#34; name=&#34;cust_create_id.user_id&#34; value=&#34;${editCustomer.cust_create_id.user_id}&#34;&gt;</span></span></code></pre></td></tr></table></div></div><h3 id=客户图片回显>客户图片回显
<a class=header-anchor href=#%e5%ae%a2%e6%88%b7%e5%9b%be%e7%89%87%e5%9b%9e%e6%98%be></a></h3><p>Customer.java bean包下的加一个图片字段 image 配置映射</p><p><code>private String cust_image;</code></p><p>Customer.hbm.xml<code>&lt;property name="cust_image"/></code></p><p>edit.jsp 联系电话下面 添加位置显示图片</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-68-1><a class=lnlinks href=#hl-68-1>1</a>
</span><span class=lnt id=hl-68-2><a class=lnlinks href=#hl-68-2>2</a>
</span><span class=lnt id=hl-68-3><a class=lnlinks href=#hl-68-3>3</a>
</span><span class=lnt id=hl-68-4><a class=lnlinks href=#hl-68-4>4</a>
</span><span class=lnt id=hl-68-5><a class=lnlinks href=#hl-68-5>5</a>
</span><span class=lnt id=hl-68-6><a class=lnlinks href=#hl-68-6>6</a>
</span><span class=lnt id=hl-68-7><a class=lnlinks href=#hl-68-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;tr&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;客户资质 ：&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;td&gt;
</span></span><span class=line><span class=cl>		&lt;img src=&#34;${pageContext.request.contextPath }/${editCustomer.cust_image}&#34; /&gt;
</span></span><span class=line><span class=cl>		&lt;input type=&#34;file&#34; value=&#34;&#34;&gt;
</span></span><span class=line><span class=cl>	&lt;/td&gt;
</span></span><span class=line><span class=cl>	&lt;/tr&gt;</span></span></code></pre></td></tr></table></div></div><p>在增加客户保存之前 把图片地址设置进去</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-69-1><a class=lnlinks href=#hl-69-1> 1</a>
</span><span class=lnt id=hl-69-2><a class=lnlinks href=#hl-69-2> 2</a>
</span><span class=lnt id=hl-69-3><a class=lnlinks href=#hl-69-3> 3</a>
</span><span class=lnt id=hl-69-4><a class=lnlinks href=#hl-69-4> 4</a>
</span><span class=lnt id=hl-69-5><a class=lnlinks href=#hl-69-5> 5</a>
</span><span class=lnt id=hl-69-6><a class=lnlinks href=#hl-69-6> 6</a>
</span><span class=lnt id=hl-69-7><a class=lnlinks href=#hl-69-7> 7</a>
</span><span class=lnt id=hl-69-8><a class=lnlinks href=#hl-69-8> 8</a>
</span><span class=lnt id=hl-69-9><a class=lnlinks href=#hl-69-9> 9</a>
</span><span class=lnt id=hl-69-10><a class=lnlinks href=#hl-69-10>10</a>
</span><span class=lnt id=hl-69-11><a class=lnlinks href=#hl-69-11>11</a>
</span><span class=lnt id=hl-69-12><a class=lnlinks href=#hl-69-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span><span class=err>存储图片</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>upload</span> <span class=o>!=</span> <span class=n>null</span><span class=p>){</span>
</span></span><span class=line><span class=cl>	<span class=o>//</span><span class=err>存储文件</span> <span class=n>tmp</span><span class=o>---</span><span class=n>jpg</span> <span class=o>|</span> <span class=n>png</span>
</span></span><span class=line><span class=cl><span class=ne>String</span> <span class=n>fileName</span>  <span class=o>=</span> <span class=n>MyFileUtil</span><span class=o>.</span><span class=n>getFileName</span><span class=p>(</span><span class=n>uploadFileName</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=ne>File</span> <span class=n>file</span>  <span class=o>=</span> <span class=n>new</span> <span class=ne>File</span><span class=p>(</span><span class=s2>&#34;D:/heima28/img&#34;</span> <span class=p>,</span> <span class=n>fileName</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>FileUtils</span><span class=o>.</span><span class=n>copyFile</span><span class=p>(</span><span class=n>upload</span><span class=p>,</span> <span class=n>file</span><span class=p>);</span>	
</span></span><span class=line><span class=cl><span class=o>//</span><span class=err>数据库里存放地址设置</span> 
</span></span><span class=line><span class=cl><span class=n>customer</span><span class=o>.</span><span class=n>setCust_image</span><span class=p>(</span><span class=s2>&#34;img/&#34;</span><span class=o>+</span><span class=n>fileName</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>		
</span></span><span class=line><span class=cl><span class=n>customerService</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>customer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>Constant</span><span class=o>.</span><span class=n>SAVA_SUCCESS</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>改tomcat配置文件 Servers里面 Tomcat v7.0 Server at localhost-config 配server.xml 真实路径和 项目名虚拟路径</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-70-1><a class=lnlinks href=#hl-70-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;Context docBase=&#34;D:/heima28/img&#34; path=&#34;/crm28_522/img&#34;/&gt;</span></span></code></pre></td></tr></table></div></div><h2 id=联系人>联系人
<a class=header-anchor href=#%e8%81%94%e7%b3%bb%e4%ba%ba></a></h2><h2 id=客户拜访>客户拜访
<a class=header-anchor href=#%e5%ae%a2%e6%88%b7%e6%8b%9c%e8%ae%bf></a></h2><p>客户拜访时间日期格式问题:</p><p>方式1 转发器utils +xwork-conversion.properties配置<td>${visit.vist_time}</p><p>方式2 标签库</p><h2 id=basedao抽取>BaseDao抽取
<a class=header-anchor href=#basedao%e6%8a%bd%e5%8f%96></a></h2><p>联系人和客户 LinkManDaoImpl和CustomerDaoImpl几乎一样</p><p>BaseDao.java</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-71-1><a class=lnlinks href=#hl-71-1> 1</a>
</span><span class=lnt id=hl-71-2><a class=lnlinks href=#hl-71-2> 2</a>
</span><span class=lnt id=hl-71-3><a class=lnlinks href=#hl-71-3> 3</a>
</span><span class=lnt id=hl-71-4><a class=lnlinks href=#hl-71-4> 4</a>
</span><span class=lnt id=hl-71-5><a class=lnlinks href=#hl-71-5> 5</a>
</span><span class=lnt id=hl-71-6><a class=lnlinks href=#hl-71-6> 6</a>
</span><span class=lnt id=hl-71-7><a class=lnlinks href=#hl-71-7> 7</a>
</span><span class=lnt id=hl-71-8><a class=lnlinks href=#hl-71-8> 8</a>
</span><span class=lnt id=hl-71-9><a class=lnlinks href=#hl-71-9> 9</a>
</span><span class=lnt id=hl-71-10><a class=lnlinks href=#hl-71-10>10</a>
</span><span class=lnt id=hl-71-11><a class=lnlinks href=#hl-71-11>11</a>
</span><span class=lnt id=hl-71-12><a class=lnlinks href=#hl-71-12>12</a>
</span><span class=lnt id=hl-71-13><a class=lnlinks href=#hl-71-13>13</a>
</span><span class=lnt id=hl-71-14><a class=lnlinks href=#hl-71-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=nx>com</span><span class=p>.</span><span class=nx>itheima</span><span class=p>.</span><span class=nx>dao</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nx>java</span><span class=p>.</span><span class=nx>io</span><span class=p>.</span><span class=nx>Serializable</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nx>java</span><span class=p>.</span><span class=nx>util</span><span class=p>.</span><span class=nx>List</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nx>org</span><span class=p>.</span><span class=nx>hibernate</span><span class=p>.</span><span class=nx>criterion</span><span class=p>.</span><span class=nx>DetachedCriteria</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nx>com</span><span class=p>.</span><span class=nx>itheima</span><span class=p>.</span><span class=nx>bean</span><span class=p>.</span><span class=nx>Customer</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nx>public</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>BaseDao</span><span class=p>&lt;</span><span class=nx>T</span><span class=p>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>void</span><span class=w> </span><span class=nf>save</span><span class=p>(</span><span class=nx>T</span><span class=w> </span><span class=nx>t</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>void</span><span class=w> </span><span class=nb>delete</span><span class=p>(</span><span class=nx>T</span><span class=w> </span><span class=nx>t</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>void</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=nx>T</span><span class=w> </span><span class=nx>t</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>T</span><span class=w> </span><span class=nf>findById</span><span class=p>(</span><span class=nx>Serializable</span><span class=w> </span><span class=nx>id</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>List</span><span class=p>&lt;</span><span class=nx>T</span><span class=p>&gt;</span><span class=w> </span><span class=nf>findAll</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>List</span><span class=p>&lt;</span><span class=nx>T</span><span class=p>&gt;</span><span class=w> </span><span class=nf>findByPage</span><span class=p>(</span><span class=nx>DetachedCriteria</span><span class=w> </span><span class=nx>criteria</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nx>currentPage</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nx>pageSize</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=kt>int</span><span class=w> </span><span class=nf>findCount</span><span class=p>(</span><span class=nx>DetachedCriteria</span><span class=w> </span><span class=nx>criteria</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>BaseDaoImpl.java</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-72-1><a class=lnlinks href=#hl-72-1> 1</a>
</span><span class=lnt id=hl-72-2><a class=lnlinks href=#hl-72-2> 2</a>
</span><span class=lnt id=hl-72-3><a class=lnlinks href=#hl-72-3> 3</a>
</span><span class=lnt id=hl-72-4><a class=lnlinks href=#hl-72-4> 4</a>
</span><span class=lnt id=hl-72-5><a class=lnlinks href=#hl-72-5> 5</a>
</span><span class=lnt id=hl-72-6><a class=lnlinks href=#hl-72-6> 6</a>
</span><span class=lnt id=hl-72-7><a class=lnlinks href=#hl-72-7> 7</a>
</span><span class=lnt id=hl-72-8><a class=lnlinks href=#hl-72-8> 8</a>
</span><span class=lnt id=hl-72-9><a class=lnlinks href=#hl-72-9> 9</a>
</span><span class=lnt id=hl-72-10><a class=lnlinks href=#hl-72-10>10</a>
</span><span class=lnt id=hl-72-11><a class=lnlinks href=#hl-72-11>11</a>
</span><span class=lnt id=hl-72-12><a class=lnlinks href=#hl-72-12>12</a>
</span><span class=lnt id=hl-72-13><a class=lnlinks href=#hl-72-13>13</a>
</span><span class=lnt id=hl-72-14><a class=lnlinks href=#hl-72-14>14</a>
</span><span class=lnt id=hl-72-15><a class=lnlinks href=#hl-72-15>15</a>
</span><span class=lnt id=hl-72-16><a class=lnlinks href=#hl-72-16>16</a>
</span><span class=lnt id=hl-72-17><a class=lnlinks href=#hl-72-17>17</a>
</span><span class=lnt id=hl-72-18><a class=lnlinks href=#hl-72-18>18</a>
</span><span class=lnt id=hl-72-19><a class=lnlinks href=#hl-72-19>19</a>
</span><span class=lnt id=hl-72-20><a class=lnlinks href=#hl-72-20>20</a>
</span><span class=lnt id=hl-72-21><a class=lnlinks href=#hl-72-21>21</a>
</span><span class=lnt id=hl-72-22><a class=lnlinks href=#hl-72-22>22</a>
</span><span class=lnt id=hl-72-23><a class=lnlinks href=#hl-72-23>23</a>
</span><span class=lnt id=hl-72-24><a class=lnlinks href=#hl-72-24>24</a>
</span><span class=lnt id=hl-72-25><a class=lnlinks href=#hl-72-25>25</a>
</span><span class=lnt id=hl-72-26><a class=lnlinks href=#hl-72-26>26</a>
</span><span class=lnt id=hl-72-27><a class=lnlinks href=#hl-72-27>27</a>
</span><span class=lnt id=hl-72-28><a class=lnlinks href=#hl-72-28>28</a>
</span><span class=lnt id=hl-72-29><a class=lnlinks href=#hl-72-29>29</a>
</span><span class=lnt id=hl-72-30><a class=lnlinks href=#hl-72-30>30</a>
</span><span class=lnt id=hl-72-31><a class=lnlinks href=#hl-72-31>31</a>
</span><span class=lnt id=hl-72-32><a class=lnlinks href=#hl-72-32>32</a>
</span><span class=lnt id=hl-72-33><a class=lnlinks href=#hl-72-33>33</a>
</span><span class=lnt id=hl-72-34><a class=lnlinks href=#hl-72-34>34</a>
</span><span class=lnt id=hl-72-35><a class=lnlinks href=#hl-72-35>35</a>
</span><span class=lnt id=hl-72-36><a class=lnlinks href=#hl-72-36>36</a>
</span><span class=lnt id=hl-72-37><a class=lnlinks href=#hl-72-37>37</a>
</span><span class=lnt id=hl-72-38><a class=lnlinks href=#hl-72-38>38</a>
</span><span class=lnt id=hl-72-39><a class=lnlinks href=#hl-72-39>39</a>
</span><span class=lnt id=hl-72-40><a class=lnlinks href=#hl-72-40>40</a>
</span><span class=lnt id=hl-72-41><a class=lnlinks href=#hl-72-41>41</a>
</span><span class=lnt id=hl-72-42><a class=lnlinks href=#hl-72-42>42</a>
</span><span class=lnt id=hl-72-43><a class=lnlinks href=#hl-72-43>43</a>
</span><span class=lnt id=hl-72-44><a class=lnlinks href=#hl-72-44>44</a>
</span><span class=lnt id=hl-72-45><a class=lnlinks href=#hl-72-45>45</a>
</span><span class=lnt id=hl-72-46><a class=lnlinks href=#hl-72-46>46</a>
</span><span class=lnt id=hl-72-47><a class=lnlinks href=#hl-72-47>47</a>
</span><span class=lnt id=hl-72-48><a class=lnlinks href=#hl-72-48>48</a>
</span><span class=lnt id=hl-72-49><a class=lnlinks href=#hl-72-49>49</a>
</span><span class=lnt id=hl-72-50><a class=lnlinks href=#hl-72-50>50</a>
</span><span class=lnt id=hl-72-51><a class=lnlinks href=#hl-72-51>51</a>
</span><span class=lnt id=hl-72-52><a class=lnlinks href=#hl-72-52>52</a>
</span><span class=lnt id=hl-72-53><a class=lnlinks href=#hl-72-53>53</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>package</span> <span class=n>com</span><span class=o>.</span><span class=n>itheima</span><span class=o>.</span><span class=n>dao</span><span class=o>.</span><span class=n>impl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>import</span> <span class=n>java</span><span class=o>.</span><span class=n>io</span><span class=o>.</span><span class=n>Serializable</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>import</span> <span class=n>java</span><span class=o>.</span><span class=n>lang</span><span class=o>.</span><span class=n>reflect</span><span class=o>.</span><span class=n>ParameterizedType</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>import</span> <span class=n>java</span><span class=o>.</span><span class=n>util</span><span class=o>.</span><span class=n>List</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>import</span> <span class=n>org</span><span class=o>.</span><span class=n>hibernate</span><span class=o>.</span><span class=n>criterion</span><span class=o>.</span><span class=n>DetachedCriteria</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>import</span> <span class=n>org</span><span class=o>.</span><span class=n>hibernate</span><span class=o>.</span><span class=n>criterion</span><span class=o>.</span><span class=n>Projections</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>import</span> <span class=n>org</span><span class=o>.</span><span class=n>springframework</span><span class=o>.</span><span class=n>orm</span><span class=o>.</span><span class=n>hibernate5</span><span class=o>.</span><span class=n>support</span><span class=o>.</span><span class=n>HibernateDaoSupport</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>import</span> <span class=n>com</span><span class=o>.</span><span class=n>itheima</span><span class=o>.</span><span class=n>dao</span><span class=o>.</span><span class=n>BaseDao</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>BaseDaoImpl</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=k>extends</span> <span class=n>HibernateDaoSupport</span> <span class=n>implements</span> <span class=n>BaseDao</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>private</span> <span class=n>Class</span> <span class=n>clazz</span> <span class=p>;</span><span class=o>//</span><span class=err>声明</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>BaseDaoImpl</span><span class=p>(){</span><span class=o>//</span><span class=err>有参构造</span> <span class=err>反射解析</span><span class=n>T类型</span>
</span></span><span class=line><span class=cl>		<span class=n>ParameterizedType</span> <span class=n>pt</span> <span class=o>=</span> <span class=p>(</span><span class=n>ParameterizedType</span><span class=p>)</span> <span class=n>this</span><span class=o>.</span><span class=n>getClass</span><span class=p>()</span><span class=o>.</span><span class=n>getGenericSuperclass</span><span class=p>();</span>
</span></span><span class=line><span class=cl>		<span class=n>clazz</span> <span class=o>=</span> <span class=p>(</span><span class=n>Class</span><span class=p>)</span> <span class=n>pt</span><span class=o>.</span><span class=n>getActualTypeArguments</span><span class=p>()[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span> <span class=o>//</span><span class=err>查</span><span class=n>id</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>T</span> <span class=n>findById</span><span class=p>(</span><span class=n>Serializable</span> <span class=n>id</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=p>(</span><span class=n>T</span><span class=p>)</span> <span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>clazz</span><span class=p>,</span> <span class=n>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span> <span class=o>//</span><span class=err>查全部</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>findAll</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span> <span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>findByCriteria</span><span class=p>(</span><span class=n>DetachedCriteria</span><span class=o>.</span><span class=n>forClass</span><span class=p>(</span><span class=n>clazz</span><span class=p>));</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=o>//=================================================</span>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span> <span class=o>//</span><span class=err>增</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>save</span><span class=p>(</span><span class=n>T</span> <span class=n>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span> <span class=o>//</span><span class=err>删</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>delete</span><span class=p>(</span><span class=n>T</span> <span class=n>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span> <span class=o>//</span><span class=err>改</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>void</span> <span class=n>update</span><span class=p>(</span><span class=n>T</span> <span class=n>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>		
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span> <span class=o>//</span><span class=err>查分页的</span><span class=n>List集合</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>findByPage</span><span class=p>(</span><span class=n>DetachedCriteria</span> <span class=n>criteria</span><span class=p>,</span> <span class=ne>int</span> <span class=n>currentPage</span><span class=p>,</span> <span class=ne>int</span> <span class=n>pageSize</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=n>out</span><span class=o>.</span><span class=n>println</span><span class=p>(</span><span class=s2>&#34;使用leBaseDaoImpl的findByPage方法~！~&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=n>criteria</span><span class=o>.</span><span class=n>setProjection</span><span class=p>(</span><span class=n>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>)</span> <span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>findByCriteria</span><span class=p>(</span><span class=n>criteria</span><span class=p>,</span> <span class=p>(</span><span class=n>currentPage</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span><span class=o>*</span><span class=n>pageSize</span> <span class=p>,</span> <span class=n>pageSize</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span> <span class=o>//</span><span class=err>查总条数</span>
</span></span><span class=line><span class=cl>	<span class=n>public</span> <span class=ne>int</span> <span class=n>findCount</span><span class=p>(</span><span class=n>DetachedCriteria</span> <span class=n>criteria</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>criteria</span><span class=o>.</span><span class=n>setProjection</span><span class=p>(</span><span class=n>Projections</span><span class=o>.</span><span class=n>rowCount</span><span class=p>());</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Long</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Long</span><span class=o>&gt;</span><span class=p>)</span> <span class=n>getHibernateTemplate</span><span class=p>()</span><span class=o>.</span><span class=n>findByCriteria</span><span class=p>(</span><span class=n>criteria</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=n>list</span><span class=o>.</span><span class=n>size</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=p>){</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=n>list</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=o>.</span><span class=n>intValue</span><span class=p>();</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>CustomerDao.java 继承BaseDao</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-73-1><a class=lnlinks href=#hl-73-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=n>interface</span> <span class=n>CustomerDao</span> <span class=k>extends</span> <span class=n>BaseDao</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=p>{</span></span></span></code></pre></td></tr></table></div></div><p>CustomerDaoImpl.java继承BaseDaoImpl 实现接口CustomerDao</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-74-1><a class=lnlinks href=#hl-74-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>CustomerDaoImpl</span> <span class=k>extends</span> <span class=n>BaseDaoImpl</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=n>implements</span> <span class=n>CustomerDao</span> <span class=p>{</span></span></span></code></pre></td></tr></table></div></div><h2 id=登陆拦截器>登陆拦截器
<a class=header-anchor href=#%e7%99%bb%e9%99%86%e6%8b%a6%e6%88%aa%e5%99%a8></a></h2><p>\itheima\web\interceptor\LoginInterceptor.java</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-75-1><a class=lnlinks href=#hl-75-1> 1</a>
</span><span class=lnt id=hl-75-2><a class=lnlinks href=#hl-75-2> 2</a>
</span><span class=lnt id=hl-75-3><a class=lnlinks href=#hl-75-3> 3</a>
</span><span class=lnt id=hl-75-4><a class=lnlinks href=#hl-75-4> 4</a>
</span><span class=lnt id=hl-75-5><a class=lnlinks href=#hl-75-5> 5</a>
</span><span class=lnt id=hl-75-6><a class=lnlinks href=#hl-75-6> 6</a>
</span><span class=lnt id=hl-75-7><a class=lnlinks href=#hl-75-7> 7</a>
</span><span class=lnt id=hl-75-8><a class=lnlinks href=#hl-75-8> 8</a>
</span><span class=lnt id=hl-75-9><a class=lnlinks href=#hl-75-9> 9</a>
</span><span class=lnt id=hl-75-10><a class=lnlinks href=#hl-75-10>10</a>
</span><span class=lnt id=hl-75-11><a class=lnlinks href=#hl-75-11>11</a>
</span><span class=lnt id=hl-75-12><a class=lnlinks href=#hl-75-12>12</a>
</span><span class=lnt id=hl-75-13><a class=lnlinks href=#hl-75-13>13</a>
</span><span class=lnt id=hl-75-14><a class=lnlinks href=#hl-75-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>public</span> <span class=k>class</span> <span class=n>LoginInterceptor</span> <span class=k>extends</span> <span class=n>MethodFilterInterceptor</span><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=err>@</span><span class=n>Override</span>
</span></span><span class=line><span class=cl>	<span class=n>protected</span> <span class=ne>String</span> <span class=n>doIntercept</span><span class=p>(</span><span class=n>ActionInvocation</span> <span class=n>arg0</span><span class=p>)</span> <span class=n>throws</span> <span class=n>Exception</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=p>(</span><span class=n>User</span><span class=p>)</span><span class=n>ServletActionContext</span><span class=o>.</span><span class=n>getRequest</span><span class=p>()</span><span class=o>.</span><span class=n>getSession</span><span class=p>()</span><span class=o>.</span><span class=n>getAttribute</span><span class=p>(</span><span class=s2>&#34;user&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=k>if</span><span class=p>(</span><span class=n>user</span> <span class=o>==</span> <span class=n>null</span><span class=p>){</span>
</span></span><span class=line><span class=cl>			<span class=n>System</span><span class=o>.</span><span class=n>out</span><span class=o>.</span><span class=n>println</span><span class=p>(</span><span class=s2>&#34;没有登录，现在要去执行登录&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=s2>&#34;login&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=n>out</span><span class=o>.</span><span class=n>println</span><span class=p>(</span><span class=s2>&#34;已经登录，放行&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>arg0</span><span class=o>.</span><span class=n>invoke</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>struts.xml 在要拦截的package里声明拦截器</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-76-1><a class=lnlinks href=#hl-76-1> 1</a>
</span><span class=lnt id=hl-76-2><a class=lnlinks href=#hl-76-2> 2</a>
</span><span class=lnt id=hl-76-3><a class=lnlinks href=#hl-76-3> 3</a>
</span><span class=lnt id=hl-76-4><a class=lnlinks href=#hl-76-4> 4</a>
</span><span class=lnt id=hl-76-5><a class=lnlinks href=#hl-76-5> 5</a>
</span><span class=lnt id=hl-76-6><a class=lnlinks href=#hl-76-6> 6</a>
</span><span class=lnt id=hl-76-7><a class=lnlinks href=#hl-76-7> 7</a>
</span><span class=lnt id=hl-76-8><a class=lnlinks href=#hl-76-8> 8</a>
</span><span class=lnt id=hl-76-9><a class=lnlinks href=#hl-76-9> 9</a>
</span><span class=lnt id=hl-76-10><a class=lnlinks href=#hl-76-10>10</a>
</span><span class=lnt id=hl-76-11><a class=lnlinks href=#hl-76-11>11</a>
</span><span class=lnt id=hl-76-12><a class=lnlinks href=#hl-76-12>12</a>
</span><span class=lnt id=hl-76-13><a class=lnlinks href=#hl-76-13>13</a>
</span><span class=lnt id=hl-76-14><a class=lnlinks href=#hl-76-14>14</a>
</span><span class=lnt id=hl-76-15><a class=lnlinks href=#hl-76-15>15</a>
</span><span class=lnt id=hl-76-16><a class=lnlinks href=#hl-76-16>16</a>
</span><span class=lnt id=hl-76-17><a class=lnlinks href=#hl-76-17>17</a>
</span><span class=lnt id=hl-76-18><a class=lnlinks href=#hl-76-18>18</a>
</span><span class=lnt id=hl-76-19><a class=lnlinks href=#hl-76-19>19</a>
</span><span class=lnt id=hl-76-20><a class=lnlinks href=#hl-76-20>20</a>
</span><span class=lnt id=hl-76-21><a class=lnlinks href=#hl-76-21>21</a>
</span><span class=lnt id=hl-76-22><a class=lnlinks href=#hl-76-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>&lt;</span><span class=kn>package</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;base&#34;</span><span class=w> </span><span class=nx>extends</span><span class=p>=</span><span class=s>&#34;json-default&#34;</span><span class=w> </span><span class=nx>namespace</span><span class=p>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=mf>1.</span><span class=w> </span><span class=nx>声明拦截器</span><span class=w> </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=nx>interceptors</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=nx>interceptor</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;LoginInterceptor&#34;</span><span class=w> </span><span class=nx>class</span><span class=p>=</span><span class=s>&#34;com.itheima.web.interceptor.LoginInterceptor&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=nx>不拦的</span><span class=w> </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=nx>param</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;excludeMethods&#34;</span><span class=p>&gt;</span><span class=nx>createCode</span><span class=p>,</span><span class=nx>login</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>param</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=o>/</span><span class=nx>interceptor</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=mf>2.</span><span class=w>  </span><span class=o>--</span><span class=p>&gt;</span><span class=w>	
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=nx>interceptor</span><span class=o>-</span><span class=nx>stack</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;baseStack&#34;</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=nx>interceptor</span><span class=o>-</span><span class=nx>ref</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;LoginInterceptor&#34;</span><span class=o>/</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>&lt;</span><span class=nx>interceptor</span><span class=o>-</span><span class=nx>ref</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;defaultStack&#34;</span><span class=o>/</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=o>/</span><span class=nx>interceptor</span><span class=o>-</span><span class=nx>stack</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>interceptors</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=mf>2.</span><span class=w> </span><span class=nx>定义这个包</span><span class=err>，</span><span class=nx>默认的拦截器是什么</span><span class=w> </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=k>default</span><span class=o>-</span><span class=nx>interceptor</span><span class=o>-</span><span class=nx>ref</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;baseStack&#34;</span><span class=o>/</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;!</span><span class=o>--</span><span class=w> </span><span class=mf>3.</span><span class=w> </span><span class=nx>配置共性的result</span><span class=w> </span><span class=o>--</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=nx>global</span><span class=o>-</span><span class=nx>results</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>&lt;</span><span class=nx>result</span><span class=w> </span><span class=nx>name</span><span class=p>=</span><span class=s>&#34;login&#34;</span><span class=w> </span><span class=kd>type</span><span class=p>=</span><span class=s>&#34;redirect&#34;</span><span class=p>&gt;</span><span class=o>/</span><span class=nx>login</span><span class=p>.</span><span class=nx>jsp</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>result</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>&lt;</span><span class=o>/</span><span class=nx>global</span><span class=o>-</span><span class=nx>results</span><span class=p>&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>&lt;</span><span class=o>/</span><span class=kn>package</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><div class=post-tags><a href=/tags/crm%E7%B3%BB%E7%BB%9F/>CRM系统</a></div><div class=post-share-tools><div class=post-share-loading><i class="fa-solid fa-ellipsis fa-spin"></i></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class=a2a_dd href=https://www.addtoany.com/share></a><a class=a2a_button_wechat></a><a class=a2a_button_qzone></a><a class=a2a_button_sina_weibo></a><a class=a2a_button_douban></a><a class=a2a_button_facebook></a><a class=a2a_button_x></a><a class=a2a_button_email></a><a class=a2a_button_printfriendly></a></div></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>有价值，请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="你永远无法说服猴子说有一个上帝存在 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="你永远无法说服猴子说有一个上帝存在 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/%E5%A6%82%E4%BD%95%E5%9C%A8%E4%B8%AD%E5%9B%BD%E8%B5%9A%E9%92%B1/ rel=next title=如何在中国赚钱？><i class="fa fa-chevron-left"></i> 如何在中国赚钱？</a></div><div class="post-nav-prev post-nav-item"><a href=/post/%E7%BA%BF%E6%9D%9F%E7%BA%BF%E7%BC%86%E7%BA%BF%E6%9D%90/ rel=prev title=线束线材线缆>线束线材线缆
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=i18n-translate class=i18n-translate><i class="fa fa-language"></i><div id=lang-select class=lang-select><div id=lang-selected class=selected-option><span class="flag-icon flag-icon-zh-cn"></span>
<span class=selected-language>简体中文</span>
<i class="fa fa-chevron-down"></i></div><div id=lang-options class=lang-options><div class=lang-option lang-code=zh-cn lang-name=简体中文 lang-url=/post/crm%E9%A1%B9%E7%9B%AE-ssh/><span class="flag-icon flag-icon-zh-cn"></span>
<span class=lang-name>简体中文</span></div></div></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>你永远无法说服猴子说有一个上帝存在</span></div><div class=custom-footer><meta name=referrer content="no-referrer"></div></div></footer><script class=next-config data-name=page type=application/json>{"clipboard":{"js":{"alias":"clipboard","file":"dist/clipboard.min.js","name":"clipboard.js","version":"2.0.11"}},"comments":false,"expired":false,"isHome":false,"isPage":true,"path":"crm%E9%A1%B9%E7%9B%AE-ssh","permalink":"/post/crm%E9%A1%B9%E7%9B%AE-ssh/","title":"CRM系统","toc":true,"waline":{"commentcnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}}}</script><script type=text/javascript src=/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":true,"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":false,"enable":false,"transition":{"collheader":"slideInRight","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":true},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"/js/3rd"}},"version":"4.8.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src="/js/main.min.js?=1766275881" defer></script><script type=text/javascript src="/js/clipboard.min.js?=1766275881" defer></script></body></html>